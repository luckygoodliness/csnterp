Scdp.Const.PACKAGE_VERSION = 1;
Scdp.Const.SHORT_DATE_FORMAT = 1;
Scdp.Const.LONG_DATE_FORMAT = 2;
Scdp.Const.BUSINESS_DATE_FORMAT = 3;
Scdp.Const.AJAX_TIMEOUT = 3E5;
Scdp.Const.MSGBOX_DEFAULT_WIDTH = 350;
Scdp.Const.MSGBOX_DEFAULT_HEIGHT = 150;
Scdp.Const.FORM_FIELD_LABEL_DEFAULT_WIDTH = 100;
Scdp.Const.FORM_FIELD_LABEL_ALIGN = "left";
Scdp.Const.JDEC_DEFAULT_DECIMAL_LENGTH = 2;
Scdp.Const.IFIELD_READONLY_STYLE = !1;
Scdp.Const.CONTENT_PANEL_MIN_WIDTH = 880;
Scdp.Const.CONTENT_PANEL_MIN_HEIGHT = 530;
Scdp.Const.IFIELD_READONLY_STYLE = !1;
Scdp.Const.CACHE_TYPE_COMBO_STORE = "CACHE_TYPE_COMBO_STORE";
Scdp.Const.CACHE_TYPE_INFO_LAYOUT = "CACHE_TYPE_INFO_LAYOUT";
Scdp.Const.CACHE_TYPE_SYS_MENU = "CACHE_TYPE_SYS_MENU";
Scdp.Const.CACHE_CODEGENE_TABLES = "CACHE_CODEGENE_TABLES";
Scdp.Const.CACHE_CRUD_TREE_ACTION = "CACHE_CRUD_TREE_ACTION";
Scdp.Const.CACHE_JQGRID_COLUMN_DEF = "CACHE_JQGRID_COLUMN_DEF";
Scdp.Const.CACHE_MODULE_VIEW_HISTORY = "CACHE_MODULE_VIEW_HISTORY";
Scdp.Const.JSON_ACTION = "controller/json.action";
Scdp.Const.POST_ACTION = "controller/post.action";
Scdp.Const.LANGUAGE_ID_STORE_DATA = [{code: "en_US", codedesc: "English"}, {code: "zh_CN", codedesc: "中文"}];
Scdp.Const.SYSTEM_LANGUAGE_ID = "SYSTEM_LANGUAGE_ID";
Scdp.Const.MAXIMUM_MAINFRAME = "MAXIMUM_MAINFRAME";
Scdp.Const.LOGIN_TIME_MILLIS = "LOGIN_TIME_MILLIS";
Scdp.Const.USER_ID = "userId";
Scdp.Const.USER_UUID = "userUuid";
Scdp.Const.USER_NAME = "userName";
Scdp.Const.USER_NEED_MODIFY_PASS = "userNeedModifyPass";
Scdp.Const.USER_LOCALE_ID = "localeId";
Scdp.Const.USER_COMPANY_UUID = "companyUuid";
Scdp.Const.USER_COMPANY_CODE = "companyCode";
Scdp.Const.USER_COMPANY_NAME = "companyName";
Scdp.Const.USER_DEPARTMENT_UUID = "departmentUuid";
Scdp.Const.USER_DEPARTMENT_CODE = "departmentCode";
Scdp.Const.USER_DEPARTMENT_NAME = "departmentName";
Scdp.Const.USER_COUNTRY_CODE = "countryCode";
Scdp.Const.USER_CITY_CODE = "cityCode";
Scdp.Const.USER_CURRENCY_CODE = "currencyCode";
Scdp.Const.USER_WEEK_START = "weekStart";
Scdp.Const.USER_DECIMAL_SEPARATOR = "decimalSeparator";
Scdp.Const.USER_THOUSAND_SEPARATOR = "thousandSeparator";
Scdp.Const.USER_PRIVILEGES = "userPrivileges";
Scdp.Const.USER_TOKEN = "userToken";
Scdp.Const.USER_SYSTEM_TITLE = "systemTitle";
Scdp.Const.USER_SYSTEM_LOGO = "systemLogo";
Scdp.Const.USER_DATA_ARRAY = [Scdp.Const.USER_ID, Scdp.Const.USER_UUID, Scdp.Const.USER_NAME, Scdp.Const.USER_NEED_MODIFY_PASS, Scdp.Const.USER_TOKEN, Scdp.Const.USER_COMPANY_UUID, Scdp.Const.USER_COMPANY_CODE, Scdp.Const.USER_COMPANY_NAME, Scdp.Const.USER_DEPARTMENT_UUID, Scdp.Const.USER_DEPARTMENT_CODE, Scdp.Const.USER_DEPARTMENT_NAME, Scdp.Const.USER_PRIVILEGES, Scdp.Const.USER_COUNTRY_CODE, Scdp.Const.USER_CITY_CODE, Scdp.Const.USER_CURRENCY_CODE, Scdp.Const.USER_WEEK_START, Scdp.Const.USER_DECIMAL_SEPARATOR, Scdp.Const.USER_THOUSAND_SEPARATOR];
Scdp.Const.USER_INFO_KEYS = Ext.Array.merge(Scdp.Const.USER_DATA_ARRAY, [Scdp.Const.CACHE_TYPE_SYS_MENU, Scdp.Const.USER_SYSTEM_TITLE, Scdp.Const.USER_SYSTEM_LOGO]);
Scdp.Const.VERIFY_TYPE_MOBILE = "mobile";
Scdp.Const.VERIFY_TYPE_MAIL = "mail";
Scdp.Const.QUERY_CONDITION_HISTORY_CACHE_SIZE = 10;
Scdp.Const.MAX_ALLOWED_OPEN_MODULES = 10;
Scdp.Const.UI_INFO_STATUS_NEW = "NEW";
Scdp.Const.UI_INFO_STATUS_MODIFY = "MODIFY";
Scdp.Const.UI_INFO_STATUS_VIEW = "VIEW";
Scdp.Const.UI_INFO_STATUS_NULL = "NULL";
Scdp.Const.EVERY_PAGE_RECORDS = "EVERY_PAGE_RECORDS";
Scdp.Const.GRID_EVERY_PAGE_SHOW_RECORDS_DEFAULT = 20;
Scdp.Const.COMMON_QUERY_IGNORECASE_DEFAULT = !1;
Scdp.Const.COMMON_QUERY_MULTISORT_DEFAULT = !1;
Scdp.Const.COMMON_QUERY_LOCAL_SORT_DEFAULT = !0;
Scdp.Const.LOGIN_COMPANY_CACHE = "LOGIN_COMPANY_CACHE";
Scdp.Const.LOGIN_USER_CACHE = "LOGIN_USER_CACHE";
Scdp.Const.LOGIN_PASSWORD_CACHE = "LOGIN_PASSWORD_CACHE";
Scdp.Const.LOGIN_COMPANY_CACHE_CHECK = "LOGIN_COMPANY_CACHE_CHECK";
Scdp.Const.LOGIN_USER_CACHE_CHECK = "LOGIN_USER_CACHE_CHECK";
Scdp.Const.LOGIN_PASSWORD_CACHE_CHECK = "LOGIN_PASSWORD_CACHE_CHECK";
Scdp.Const.LOGIN_RSA_STORE_KEY_CACHE = "LOGIN_RSA_KEY_PAIR_CACHE";
Scdp.Const.FUZZY_QUERY_TERM_CACHE = "FUZZY_QUERY_TERM_CACHE";
Scdp.Const.COMMON_QUERY_IGNORE_CASE_CACHE = "COMMON_QUERY_IGNORE_CASE_CACHE";
Scdp.Const.COMMON_QUERY_MULTI_SORT_CACHE = "COMMON_QUERY_MULTI_SORT_CACHE";
Scdp.Const.COMMON_QUERY_PAGE_SIZE_CACHE = "COMMON_QUERY_PAGE_SIZE_CACHE";
Scdp.Const.COMMON_QUERY_RESULT_COLUMN_CACHE = "COMMON_QUERY_RESULT_COLUMN_CACHE";
Scdp.Const.COMMON_QUERY_RESULT_COLUMN_DEFAULT_SORT_CACHE = "COMMON_QUERY_RESULT_COLUMN_DEFAULT_SORT_CACHE";
Scdp.Const.COMMON_QUERY_EXCEL_EXPORT_CACHE = "COMMON_QUERY_EXCEL_EXPORT_CACHE";
Scdp.Const.COMMON_QUERY_PAGE_DESIGN_CLASS_NAME_CACHE = "COMMON_QUERY_PAGE_DESIGN_CLASS_NAME_CACHE";
Scdp.Const.COMMON_MAINFRAME_ACCORDING_DEFAULT_CACHE = "COMMON_MAINFRAME_ACCORDING_DEFAULT_CACHE";
Scdp.Const.NAVIGATION_BAR_DEFAULT_WIDTH_CACHE = "NAVIGATION_BAR_DEFAULT_WIDTH_CACHE";
Scdp.Const.BUILD_ID_CACHE = "BUILD_ID_CACHE";
Scdp.Const.NAVIGATION_BAR_DEFAULT_COLLAPSE = !1;
Scdp.Const.EDIT_PANEL_DEFAUL_HEIGHT = "EDIT_PANEL_DEFAUL_HEIGHT";
Scdp.Const.THEME_SKIN_COLOR_COOKIE = "THEME_SKIN_COLOR_COOKIE";
Scdp.Const.DATA_TYPE_UNDEFINED = "undefined";
Scdp.Const.DATA_TYPE_NUMBER = "number";
Scdp.Const.DATA_TYPE_STRING = "string";
Scdp.Const.DATA_TYPE_BOOLEAN = "boolean";
Scdp.Const.DATA_TYPE_OBJECT = "object";
Scdp.Const.DATA_TYPE_FUNCTION = "function";
Scdp.Const.COMPONENT_JTEXT = "JText";
Scdp.Const.COMPONENT_JAUTOTEXT = "JAutoText";
Scdp.Const.COMPONENT_JTEXTAREA = "JTextArea";
Scdp.Const.COMPONENT_JINT = "JInt";
Scdp.Const.COMPONENT_JDEC = "JDec";
Scdp.Const.COMPONENT_JCUR = "JCur";
Scdp.Const.COMPONENT_JCHECK = "JCheck";
Scdp.Const.COMPONENT_JDATE = "JDate";
Scdp.Const.COMPONENT_JDATETIME = "JDatetime";
Scdp.Const.COMPONENT_JTIME = "JTime";
Scdp.Const.COMPONENT_JHIDDEN = "JHidden";
Scdp.Const.COMPONENT_JDISPLAY = "JDisplay";
Scdp.Const.COMPONENT_JHTML = "JHtml";
Scdp.Const.COMPONENT_JIMG = "JImg";
Scdp.Const.COMPONENT_JFILE = "JFile";
Scdp.Const.COMPONENT_JTRIGGER = "JTrigger";
Scdp.Const.COMPONENT_JCombo = "JCombo";
Scdp.Const.COMPONENT_JCHECKGROUP = "JCheckGroup";
Scdp.Const.COMPONENT_JRADIOGROUP = "JRadioGroup";
Scdp.Const.QUERY_CONDITION_OPTBTN_WIDTH = 32;
Scdp.Const.QUERY_CONDITION_DEFAULT_OPT = "^";
Scdp.Const.QUERY_CONDITION_FORCE_ENABLE = !1;
Scdp.Const.QUERY_CONDITION_OPERATORS = [{code: "~", text: Scdp.I18N.QC_OPERATOR_INCLUDE}, {
    code: "!~",
    text: Scdp.I18N.QC_OPERATOR_NOT_INCLUDE
}, {code: "\x3d", text: Scdp.I18N.QC_OPERATOR_EQUAL}, {
    code: "!\x3d",
    text: Scdp.I18N.QC_OPERATOR_NOT_EQUAL
}, {code: "^", text: Scdp.I18N.QC_OPERATOR_STARTSWITH}, {
    code: "!^",
    text: Scdp.I18N.QC_OPERATOR_NOT_STARTSWITH
}, {code: "$", text: Scdp.I18N.QC_OPERATOR_ENDSWITH}, {code: "!$", text: Scdp.I18N.QC_OPERATOR_NOT_ENDSWITH}];
Scdp.Const.QC_OPT_IGNORE_XTYPES = ["JFromTo", "JBolCombo", "JCheck"];
Scdp.Const.COMPONENT_JBUTTON = "JButton";
Scdp.Const.CONTAINER_JPANEL = "JPanel";
Scdp.Const.CONTAINER_JFIELDSET = "JFieldSet";
Scdp.Const.CONTAINER_JFORM = "JForm";
Scdp.Const.CONTAINER_JTAB = "JTab";
Scdp.Const.CONTAINER_JMENU = "JMenu";
Scdp.Const.CONTAINER_JTREE = "JTree";
Scdp.Const.REPORT_PRINT_ACTION = "REPORT_PRINT";
Scdp.Const.DEFAULT_CRUD_FUNCTION = [{
    funcCid: "queryPanel-\x3equeryBtn",
    funcCode: "",
    funcDesc: "Search"
}, {funcCid: "queryPanel-\x3eaddNew1Btn", funcCode: "", funcDesc: "Add New"}, {
    funcCid: "editPanel-\x3eaddNew2Btn",
    funcCode: "",
    funcDesc: "Add New"
}, {funcCid: "editPanel-\x3ecopyAddBtn", funcCode: "", funcDesc: "Copy Add"}, {
    funcCid: "editPanel-\x3emodifyBtn",
    funcCode: "",
    funcDesc: "Modify"
}, {funcCid: "editPanel-\x3edeleteBtn", funcCode: "", funcDesc: "Delete"}, {
    funcCid: "queryPanel-\x3ebatchDelBtn",
    funcCode: "",
    funcDesc: "Batch Delete"
},
    {funcCid: "queryPanel-\x3eexportBtn", funcCode: "", funcDesc: "Export XLS"}];
Scdp.Const.ENCRYPT_SALT = "sMarT cLOud dEveLoPmEnT plAtForM";
Scdp.Const.RSA_EXPIRE_THRESHOLD = 5;
Scdp.Const.LOGIN_HIS_MARK_AB = "LOGIN_HIS_MARK_AB";
Scdp.Const.USING_UTC = "USING_UTC";
Scdp.Const.LOGIN_TIMEOUT_NOTIFY_TIME = 5;
Scdp.Const.QUERY_TOOLBAR_EXTBTN_LEFT_ALIGN = !1;
Scdp.Const.TOTP = "GSNT44D7Q2O72EC6";
Scdp.Const.RESTRICT_SYSADMIN = !0;
Scdp.Const.LOGO_URL = "framework/images/product/cs_logo.png";
Scdp.Const.LOGO_URL_2 = "framework/images/mainframe/sy_logo.png";
Scdp.MainFrameEvents = new Ext.util.Observable;
Scdp.MainFrameEvents.addEvents("ready", "beforeModuleOpen", "afterLogin");
Scdp.Const.REPORT_FORM_ID_CTL_CID = "formId";
Scdp.Const.REPORT_FORM_ATTACH_CTL_CID = "formAttach";
Scdp.Const.REPORT_DEFAULT_PRINT_METHOD = "pdf";
Scdp.Const.REPORT_DEFAULT_PRINT_INTERVAL = 2E3;
Scdp.Const.REPORT_MAX_PREVIEW_CONCURRENT = 5;
Scdp.Const.REPORT_DEFAULT_EMAIL_FORMAT = "PDF";
Scdp.Const.CACHE_TYPE_SCHEME = "CACHE_TYPE_SCHEME";
Scdp.Const.SCHEME_DEFAULT_VALUE = "*";
Scdp.Const.SCHEME_DEFAULT_SUBTYPE = "*";
Scdp.Const.AUTO_RESIZE_QUERY_GRID_COLUMN = !1;
Scdp.Const.AUTO_RESIZE_GRID_COLUMN = !1;
Scdp.Const.AUTO_RESIZE_JGRIDFIELD_COLUMN = !0;
Scdp.Const.FORM_GRID_FIELD_QUERY_DELAY = 500;
Scdp.Const.ROLE_USER_DATA_FILTER_PREFIX = "SCDP_ROLE_DATA_FILTER_USER_";
Scdp.Const.HIDE_BATCH_DEL_BTN_IN_QUERY_PANEL = !1;
Scdp.Const.NETWORK_DELAY_THRESHOLD_GOOD = 150;
Scdp.Const.NETWORK_DELAY_THRESHOLD_NORMAL = 300;
Scdp.Const.DECIMAL_SEPARATOR_PLACEHOLDER = "\x26|";
Scdp.Const.THOUSAND_SEPARATOR_PLACEHOLDER = "\x26+";
Scdp.Const.MAINPAGE_MENU_CODE = "M_SCDP_MAINPAGE";
Scdp.Const.ABSTRACT_CRUD_VIEW_1_EDITTOOLBAR_DOCKWAY = "bottom";
Scdp.Const.ABSTRACT_CRUD_VIEW_2_EDITTOOLBAR_DOCKWAY = "top";
Scdp.Const.ABSTRACT_CRUD_VIEW_3_EDITTOOLBAR_DOCKWAY = "top";
Scdp.Const.ORG_TYPE_MATRIX = {R: ["R", "C"], C: ["R", "C"], D: ["C", "D", "O"], O: ["C", "O"], V: ["R", "C", "D", "O"]};
Scdp.Const.EXPORT_EXCEL_FILE_NAME_PATTEN = "{module}";
Scdp.Const.CONFIRM_BEFORE_REMOVE_IN_JEGRID = !1;
document.oncontextmenu = function (a) {
    a && a.preventDefault()
};
document.onkeydown = function (a) {
    if (a && a.keyCode === Ext.EventObject.BACKSPACE) {
        var b = a.target || a.srcElement;
        (!0 == b.readOnly || !0 == b.disabled || 0 > b.id.indexOf("-inputEl")) && a.preventDefault()
    }
};
window.SYSCONFIG_PRODUCT_MODE ? (Ext.Error.ignore = !0, window.disableCaching = !1) : (window.disableCaching = !0, window.onerror = function (a, b, c) {
    alert("Error:" + a + "\nurl:" + b + "\nline:" + c);
    return !0
}, Ext.log.max = 1500);
Ext.Loader.setConfig({enabled: !0, disableCaching: window.disableCaching});
Ext.Loader.setPath("Ext.ux", "framework/js/3rdparty/extjs/ux");
Ext.require("Ext.ux.grid.FiltersFeature Ext.ux.NodeDisabled Ext.ux.ProgressBarPager Ext.ux.form.MultiSelect Ext.ux.form.ItemSelector Ext.fx.Anim Ext.grid.* Ext.data.* Ext.util.* Ext.dd.* Ext.tree.* Ext.tip.QuickTipManager Ext.ux.LiveSearchGridPanel".split(" "));
"data" != Ext.BLANK_IMAGE_URL.substr(0, 4) && (Ext.BLANK_IMAGE_URL = "images/1x1/s.gif");
Ext.tip.QuickTipManager.init();
Ext.ProgressBar.prototype.height = 23;
Ext.view.AbstractView.prototype.loadingText = Scdp.I18N.MASK_WAITING;
Ext.grid.column.Column.prototype.setSortState = function (a) {
    a = a && a.direction;
    var b = this.ascSortCls, c = this.descSortCls, d = this.getOwnerHeaderCt();
    switch (a) {
        case "DESC":
            this.addCls(c);
            this.removeCls(b);
            break;
        case "ASC":
            this.addCls(b);
            this.removeCls(c);
            break;
        default:
            this.removeCls([b, c])
    }
    a && d.fireEvent("sortchange", d, this, a);
    a = Scdp.CacheUtil.get(Scdp.Const.COMMON_QUERY_MULTI_SORT_CACHE);
    Scdp.ObjUtil.isEmpty(a) && (a = Scdp.Const.COMMON_QUERY_MULTISORT_DEFAULT);
    if (a && (d = this.up("JQGrid"))) {
        a = this.up("headercontainer");
        for (var d = d.preSort, e = a.getColumnCount(), f = 0; f < e; f++) {
            var g = a.getHeaderAtIndex(f);
            Ext.each(d, function (a) {
                var d = a.direction;
                if (a.property == g.dataIndex)switch (d) {
                    case "DESC":
                        g.addCls(c);
                        g.removeCls(b);
                        break;
                    case "ASC":
                        g.addCls(b);
                        g.removeCls(c);
                        break;
                    default:
                        g.removeCls([b, c])
                }
            })
        }
    }
};
Ext.grid.CellEditor.prototype.onViewRefresh = function () {
    var a = this.el && this.el.dom, b;
    if (a) {
        try {
            b = this.field.column.sorting
        } catch (c) {
        }
        this.editing && !b ? (this.allowBlur = this.wasAllowBlur, this.renderTo.appendChild(a), this.field.focus()) : b || Ext.getDetachedBody().dom.appendChild(a);
        this.editing && b && this.completeEdit()
    }
};
Ext.apply(Ext.util.Sorter.prototype, {
    defaultSorterFn: function (a, b) {
        var c = this.transform, d = this.getRoot(a)[this.property], e = this.getRoot(b)[this.property];
        c && (d = c(d), e = c(e));
        return Ext.isString(d) ? d.localeCompare(e) : d > e ? 1 : d < e ? -1 : 0
    }
});
Ext.Editor.prototype.setValue = function (a) {
    Ext.isFunction(this.field.sotValue) ? this.field.sotValue(a) : this.field.setValue(a)
};
Ext.Editor.prototype.getValue = function () {
    return Ext.isFunction(this.field.gotValue) && !this.field.isXType("JQueryField") ? this.field.gotValue() : this.field.getValue()
};
Ext.Editor.prototype.completeEdit = function (a) {
    var b = this.field;
    this.editing && (b.assertValue && b.assertValue(), b = this.getValue(), String(b) === String(this.startValue) && this.ignoreNoChange ? this.hideEdit(a) : !1 !== this.fireEvent("beforecomplete", this, b, this.startValue) && (b = this.getValue(), this.updateEl && this.boundEl && this.boundEl.update(b), this.hideEdit(a), this.fireEvent("complete", this, b, this.startValue)))
};
Ext.Editor.prototype.completeOnEnter = !1;
Ext.Editor.prototype.startEdit = function (a, b) {
    var c = this.field, d;
    this.completeEdit();
    this.boundEl = Ext.get(a);
    d = this.boundEl.dom;
    b = Ext.isDefined(b) ? b : Ext.String.trim(d.textContent || d.innerText || d.innerHTML);
    !this.rendered && (!this.renderTo && this.ownerCt) && (this.renderTo = this.ownerCt.el).position();
    if (!1 !== this.fireEvent("beforestartedit", this, this.boundEl, b)) {
        this.startValue = b;
        this.show();
        if ("JCombo" == c.xtype)if (Scdp.ObjUtil.isNotEmpty(c.comboType) && Scdp.ObjUtil.isEmpty(c.filterFields))c.refreshStore();
        else if (Scdp.ObjUtil.isNotEmpty(c.comboType) && Scdp.ObjUtil.isNotEmpty(c.filterFields)) {
            d = c.up("JEGrid");
            var e = c.up("JForm");
            Scdp.ObjUtil.isNotEmpty(d) ? c.reload(d, d.prepareEditContext.record) : c.reload(e)
        }
        c.suspendEvents();
        c.reset();
        b ? c.isXType("JDate") || c.isXType("JDatetime") ? Ext.isDate(b) ? c.setValue(b) : c.setValue(new Date(Date.parse(b.replace("T", " ").replace(/-/g, "/")))) : c.setValue(b) : c.setValue(b);
        c.resumeEvents();
        c.isXType("JTextArea") && (this.alignment = "tl?");
        this.realign(!0);
        c.focus([c.getRawValue().length]);
        c.autoSize && c.autoSize();
        this.editing = !0
    }
};
Ext.selection.CheckboxModel.prototype.updateHeaderState = function () {
    var a = this.store, b = a.getCount(), c = this.views, d = !1, e = 0;
    if (!a.buffered && 0 < b) {
        a = this.selected;
        d = 0;
        for (b = a.getCount(); d < b && this.getStoreRecord(a.getAt(d)); ++d)++e;
        d = 0 < e
    }
    c && c.length && (c[0].up("grid"), this.toggleUiHeader(d))
};
Ext.selection.CheckboxModel.prototype.doMultiSelect = function (a, b, c) {
    var d = this.selected, e = !1, f, g, h;
    if (!this.locked) {
        a = !Ext.isArray(a) ? [a] : a;
        f = a.length;
        if (!b && 0 < d.getCount() && (b = this.deselectDuringSelect(a, d.getRange(), c), b[0])) {
            this.maybeFireSelectionChange(0 < b[1] && !c);
            return
        }
        h = function () {
            d.add(g);
            e = !0
        };
        for (b = 0; b < f; b++)g = a[b], this.isSelected(g) || (this.lastSelected = g, this.onSelectChange(g, !0, c, h));
        this.maybeFireSelectionChange(e && !c)
    }
};
Ext.selection.Model.prototype.doDeselect = function (a, b) {
    var c = this.selected, d = 0, e, f, g = 0, h = 0, i;
    if (this.locked || !this.store)return !1;
    if ("number" === typeof a) {
        f = this.store.getAt(a);
        if (!f)return !1;
        a = [f]
    } else Ext.isArray(a) || (a = [a]);
    i = function () {
        ++h;
        c.remove(f)
    };
    e = a.length;
    for (this.suspendChanges(); d < e; d++)f = a[d], this.isSelected(f) && (this.lastSelected === f && (this.lastSelected = c.last()), ++g, this.onSelectChange(f, !1, b, i));
    this.resumeChanges();
    this.maybeFireSelectionChange(0 < h && !b);
    return h === g
};
Ext.view.Table.prototype.onRowSelect = function (a) {
    var b = this.beforeSelectedItemCls;
    this.addRowCls(a, this.selectedItemCls);
    this.isRowStyleFirst(a) ? (this.toggleRowTableCls(a, this.tableSelectedFirstCls, !0), 0 < a && this.removeRowCls(a - 1, b)) : this.addRowCls(a - 1, b)
};
Ext.view.Table.prototype.onRowDeselect = function (a) {
    this.removeRowCls(a, [this.selectedItemCls]);
    this.isRowStyleFirst(a) ? this.toggleRowTableCls(a, [this.tableFocusedFirstCls, this.tableSelectedFirstCls], !1) : this.removeRowCls(a - 1, [this.beforeFocusedItemCls, this.beforeSelectedItemCls])
};
Ext.view.Table.prototype.doFocus = function (a) {
    (this.focusEl = Ext.get(a)).focus()
};
Ext.form.field.Text.prototype.getErrors = function (a) {
    var b = [], c = this.validator, d = this.vtype, e = Ext.form.field.VTypes, f = this.regex, g = Ext.String.format, h;
    a = Ext.isDefined(a) ? a : this.processRawValue(this.getRawValue());
    Ext.isFunction(c) && (c = c.call(this, a), !0 !== c && b.push(c));
    if (1 > (this.allowOnlyWhitespace ? a : Ext.String.trim(a)).length || a === this.emptyText && this.valueContainsPlaceholder) {
        this.allowBlank || b.push(this.blankText);
        if (!this.validateBlank)return b;
        h = !0
    }
    !h && a.length < this.minLength && b.push(g(this.minLengthText,
        this.minLength));
    a.length > this.maxLength && b.push(g(this.maxLengthText, this.maxLength));
    d && (e[d](a, this) || b.push(this.vtypeText || e[d + "Text"]));
    f && !f.test(a) && b.push(this.regexText || this.invalidText);
    return b
};
Ext.form.field.Picker.prototype.onTriggerClick = function () {
    !this.readOnly && !this.disabled && (this.isExpanded ? this.collapse() : this.expand())
};
Ext.grid.plugin.CellEditing.prototype.onSpecialKey = function (a, b, c) {
    if (c.getKey() === c.TAB) {
        c.stopEvent();
        b.isXType("JGridField") && (b.putValue(b.gotRawValue(), !1, !1), b.task.cancel(), b.oldValue = b.gotRawValue());
        if (a)a.onEditorTab(c);
        b = a.up("tablepanel").getSelectionModel();
        if (b.onEditorTab)return b.onEditorTab(a.editingPlugin, c)
    }
};
Ext.define("Ext.data.SortTypes", {
    singleton: !0, none: Ext.identityFn, stripTagsRE: /<\/?[^>]+>/gi, asText: function (a) {
        return String(a).replace(this.stripTagsRE, "")
    }, asUCText: function (a) {
        return String(a).toUpperCase().replace(this.stripTagsRE, "")
    }, asUCString: function (a) {
        return String(a).toUpperCase()
    }, asDate: function (a) {
        return !a ? 0 : Ext.isDate(a) ? a.getTime() : Date.parse(String(a))
    }, asFloat: function (a) {
        a = parseFloat(String(a).replace(/,/g, ""));
        return isNaN(a) ? 0 : a
    }, asInt: function (a) {
        a = parseInt(String(a).replace(/,/g,
            ""), 10);
        return isNaN(a) ? 0 : a
    }
});
Ext.define("Ext.data.Types", {singleton: !0}, function (a) {
    var b = Ext.data.SortTypes;
    Ext.apply(a, {
        stripRe: /[\$,%]/g, AUTO: {sortType: b.none, type: "auto"}, STRING: {
            convert: function (a) {
                var b = this.useNull ? null : "";
                return void 0 === a || null === a ? b : String(a)
            }, sortType: b.asUCString, type: "string"
        }, INT: {
            convert: function (b) {
                return "number" == typeof b ? parseInt(b) : void 0 !== b && null !== b && "" !== b ? parseInt(String(b).replace(a.stripRe, ""), 10) : this.useNull ? null : 0
            }, sortType: b.none, type: "int"
        }, FLOAT: {
            convert: function (b) {
                return "number" === typeof b ?
                    b : void 0 !== b && null !== b && "" !== b ? parseFloat(String(b).replace(a.stripRe, ""), 10) : this.useNull ? null : 0
            }, sortType: b.none, type: "float"
        }, BOOL: {
            convert: function (a) {
                return "boolean" === typeof a ? a : this.useNull && (void 0 === a || null === a || "" === a) ? null : "true" === a || 1 == a
            }, sortType: b.none, type: "bool"
        }, DATE: {
            convert: function (a) {
                var b = this.dateReadFormat || this.dateFormat;
                if (!a)return null;
                if (a instanceof Date)return a;
                a = a.replace("T", " ");
                return b ? Ext.Date.parse(a, b) : new Date(Date.parse(a.replace(/-/g, "/")))
            }, sortType: b.asDate,
            type: "date"
        }
    });
    a.BOOLEAN = a.BOOL;
    a.INTEGER = a.INT;
    a.NUMBER = a.FLOAT
});
Ext.define("Scdp.override.FormFieldDate", {
    override: "Ext.form.field.Date", collapseIf: function (a) {
        !this.isDestroyed && (!a.within(this.bodyEl, !1, !0) && !a.within(this.picker.el, !1, !0) && !this.isEventWithinPickerLoadMask(a)) && this.collapse()
    }, mimicBlur: function (a) {
        var b = this.picker;
        (!b || !a.within(b.el, !1, !0) && !this.isEventWithinPickerLoadMask(a)) && this.callParent(arguments)
    }, isEventWithinPickerLoadMask: function (a) {
        var b = this.picker.loadMask;
        return b ? a.within(b.maskEl, !1, !0) || a.within(b.el, !1, !0) : !1
    }
});
Ext.apply(Ext.form.field.VTypes, {
    dateRange: function (a, b) {
        var c = b.parseDate(a);
        if (!c)return !1;
        if (b.startDateField) {
            var d = b.up().getCmp(b.startDateField);
            if (Scdp.ObjUtil.isNotEmpty(d.getValue())) {
                if (c < d.getValue())return !1;
                b.clearInvalid();
                d.clearInvalid()
            }
        } else if (b.endDateField && (d = b.up().getCmp(b.endDateField), Scdp.ObjUtil.isNotEmpty(d.getValue()))) {
            if (c > d.getValue())return !1;
            b.clearInvalid();
            d.clearInvalid()
        }
        return !0
    }, dateRangeText: Scdp.I18N.DATE_RANGE_ERROR_TEXT, comboxDataExist: function (a, b) {
        if (Scdp.ObjUtil.isEmpty(a) ||
            b.multiSelect)return !0;
        store = b.store;
        var c = b.up("JEGrid"), d = b.up("JForm");
        if (0 == store.count() || Scdp.ObjUtil.isNotEmpty(c) && Scdp.ObjUtil.isNotEmpty(b.filterFields))Scdp.ObjUtil.isNotEmpty(b.comboType) && Scdp.ObjUtil.isEmpty(b.filterFields) ? (b.refreshStore(), store = b.store) : Scdp.ObjUtil.isNotEmpty(b.comboType) && Scdp.ObjUtil.isNotEmpty(b.filterFields) && (Scdp.ObjUtil.isNotEmpty(c) ? b.reload(c, c.getCurRecord()) : b.reload(d), store = b.store);
        c = null;
        c = b.displayDesc ? store.findRecord("codedesc", a, 0, !1, !0, !0) : store.findRecord("code",
            a, 0, !1, !0, !0);
        return Scdp.ObjUtil.isNotEmpty(c)
    }, comboxDataExistText: Scdp.I18N.COMBOX_DATA_EXIST_VALIDATE
});
Ext.define("Scdp.MapUtil.HashMap", {
    extend: "Ext.util.MixedCollection",
    alias: ["widget.HashMap"],
    put: function (a, b) {
        this.add(a, b)
    },
    get: function (a) {
        return this.superclass.get.call(this, a)
    },
    containsKey: function (a) {
        return this.superclass.containsKey.call(this, a)
    }
});
Ext.define("Ext.state.SessionStorageProvider", {
    extend: Ext.state.LocalStorageProvider, getStorageObject: function () {
        var a = this.prefix, b = a, c = b.length - 1;
        "-" === b.charAt(c) && (b = b.substring(0, c));
        return new Ext.util.LocalStorage({id: b, prefix: a, session: !0})
    }
});
window.PERSISTENCE_CACHE = Ext.create("Ext.state.LocalStorageProvider", {prefix: window.SYSCONFIG_PRODUCT_CODE + "-PERSISTENCE-"});
window.SESSION_CACHE = Ext.create("Ext.state.SessionStorageProvider", {prefix: window.SYSCONFIG_PRODUCT_CODE + "-"});
window.TEMP_CACHE = {};
window.PAGE_CACHE = new Ext.util.MixedCollection;
String.prototype.trim || (String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g, "")
}, String.prototype.ltrim = function () {
    return this.replace(/^\s+/, "")
}, String.prototype.rtrim = function () {
    return this.replace(/\s+$/, "")
}, String.prototype.fulltrim = function () {
    return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g, "").replace(/\s+/g, " ")
});
"function" !== typeof String.prototype.endsWith && (String.prototype.endsWith = function (a) {
    return -1 !== this.indexOf(a, this.length - a.length)
});
"function" !== typeof String.prototype.startsWith && (String.prototype.startsWith = function (a) {
    return 0 === this.indexOf(a)
});
Scdp.RSA = {};
Scdp.RSA.ServerKey = {};
Scdp.RSA.ClientKey = {};
window.SYSCONFIG_RSA_DISABLED = Ext.isIE10m || !window.SYSCONFIG_PRODUCT_MODE || window.SYSCONFIG_RSA_DISABLED;
window.LOGIN_TIMEOUT = 0;
window.IS_LOGIN_EXPIRED = !1;
window.NETWORK_DELAY = 0;
Ext.Ajax.timeout = Scdp.Const.AJAX_TIMEOUT;
Ext.data.proxy.Ajax.prototype.timeout = Scdp.Const.AJAX_TIMEOUT;
$(document).ready(function () {
    $("form.scdpActionForm").submit(function (a) {
        var b = {};
        $(this).serializeArray().map(function (a) {
            Scdp.ObjUtil.isNotEmpty(a.value) && (b[a.name] = a.value)
        });
        var c = this.action, d = this.method, e = "scdpHiddenJspForm" + (new Date).getTime();
        a.preventDefault();
        $("body").append('\x3cform class\x3d"hidden" id\x3d"' + e + '" action\x3d"scdp/controller/jsp/load-tasks" method\x3d"post"\x3e\x3c/form\x3e');
        a = "#" + e;
        $(a).append('\x3cinput type\x3d"hidden" name\x3d"postData" id\x3d"postData"/\x3e');
        $(a).append('\x3cinput type\x3d"hidden" name\x3d"userId" id\x3d"userId"/\x3e');
        $(a).append('\x3cinput type\x3d"hidden" name\x3d"userLocaleId" id\x3d"userLocaleId"/\x3e');
        $(a).append('\x3cinput type\x3d"hidden" name\x3d"timestamp" id\x3d"timestamp"/\x3e');
        $(a).append('\x3cinput type\x3d"hidden" name\x3d"network" id\x3d"network"/\x3e');
        $(a).append('\x3cinput type\x3d"hidden" name\x3d"actionName" id\x3d"actionName"/\x3e');
        $(a).append('\x3cinput type\x3d"hidden" name\x3d"signature" id\x3d"signature"/\x3e');
        $(a).action = c;
        $(a).method = d;
        $("#postData", $(a)).val(Ext.encode(b));
        $("#userId", $(a)).val(Scdp.CacheUtil.get(Scdp.Const.USER_ID));
        $("#userLocaleId", $(a)).val(Scdp.getSysConfig("locale_id"));
        $("#timestamp", $(a)).val(Date.now());
        $("#network", $(a)).val(window.NETWORK_DELAY);
        $("#actionName", $(a)).val(c);
        $("#signature", $(a)).val(Scdp.getSign(c, b));
        document.getElementById(e).submit();
        $(a).remove()
    })
});
Scdp.StrUtil.getRecur = function (a, b) {
    for (var c = "", d = 0; d < b; d++)c += a;
    return c
};
Scdp.StrUtil.replaceNull = function (a, b) {
    return Scdp.ObjUtil.isEmpty(a) ? b || "" : a
};
Scdp.StrUtil.concat = function () {
    for (var a = "", b = 0; b < arguments.length; b++)a = a.concat(arguments[b]);
    return a
};
Scdp.StrUtil.replaceAll = function (a, b, c) {
    a = Scdp.StrUtil.replaceNull(a);
    b = Scdp.StrUtil.replaceNull(b);
    c = Scdp.StrUtil.replaceNull(c);
    if (b != c)for (; -1 != a.indexOf(b);)a = a.replace(b, c);
    return a
};
Scdp.StrUtil.replaceFirst = function (a, b, c) {
    a = Scdp.StrUtil.replaceNull(a);
    b = Scdp.StrUtil.replaceNull(b);
    c = Scdp.StrUtil.replaceNull(c);
    return a.replace(b, c)
};
Scdp.StrUtil.replaceLast = function (a, b, c) {
    a = Scdp.StrUtil.replaceNull(a);
    b = Scdp.StrUtil.replaceNull(b);
    c = Scdp.StrUtil.replaceNull(c);
    return Scdp.StrUtil.reverseStr(Scdp.StrUtil.replaceFirst(Scdp.StrUtil.reverseStr(a), Scdp.StrUtil.reverseStr(b), Scdp.StrUtil.reverseStr(c)))
};
Scdp.StrUtil.reverseStr = function (a) {
    if (Scdp.ObjUtil.isEmpty(a))return a;
    a = a.split("");
    a = a.reverse();
    return a.join("")
};
Scdp.StrUtil.getMatches = function (a, b) {
    return a.match(b)
};
Scdp.StrUtil.ltrim = function (a) {
    return a.replace(/(^\s*)/g, "")
};
Scdp.StrUtil.rtrim = function (a) {
    return a.replace(/(\s*$)/g, "")
};
Scdp.StrUtil.trim = function (a) {
    return a.replace(/(^\s*)|(\s*$)/g, "")
};
Scdp.StrUtil.lpad = function (a, b, c) {
    for (var d = 0; d < c; d++)a = b + a;
    return a
};
Scdp.StrUtil.rpad = function (a, b, c) {
    for (var d = 0; d < c; d++)a += b;
    return a
};
Scdp.StrUtil.pad = function (a, b, c) {
    for (var d = 0; d < c; d++)a = 0 == d % 2 ? a + b : b + a;
    return a
};
Scdp.StrUtil.indexOf = function (a, b, c) {
    return c ? a.toLowerCase().indexOf(b.toLowerCase()) : a.indexOf(b)
};
Scdp.StrUtil.isIP = function (a) {
    var b = /^(\d+)\.(\d+)\.(\d+)\.(\d+)$/;
    return b.test(a) ? (a.match(b), !!(255 >= RegExp.$1 && 0 <= RegExp.$1 && 255 >= RegExp.$2 && 0 <= RegExp.$2 && 255 >= RegExp.$3 && 0 <= RegExp.$3 && 255 >= RegExp.$4 && 0 <= RegExp.$4)) : !1
};
Scdp.StrUtil.isLongDate = function (a) {
    a = a.replace(/(^\s*)|(\s*$)/g, "").match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/);
    if (null == a)return !1;
    var b = new Date(a[1], a[3] - 1, a[4], a[5], a[6], a[7]);
    return b.getFullYear() == a[1] && b.getMonth() + 1 == a[3] && b.getDate() == a[4] && b.getHours() == a[5] && b.getMinutes() == a[6] && b.getSeconds() == a[7]
};
Scdp.StrUtil.isShortDate = function (a) {
    a = a.replace(/(^\s*)|(\s*$)/g, "").match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);
    if (null == a)return !1;
    var b = new Date(a[1], a[3] - 1, a[4]);
    return b.getFullYear() == a[1] && b.getMonth() + 1 == a[3] && b.getDate() == a[4]
};
Scdp.StrUtil.isDate = function (a) {
    return Scdp.StrUtil.isLongDate(a) || Scdp.StrUtil.isShortDate(a)
};
Scdp.StrUtil.isMobile = function (a) {
    return /^(\+)?[0-9]{7,}$/.test(a)
};
Scdp.StrUtil.isEmail = function (a) {
    return /^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(a)
};
Scdp.StrUtil.isZipCode = function (a) {
    return /^[\d]{6}$/.test(a)
};
Scdp.StrUtil.isFileName = function (a) {
    return !/[\\/:\?\*"<>|]/.test(a)
};
Scdp.StrUtil.existChinese = function (a) {
    return -1 != a.search(/[\u4e00-\u9fa5]+/)
};
Scdp.StrUtil.existFullChar = function (a) {
    return -1 != a.search(/[\ufe30-\uffa0]+/)
};
Scdp.StrUtil.trueLength = function (a) {
    var b, c;
    for (b = c = 0; b < a.length; b++)c = 0 <= a.charCodeAt(b) && 255 >= a.charCodeAt(b) ? c + 1 : c + 2;
    return c
};
Scdp.StrUtil.toFullChar = function (a) {
    for (var b = "", c = 0; c < a.length; c++)b = 0 < a.charCodeAt(c) && 255 > a.charCodeAt(c) ? b + String.fromCharCode(a.charCodeAt(c) + 65248) : b + String.fromCharCode(a.charCodeAt(c));
    return b
};
Scdp.StrUtil.toHtmlCode = function (a) {
    a = a.replace(/&/g, "\x26amp;");
    a = a.replace(/</g, "\x26lt;");
    a = a.replace(/>/g, "\x26gt;");
    a = a.replace(/'/g, "\x26apos;");
    a = a.replace(/"/g, "\x26quot;");
    a = a.replace(/\\n/g, "\x3cbr\x3e");
    a = a.replace(/ /g, "\x26nbsp;");
    return a = a.replace(/\\t/g, "\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;")
};
Scdp.StrUtil.getSplitSize = function (a, b) {
    return Scdp.ObjUtil.isNotEmpty(a) ? a.split(b).length : 0
};
Scdp.StrUtil.getLastSplit = function (a, b) {
    if (Scdp.ObjUtil.isNotEmpty(a)) {
        var c = a.split(b);
        return c[c.length - 1]
    }
    return ""
};
var UUID = function () {
    typeof("undefined" == UUID.initilize) && (UUID.initilize = !0, UUID.prototype.valueOf = function () {
        return this.id
    }, UUID.prototype.toString = function () {
        return this.id
    }, UUID.prototype.createUUID = function () {
        var a = new Date(1582, 10, 15, 0, 0, 0, 0), b = (new Date).getTime() - a.getTime(), a = UUID.getIntegerBits(b, 0, 31), c = UUID.getIntegerBits(b, 32, 47), b = UUID.getIntegerBits(b, 48, 59) + "1", d = UUID.getIntegerBits(UUID.rand(4095), 0, 7), f = UUID.getIntegerBits(UUID.rand(4095), 0, 7), e = UUID.getIntegerBits(UUID.rand(8191),
                0, 7) + UUID.getIntegerBits(UUID.rand(8191), 8, 15) + UUID.getIntegerBits(UUID.rand(8191), 0, 7) + UUID.getIntegerBits(UUID.rand(8191), 8, 15) + UUID.getIntegerBits(UUID.rand(8191), 0, 15);
        return a + c + b + d + f + e
    }, UUID.getIntegerBits = function (a, b, c) {
        a = UUID.returnBase(a, 16);
        for (var d = [], f = "", e = 0, e = 0; e < a.length; e++)d.push(a.substring(e, e + 1));
        for (e = Math.floor(b / 4); e <= Math.floor(c / 4); e++)f = !d[e] || "" == d[e] ? f + "0" : f + d[e];
        return f
    }, UUID.returnBase = function (a, b) {
        return a.toString(b).toUpperCase()
    }, UUID.rand = function (a) {
        return Math.floor(Math.random() *
            (a + 1))
    })
};
Scdp.StrUtil.getUUID = function () {
    return (new UUID).createUUID().toLowerCase()
};
Scdp.StrUtil.getMd5 = function (a) {
    return CryptoJS.MD5(a).toString(CryptoJS.enc.Hex)
};
Scdp.StrUtil.getSha1 = function (a) {
    try {
        return asmCrypto.SHA1.hex(a)
    } catch (b) {
    }
    return CryptoJS.SHA1(a).toString(CryptoJS.enc.Hex)
};
Scdp.StrUtil.getHMACSHA1ByHex = function (a, b) {
    try {
        return asmCrypto.HMAC_SHA1.hex(asmCrypto.hex_to_bytes(a), asmCrypto.hex_to_bytes(b))
    } catch (c) {
    }
    return CryptoJS.HmacSHA1(CryptoJS.enc.Hex.parse(a), CryptoJS.enc.Hex.parse(b)).toString(CryptoJS.enc.Hex)
};
Scdp.StrUtil.getHMACSHA1 = function (a, b) {
    try {
        return asmCrypto.HMAC_SHA1.hex(a, b)
    } catch (c) {
    }
    return CryptoJS.HmacSHA1(a, b).toString(CryptoJS.enc.Hex)
};
Scdp.StrUtil.getHMACSHA256 = function (a, b) {
    try {
        return asmCrypto.HMAC_SHA256.hex(a, b)
    } catch (c) {
    }
    return CryptoJS.HmacSHA256(a, b).toString(CryptoJS.enc.Hex)
};
Scdp.StrUtil.ab2str = function (a) {
    return String.fromCharCode.apply(null, new Uint8Array(a))
};
Scdp.StrUtil.str2ab = function (a) {
    for (var b = new ArrayBuffer(2 * a.length), c = new Uint8Array(b), d = 0, f = a.length; d < f; d++)c[d] = a.charCodeAt(d);
    return b
};
Scdp.StrUtil.encodeab = function (a) {
    return btoa(String.fromCharCode.apply(null, a))
};
Scdp.StrUtil.decodeab = function (a) {
    return new Uint8Array(atob(a).split("").map(function (a) {
        return a.charCodeAt(0)
    }))
};
Scdp.StrUtil.cjkEncode = function (a) {
    if (null == a)return "";
    for (var b = "", c = 0; c < a.length; c++)var d = a.charCodeAt(c), b = 128 <= d || 91 == d || 93 == d ? b + ("[" + d.toString(16) + "]") : b + a.charAt(c);
    return b
};
Scdp.StrUtil.Base64 = {
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d", encode: function (a) {
        var b = "", c, d, f, e, g, h, i = 0;
        for (a = this._utf8_encode(a); i < a.length;)c = a.charCodeAt(i++), d = a.charCodeAt(i++), f = a.charCodeAt(i++), e = c >> 2, c = (c & 3) << 4 | d >> 4, g = (d & 15) << 2 | f >> 6, h = f & 63, isNaN(d) ? g = h = 64 : isNaN(f) && (h = 64), b = b + this._keyStr.charAt(e) + this._keyStr.charAt(c) + this._keyStr.charAt(g) + this._keyStr.charAt(h);
        return b
    }, decode: function (a) {
        var b = "", c, d, f, e, g, h = 0;
        for (a = a.replace(/[^A-Za-z0-9\+\/\=]/g,
            ""); h < a.length;)c = this._keyStr.indexOf(a.charAt(h++)), d = this._keyStr.indexOf(a.charAt(h++)), e = this._keyStr.indexOf(a.charAt(h++)), g = this._keyStr.indexOf(a.charAt(h++)), c = c << 2 | d >> 4, d = (d & 15) << 4 | e >> 2, f = (e & 3) << 6 | g, b += String.fromCharCode(c), 64 != e && (b += String.fromCharCode(d)), 64 != g && (b += String.fromCharCode(f));
        return b = this._utf8_decode(b)
    }, _utf8_encode: function (a) {
        a = a.replace(/\r\n/g, "\n");
        for (var b = "", c = 0; c < a.length; c++) {
            var d = a.charCodeAt(c);
            128 > d ? b += String.fromCharCode(d) : (127 < d && 2048 > d ? b += String.fromCharCode(d >>
                6 | 192) : (b += String.fromCharCode(d >> 12 | 224), b += String.fromCharCode(d >> 6 & 63 | 128)), b += String.fromCharCode(d & 63 | 128))
        }
        return b
    }, _utf8_decode: function (a) {
        for (var b = "", c = 0, d = c1 = c2 = 0; c < a.length;)d = a.charCodeAt(c), 128 > d ? (b += String.fromCharCode(d), c++) : 191 < d && 224 > d ? (c2 = a.charCodeAt(c + 1), b += String.fromCharCode((d & 31) << 6 | c2 & 63), c += 2) : (c2 = a.charCodeAt(c + 1), c3 = a.charCodeAt(c + 2), b += String.fromCharCode((d & 15) << 12 | (c2 & 63) << 6 | c3 & 63), c += 3);
        return b
    }
};
Scdp.StrUtil.validateCron = function (a, b) {
    if (Scdp.ObjUtil.isEmpty(a))return Scdp.ObjUtil.isEmpty(b) ? !0 : b;
    var c = !1;
    Scdp.doAction("sys-schedule-validatecron", {cronExp: a}, function (a) {
        c = a.result || Scdp.I18N.ILLEGAL_CRON_EXP
    }, function () {
        c = !0
    }, !1, !1);
    return c
};
Scdp.StrUtil.validateJson = function (a, b) {
    if (Scdp.ObjUtil.isEmpty(a))return Scdp.ObjUtil.isEmpty(b) ? !0 : b;
    try {
        return JSON.parse(a), !0
    } catch (c) {
    }
    return Scdp.I18N.ILLEGAL_JSON
};
Scdp.DateUtil.newDate = function (a, b, c, d, f, e) {
    if (6 == arguments.length)return new Date(a, b - 1, c, d, f, e);
    if (3 == arguments.length)return new Date(a, b - 1, c);
    Scdp.DebugUtil.logErr("Invalid date parameters!")
};
Scdp.DateUtil.isLeapYear = function (a) {
    return 0 == a.getFullYear() % 4 && (0 != a.getFullYear() % 100 || 0 == a.getFullYear() % 400)
};
Scdp.DateUtil.parseDate = function (a) {
    return Scdp.ObjUtil.isNotEmpty(a) ? new Date(Date.parse(a.replace(/-/g, "/"))) : a
};
Scdp.DateUtil.parseDateToLocal = function (a) {
    if (Scdp.ObjUtil.isNotEmpty(a)) {
        var b = null;
        Ext.isDate(a) ? b = a : (b = Scdp.StrUtil.replaceFirst(a, "T", " "), b = Scdp.DateUtil.parseDate(b));
        a = b.getTime();
        b = 6E4 * b.getTimezoneOffset();
        return new Date(a - b)
    }
    return null
};
Scdp.DateUtil.formatDate = function (a, b) {
    Scdp.ObjUtil.isEmpty(b) && (b = Scdp.Const.SHORT_DATE_FORMAT);
    if (b == Scdp.Const.SHORT_DATE_FORMAT)return a.getFullYear() + "-" + Scdp.MathUtil.lpad0(a.getMonth() + 1, 2) + "-" + Scdp.MathUtil.lpad0(a.getDate(), 2);
    if (b == Scdp.Const.LONG_DATE_FORMAT)return a.getFullYear() + "-" + Scdp.MathUtil.lpad0(a.getMonth() + 1, 2) + "-" + Scdp.MathUtil.lpad0(a.getDate(), 2) + " " + a.getHours() + ":" + Scdp.MathUtil.lpad0(a.getMinutes(), 2) + ":" + Scdp.MathUtil.lpad0(a.getSeconds(), 2);
    if (b == Scdp.Const.BUSINESS_DATE_FORMAT)return a.getFullYear() +
        "-" + Scdp.MathUtil.lpad0(a.getMonth() + 1, 2) + "-" + Scdp.MathUtil.lpad0(a.getDate(), 2) + " " + a.getHours() + ":" + Scdp.MathUtil.lpad0(a.getMinutes(), 2)
};
Scdp.DateUtil.getHours = function (a) {
    return Math.floor(a / 36E5)
};
Scdp.DateUtil.getMinutes = function (a) {
    return Math.floor(a / 6E4)
};
Scdp.DateUtil.getSeconds = function (a) {
    return Math.floor(a / 1E3)
};
Scdp.DateUtil.updateTz = function (a, b) {
    a.needTz = b;
    a.setText(Scdp.DateUtil.updateTzTitle(a.text, b))
};
Scdp.DateUtil.updateTzTitle = function (a, b) {
    a = Scdp.StrUtil.replaceAll(Scdp.StrUtil.replaceAll(a, Scdp.I18N.TZ_LOCAL, ""), Scdp.I18N.TZ_UTC, "");
    return a + (b ? Scdp.I18N.TZ_LOCAL : Scdp.I18N.TZ_UTC)
};
Scdp.DateUtil.dateDiff = function (a, b) {
    if (Scdp.ObjUtil.isEmpty(a) && Scdp.ObjUtil.isEmpty(b))return 0;
    if (Scdp.ObjUtil.isEmpty(a))return -1;
    if (Scdp.ObjUtil.isEmpty(b))return 1;
    var c = (new Date(a)).getTime(), d = (new Date(b)).getTime();
    return c < d ? -1 : c > d ? 1 : 0
};
Scdp.MathUtil.lpad0 = function (a, b) {
    for (var c = a.toString(), d = c.length, f = 0; f < b - d; f++)c = "0" + c;
    return c
};
Scdp.MathUtil.randomInt = function (a, b) {
    return Ext.Number.randomInt(a, b)
};
Scdp.MathUtil.getScale = function (a, b) {
    return Number(a).toFixed(b)
};
Scdp.MathUtil.getExponential = function (a, b) {
    return Number(a).toExponential(b)
};
Scdp.ArrayUtil.findRecord = function (a, b, c) {
    if (!Scdp.ObjUtil.isEmpty(a))for (var d = 0; d < a.length; d++) {
        var f = a[d];
        if (f[b] == c)return f
    }
    return []
};
Scdp.ObjUtil.isEmpty = function (a) {
    return Ext.isEmpty(a) || Ext.isObject(a) && Ext.Object.isEmpty(a)
};
Scdp.ObjUtil.isNotEmpty = function (a) {
    return !Scdp.ObjUtil.isEmpty(a)
};
Scdp.ObjUtil.isObject = function (a) {
    return Ext.isObject(a)
};
Scdp.ObjUtil.set = function (a, b, c) {
    a[b] = c
};
Scdp.ObjUtil.get = function (a, b) {
    return a[b]
};
Scdp.ObjUtil.remove = function (a, b) {
    delete a[b]
};
Scdp.ObjUtil.getKeys = function (a) {
    return Object.keys(a)
};
Scdp.ObjUtil.compactObject = function (a, b, c) {
    var d = !0 === c ? a : Ext.clone(a);
    Ext.Object.each(d, function (a, c) {
        Scdp.ObjUtil.isEmpty(c) ? delete d[a] : c instanceof Array && !0 === b ? Ext.Array.each(c, function (a) {
            Scdp.ObjUtil.compactObject(a, !0, !0)
        }) : c instanceof Object && !0 === b && Scdp.ObjUtil.compactObject(c, !0, !0)
    });
    return d
};
Scdp.CookieUtil.setCookie = function (a, b, c, d) {
    Scdp.ObjUtil.isEmpty(c) && (c = 0);
    d = Scdp.ObjUtil.isNotEmpty(d) ? ";path\x3d" + d : "";
    a = a + "\x3d" + encodeURIComponent(b);
    Scdp.ObjUtil.isNotEmpty(c) && (b = new Date, 0 !== c && (0 < c ? b.setTime(b.getTime() + 36E5 * c) : b.setTime(b.getTime() + 31536E6), a = a + ";expires\x3d" + b.toGMTString() + d));
    document.cookie = a
};
Scdp.CookieUtil.getCookie = function (a) {
    for (var b = document.cookie.split("; "), c = 0; c < b.length; c++) {
        var d = b[c].split("\x3d");
        if (d[0] == a)return decodeURIComponent(Scdp.StrUtil.replaceNull(d[1]))
    }
    return ""
};
Scdp.CookieUtil.removeCookie = function (a) {
    var b = new Date;
    b.setTime(b.getTime() - 86400);
    document.cookie = a + "\x3d;expires\x3d" + b.toGMTString()
};
Scdp.CacheUtil.getTempCachePrefix = function (a) {
    return window.SYSCONFIG_PRODUCT_CODE + "-TEMP-" + a.toUpperCase() + "-"
};
Scdp.CacheUtil.refactCacheKey = function (a, b, c) {
    a = b ? Scdp.getCurrentUserId() + "-" + a : "-" + a;
    return a = c ? Scdp.getSysConfig("locale_id") + "-" + a : "-" + a
};
Scdp.CacheUtil.set = function (a, b) {
    Scdp.CacheUtil.isSessionScope(a) ? window.SESSION_CACHE.set(a, b) : window.PERSISTENCE_CACHE.set(a, b)
};
Scdp.CacheUtil.get = function (a) {
    return Scdp.CacheUtil.isSessionScope(a) ? window.SESSION_CACHE.get(a) : window.PERSISTENCE_CACHE.get(a)
};
Scdp.CacheUtil.remove = function (a) {
    Scdp.CacheUtil.isSessionScope(a) ? window.SESSION_CACHE.clear(a) : window.PERSISTENCE_CACHE.clear(a)
};
Scdp.CacheUtil.getKeys = function () {
    return Scdp.ObjUtil.getKeys(window.PERSISTENCE_CACHE.store._store)
};
Scdp.CacheUtil.isSessionScope = function (a) {
    return a === Scdp.Const.USER_TOKEN || Ext.Array.contains(Scdp.Const.USER_INFO_KEYS, a)
};
Scdp.CacheUtil.removeAll = function () {
    var a = window.PERSISTENCE_CACHE.prefix, b = Scdp.CacheUtil.getKeys();
    Ext.each(b, function (b) {
        window.PERSISTENCE_CACHE.clear(Scdp.StrUtil.replaceFirst(b, a, ""))
    })
};
Scdp.CacheUtil.setTemp = function (a, b, c, d, f) {
    a == Scdp.Const.CACHE_TYPE_SYS_MENU ? window.SESSION_CACHE.set(Scdp.Const.CACHE_TYPE_SYS_MENU, c) : Scdp.CacheUtil.getTempCache(a).set(Scdp.CacheUtil.refactCacheKey(b, d, f), c)
};
Scdp.CacheUtil.getTemp = function (a, b, c, d) {
    return a == Scdp.Const.CACHE_TYPE_SYS_MENU ? window.SESSION_CACHE.get(Scdp.Const.CACHE_TYPE_SYS_MENU) : Scdp.CacheUtil.getTempCache(a).get(Scdp.CacheUtil.refactCacheKey(b, c, d))
};
Scdp.CacheUtil.removeTemp = function (a, b, c, d) {
    a == Scdp.Const.CACHE_TYPE_SYS_MENU ? window.SESSION_CACHE.clear(Scdp.Const.CACHE_TYPE_SYS_MENU) : Scdp.CacheUtil.getTempCache(a).clear(Scdp.CacheUtil.refactCacheKey(b, c, d))
};
Scdp.CacheUtil.getKeysTemp = function (a) {
    return Scdp.ObjUtil.getKeys(Scdp.CacheUtil.getTempCache(a).store._store)
};
Scdp.CacheUtil.removeAllTempByType = function (a) {
    if (a == Scdp.Const.CACHE_TYPE_SYS_MENU)window.sessionStorage.removeItem(Scdp.Const.CACHE_TYPE_SYS_MENU); else {
        var b = Scdp.CacheUtil.getTempCachePrefix(a), c = Scdp.CacheUtil.getKeysTemp(a);
        Ext.each(c, function (c) {
            Scdp.CacheUtil.getTempCache(a).clear(Scdp.StrUtil.replaceFirst(c, b, ""))
        })
    }
};
Scdp.CacheUtil.removeAllTemp = function () {
    Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_INFO_LAYOUT);
    Scdp.CacheUtil.remove(Scdp.Const.CACHE_TYPE_SYS_MENU);
    Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_CRUD_TREE_ACTION)
};
Scdp.CacheUtil.getTempCache = function (a) {
    Scdp.ObjUtil.isEmpty(window.TEMP_CACHE[a.toUpperCase()]) && (window.TEMP_CACHE[a.toUpperCase()] = Ext.create("Ext.state.LocalStorageProvider", {prefix: Scdp.CacheUtil.getTempCachePrefix(a)}));
    return window.TEMP_CACHE[a.toUpperCase()]
};
Scdp.CacheUtil.setPage = function (a, b, c) {
    window.PAGE_CACHE.add(Scdp.CacheUtil.getTempCachePrefix(a) + "_" + b, c)
};
Scdp.CacheUtil.getPage = function (a, b) {
    return window.PAGE_CACHE.get(Scdp.CacheUtil.getTempCachePrefix(a) + "_" + b)
};
Scdp.CacheUtil.pageContainsKey = function (a, b) {
    return window.PAGE_CACHE.containsKey(Scdp.CacheUtil.getTempCachePrefix(a) + "_" + b)
};
Scdp.CommUtil.ajax = function (a) {
    var b = {}, c = a.successFn || function () {
        }, d = a.failureFn || function () {
        }, f = {actionName: a.action, postData: Ext.encode(a.postdata || {})}, e = a.mask;
    Scdp.ObjUtil.isEmpty(e) && (e = !0);
    var g = a.async;
    Scdp.ObjUtil.isEmpty(g) && (g = !0);
    !0 == e && Scdp.mask();
    Ext.Ajax.request({
        url: a.url,
        params: f,
        method: "POST",
        mask: e,
        async: g,
        disableCaching: window.disableCaching,
        success: function (a) {
            b = Ext.JSON.decode(a.responseText);
            Scdp.ObjUtil.isNotEmpty(b.message) && Scdp.MsgUtil.info(b.message);
            a = b.bizexception;
            var e = b.sysexception, f = b.errorcode;
            a ? (Scdp.MsgUtil.warn(Ext.String.htmlEncode(a).replace("\n", "\x3cbr/\x3e"), function () {
                "3" === f.substr(0, 1) && window.top.location.replace(Scdp.getSysConfig("base_path"))
            }), d(b)) : e ? (f = b.stack, Scdp.MsgUtil.error(e + "\x3cbr/\x3e\x3cbr/\x3e[Error Code:" + f + "]"), d(b)) : c(b);
            b.loginTimeout && (window.LOGIN_TIMEOUT = b.loginTimeout)
        },
        failure: function () {
            Scdp.MsgUtil.error(Scdp.I18N.CONNECT_ERROR);
            d()
        },
        callback: function () {
            !0 == e && Scdp.unmask()
        }
    });
    if (!1 == g)return b
};
Scdp.MsgUtil.info = function (a, b, c, d) {
    Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.MSGBOX_DEFAULT_WIDTH);
    Scdp.ObjUtil.isEmpty(d) && (d = Scdp.Const.MSGBOX_DEFAULT_HEIGHT);
    Ext.Msg.show({
        title: Scdp.I18N.SYSTEM_INFO,
        closable: !0,
        frame: !0,
        frameHeader: !0,
        msg: a,
        minWidth: c,
        minHeight: d,
        buttons: Ext.Msg.OK,
        icon: Ext.Msg.INFO,
        fn: b
    })
};
Scdp.MsgUtil.warn = function (a, b, c, d) {
    Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.MSGBOX_DEFAULT_WIDTH);
    Scdp.ObjUtil.isEmpty(d) && (d = Scdp.Const.MSGBOX_DEFAULT_HEIGHT);
    Ext.Msg.show({
        title: Scdp.I18N.SYSTEM_WARN,
        closable: !0,
        frame: !0,
        frameHeader: !0,
        msg: a,
        minWidth: c,
        minHeight: d,
        buttons: Ext.Msg.OK,
        icon: Ext.Msg.WARNING,
        fn: b
    })
};
Scdp.MsgUtil.error = function (a, b, c, d) {
    Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.MSGBOX_DEFAULT_WIDTH);
    Scdp.ObjUtil.isEmpty(d) && (d = Scdp.Const.MSGBOX_DEFAULT_HEIGHT);
    Ext.Msg.show({
        title: Scdp.I18N.SYSTEM_ERROR,
        closable: !0,
        frame: !0,
        frameHeader: !0,
        msg: a,
        minWidth: c,
        minHeight: d,
        buttons: Ext.Msg.OK,
        icon: Ext.Msg.ERROR,
        fn: b
    })
};
Scdp.MsgUtil.confirm = function (a, b, c, d, f, e) {
    var g = {};
    Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.MSGBOX_DEFAULT_WIDTH);
    Scdp.ObjUtil.isEmpty(d) && (d = Scdp.Const.MSGBOX_DEFAULT_HEIGHT);
    g = Scdp.ObjUtil.isNotEmpty(f) && Scdp.ObjUtil.isNotEmpty(e) ? {
        title: Scdp.I18N.SYSTEM_CONFIRM,
        closable: !1,
        icon: Ext.Msg.QUESTION,
        msg: a,
        buttons: Ext.Msg.YESNO,
        buttonText: {yes: f, no: e},
        minWidth: c,
        minHeight: d,
        callback: b
    } : {
        title: Scdp.I18N.SYSTEM_CONFIRM,
        closable: !1,
        icon: Ext.Msg.QUESTION,
        msg: a,
        buttons: Ext.Msg.YESNO,
        minWidth: c,
        minHeight: d,
        callback: b
    };
    Ext.Msg.confirm(g)
};
Scdp.MsgUtil.showYesNoCancel = function (a, b, c, d, f, e, g) {
    Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.MSGBOX_DEFAULT_WIDTH);
    Scdp.ObjUtil.isEmpty(d) && (d = Scdp.Const.MSGBOX_DEFAULT_HEIGHT);
    a = {
        title: Scdp.I18N.SYSTEM_CONFIRM,
        closable: !1,
        frame: !0,
        frameHeader: !0,
        msg: a,
        minWidth: c,
        minHeight: d,
        buttons: Ext.Msg.YESNOCANCEL,
        icon: Ext.Msg.QUESTION,
        fn: b
    };
    Scdp.ObjUtil.isNotEmpty(f) && (Scdp.ObjUtil.isNotEmpty(e) && Scdp.ObjUtil.isNotEmpty(g)) && (a.buttonText = {
        yes: f,
        no: e,
        cancel: g
    });
    Ext.Msg.show(a)
};
Scdp.MsgUtil.prompt = function (a, b, c, d, f, e) {
    Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.MSGBOX_DEFAULT_WIDTH);
    Scdp.ObjUtil.isEmpty(d) && (d = Scdp.Const.MSGBOX_DEFAULT_HEIGHT);
    Scdp.ObjUtil.isEmpty(f) && (f = "");
    Scdp.ObjUtil.isEmpty(e) && (e = !1);
    Ext.Msg.prompt({
        prompt: !0,
        closable: !1,
        title: Scdp.I18N.SYSTEM_PROMPT,
        msg: a,
        value: f,
        minWidth: c,
        minHeight: d,
        buttons: Ext.Msg.OKCANCEL,
        multiline: e,
        icon: Ext.window.MessageBox.INFO,
        callback: b
    })
};
Scdp.MsgUtil.process = function (a, b, c, d, f) {
    Scdp.ObjUtil.isEmpty(b) && (b = Scdp.Const.MSGBOX_DEFAULT_WIDTH);
    Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.MSGBOX_DEFAULT_HEIGHT);
    Scdp.ObjUtil.isEmpty(d) && (d = 1E3);
    Ext.MessageBox.show({
        title: Scdp.I18N.SYSTEM_PROCESS,
        closable: !1,
        msg: a,
        progressText: Scdp.I18N.MASK_WAITING,
        minWidth: b,
        minHeight: c,
        progress: !0
    });
    var e = {
        run: function () {
            var a = f();
            1 <= a ? (Ext.MessageBox.close(), Ext.TaskManager.stop(e)) : Ext.MessageBox.updateProgress(a, Math.round(100 * a) + "% completed")
        }, interval: d
    };
    Ext.TaskManager.start(e)
};
Scdp.MsgUtil.wait = function (a, b, c, d) {
    Scdp.ObjUtil.isEmpty(b);
    Scdp.ObjUtil.isEmpty(c);
    Scdp.ObjUtil.isEmpty(d) && (d = "download_icon");
    Ext.MessageBox.show({
        msg: a,
        title: Scdp.I18N.SYSTEM_PROCESS,
        closable: !1,
        progressText: Scdp.I18N.MASK_WAITING,
        width: 300,
        wait: !0,
        waitConfig: {interval: 200},
        icon: d,
        iconHeight: 50
    })
};
Scdp.MsgUtil.getHeaderDisplay = function () {
    return Ext.getCmp("headerToolbarCustomInfo")
};
Scdp.MsgUtil.setHeaderDisplayInfo = function (a) {
    Scdp.MsgUtil.getHeaderDisplay().setValue(a)
};
Scdp.DebugUtil.isProdMode = function () {
    return Scdp.getSysConfig("product_mode")
};
Scdp.DebugUtil.logInfo = function (a) {
    !Scdp.DebugUtil.isProdMode() && !document.all && (Scdp.ObjUtil.isObject(a) ? console.dir(a) : console.info(a))
};
Scdp.DebugUtil.logErr = function (a) {
    if (!Scdp.DebugUtil.isProdMode())throw document.all || console.error(a), a;
};
Scdp.DebugUtil.ping = function (a, b) {
    this.img = new Image;
    var c = new Date;
    this.img.onload = function () {
        d()
    };
    this.img.onerror = function () {
        d()
    };
    var d = function () {
        var a = new Date - c;
        "function" === typeof b && b(a)
    };
    this.img.src = a + "favicon.ico?" + (new Date).getTime()
};
Scdp.CryptUtil.getPassHash = function (a, b) {
    return Scdp.StrUtil.getSha1(Scdp.StrUtil.getSha1(a) + Scdp.StrUtil.replaceNull(b, Scdp.Const.ENCRYPT_SALT))
};
Scdp.CryptUtil.encryptPass = function (a, b) {
    if (Scdp.ObjUtil.isEmpty(a))"function" == typeof b && b(a); else {
        var c = Scdp.CryptUtil.getPassHash(a), d = Scdp.RSA.ServerKey;
        if (!window.SYSCONFIG_RSA_DISABLED && Scdp.ObjUtil.isNotEmpty(d) && d.isEncrypt)if (Date.now() - d.data.expire > 1E3 * Scdp.Const.RSA_EXPIRE_THRESHOLD)c = !1, "function" == typeof b && b(c); else {
            var f = [asmCrypto.hex_to_bytes(d.data.key), asmCrypto.hex_to_bytes(d.data.e)];
            Scdp.CryptUtil.encryptRSA(c, f, function (a) {
                c = d.id + ":" + a;
                "function" == typeof b && b(c)
            })
        } else"function" == typeof b && b(c)
    }
};
Scdp.CryptUtil.getServerPublicKey = function (a) {
    if (!window.SYSCONFIG_RSA_DISABLED) {
        var b = Scdp.RSA.ServerKey;
        !0 !== a && Scdp.ObjUtil.isNotEmpty(b) && Date.now() < b.data.expire - 1E3 * Scdp.Const.RSA_EXPIRE_THRESHOLD || Scdp.doAction("sys-encrypt-getkey", {}, function (a) {
            b = a;
            b.isEncrypt && (b.data = Ext.JSON.decode(window.atob(b.data)));
            Scdp.RSA.ServerKey = b
        }, function () {
        }, !1)
    }
};
Scdp.CryptUtil.getClientPublicKey = function () {
    var a = {kty: "", n: "", e: ""};
    Scdp.ObjUtil.isNotEmpty(Scdp.RSA.ClientKey) && (a.kty = "RSA", a.n = Scdp.StrUtil.encodeab(Scdp.RSA.ClientKey[0]), a.e = Scdp.StrUtil.encodeab(Scdp.RSA.ClientKey[1]));
    return JSON.stringify(a)
};
Scdp.CryptUtil.generateClientKeyPair = function (a, b) {
    if (!window.SYSCONFIG_RSA_DISABLED) {
        var c = Scdp.CacheUtil.get(Scdp.Const.LOGIN_RSA_STORE_KEY_CACHE);
        if (Scdp.ObjUtil.isEmpty(c) || !0 === b) {
            var d = function (a) {
                Scdp.RSA.ClientKey = a;
                Scdp.CacheUtil.set(Scdp.Const.LOGIN_RSA_STORE_KEY_CACHE, Scdp.CryptUtil.EncodeKey(Scdp.RSA.ClientKey))
            };
            if (window.msCrypto) {
                var f = function () {
                    console.log("Some problems encountered during RSA key pair generation.")
                }, e = function (a) {
                    return a.replace(/-/g, "+").replace(/_/g, "/")
                }, c = window.msCrypto.subtle.generateKey({
                    name: "RSA-OAEP",
                    modulusLength: window.SYSCONFIG_RSA_KEY_LEN, publicExponent: new Uint8Array([1, 0, 1])
                }, !0, ["encrypt", "decrypt"]);
                c.onerror = f;
                c.oncomplete = function (b) {
                    Scdp.DebugUtil.logInfo("RSA Key generate done.");
                    b = window.msCrypto.subtle.exportKey("jwk", b.target.result.privateKey);
                    b.onerror = f;
                    b.oncomplete = function (b) {
                        b = JSON.parse(Scdp.StrUtil.ab2str(b.target.result));
                        d([Scdp.StrUtil.decodeab(e(b.n)), Scdp.StrUtil.decodeab(e(b.e)), Scdp.StrUtil.decodeab(e(b.d)), Scdp.StrUtil.decodeab(e(b.p)), Scdp.StrUtil.decodeab(e(b.q)),
                            Scdp.StrUtil.decodeab(e(b.dp)), Scdp.StrUtil.decodeab(e(b.dq)), Scdp.StrUtil.decodeab(e(b.qi))]);
                        "function" == typeof a && a()
                    }
                };
                return
            }
            if ("undefined" !== typeof Worker) {
                var c = new Worker("framework/js/rsa_worker.js"), g = new Uint32Array(2048);
                c.onmessage = function (b) {
                    d(b.data);
                    "function" == typeof a && a()
                };
                asmCrypto.getRandomValues(g);
                c.postMessage({seed: g, keylen: window.SYSCONFIG_RSA_KEY_LEN});
                return
            }
            Scdp.DebugUtil.logInfo("Current browser did not support Worker nor Web Cryptography API!");
            c = new Date;
            d(asmCrypto.RSA.generateKey(window.SYSCONFIG_RSA_KEY_LEN,
                65537));
            Scdp.DebugUtil.logInfo("RSA KeyPair Generated. Time: " + (new Date - c))
        } else Scdp.RSA.ClientKey = Scdp.CryptUtil.DecodeKey(c)
    }
    "function" == typeof a && a()
};
Scdp.CryptUtil.encryptRSA = function (a, b, c) {
    a = asmCrypto.string_to_bytes(a);
    a = Scdp.StrUtil.encodeab(asmCrypto.RSA_OAEP_SHA256.encrypt(a, b));
    "function" == typeof c && c(a)
};
Scdp.CryptUtil.decryptRSA = function (a, b, c) {
    a = Scdp.StrUtil.ab2str(asmCrypto.RSA_OAEP_SHA256.decrypt(a, b));
    "function" == typeof c && c(a)
};
Scdp.CryptUtil.EncodeKey = function (a) {
    var b = "";
    a.forEach(function (a) {
        b += "," + Scdp.StrUtil.encodeab(a)
    });
    return b.substr(1)
};
Scdp.CryptUtil.DecodeKey = function (a) {
    var b = [];
    a.split(",").forEach(function (a) {
        b.push(Scdp.StrUtil.decodeab(a))
    });
    return b
};
Scdp.CryptUtil.getTOTP = function (a) {
    if (window.SYSCONFIG_OTP_DISABLED)return "-1";
    var b = function (a, b, c) {
        b + 1 >= a.length && (a = Array(b + 1 - a.length).join(c) + a);
        return a
    }, c = function (a) {
        for (var c = "", d = "", e = 0; e < a.length; e++)var f = "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(a.charAt(e).toUpperCase()), c = c + b(f.toString(2), 5, "0");
        for (e = 0; e + 4 <= c.length; e += 4)a = c.substr(e, 4), d += parseInt(a, 2).toString(16);
        return d
    };
    try {
        var d = Math.round((new Date).getTime() / 1E3), f = b((15.5 > Math.floor(d / 30) ? "0" : "") + Math.round(Math.floor(d /
                30)).toString(16), 16, "0"), e = Scdp.StrUtil.getHMACSHA1ByHex(f, c(a)), g, h = e.substring(e.length - 1);
        g = parseInt(h, 16);
        var i = e.substr(2 * g, 8), j = (parseInt(i, 16) & 2147483647) + "", j = j.substr(j.length - 6, 6)
    } catch (k) {
        throw k;
    }
    return j
};
Scdp.doAction = function (a, b, c, d, e, f, g) {
    c = c || function () {
        };
    d = d || function () {
        };
    b = b || {};
    "sys-user-login" !== a && (b.userId = Scdp.CacheUtil.get(Scdp.Const.USER_ID));
    b.userLocaleId = Scdp.getSysConfig("locale_id");
    b.timestamp = Date.now();
    b.network = window.NETWORK_DELAY;
    Scdp.ObjUtil.isEmpty(b.menuCode) && (b.menuCode = Scdp.getActiveModule() ? Scdp.getActiveModule().menuCode : null);
    b.signature = Scdp.getSign(a, b);
    if (Scdp.ObjUtil.isNotEmpty(g)) {
        b = Ext.encode(b);
        var i;
        g.submit({
            url: Scdp.Const.JSON_ACTION, method: "post", params: {
                actionName: a,
                postData: b
            }, waitMsg: Scdp.I18N.MASK_WAITING, success: function (a, b) {
                i = Ext.JSON.decode(b.response.responseText);
                c(i);
                i.loginTimeout && (window.LOGIN_TIMEOUT = i.loginTimeout)
            }, failure: function (a, b) {
                i = Ext.JSON.decode(b.response.responseText);
                Scdp.ObjUtil.isNotEmpty(i.message) && Scdp.MsgUtil.info(i.message);
                var c = i.bizexception, e = i.sysexception;
                c ? Scdp.MsgUtil.warn(Ext.String.htmlEncode(c).replace("\n", "\x3cbr/\x3e")) : e && Scdp.MsgUtil.error(e + "\x3cbr/\x3e\x3cbr/\x3e[Error Code:" + i.stack + "]");
                d(i);
                i.loginTimeout &&
                (window.LOGIN_TIMEOUT = i.loginTimeout)
            }
        })
    } else return Scdp.CommUtil.ajax({
        url: Scdp.Const.JSON_ACTION,
        action: a,
        postdata: b,
        mask: e,
        async: f,
        successFn: c,
        failureFn: d
    })
};
Scdp.getSign = function (a, b) {
    var c = a + "\n", d = Scdp.CacheUtil.get(Scdp.Const.USER_TOKEN), c = c + Ext.encode(b), d = Scdp.ObjUtil.isEmpty(d) ? "SCDP" : d;
    return Scdp.StrUtil.getHMACSHA256(c, d)
};
Scdp.doPost = function (a, b) {
    b = b || {};
    var c = Date.now();
    b.userId = Scdp.CacheUtil.get(Scdp.Const.USER_ID);
    b.userLocaleId = Scdp.getSysConfig("locale_id");
    b.timestamp = c;
    b.network = window.NETWORK_DELAY;
    b.signature = Scdp.getSign(a, b);
    var c = Ext.encode(b), d = Ext.get("mockPostForm").dom, e = Ext.get("actionName").dom, f = Ext.get("postData").dom;
    e.value = a;
    f.value = c;
    d.action = Scdp.Const.JSON_ACTION;
    d.submit()
};
Scdp.getSysConfig = function (a) {
    return window[("SYSCONFIG_" + a).toUpperCase()]
};
Scdp.initComboStoreList = function (a) {
    var b = {};
    b.combo_item_list = a;
    Scdp.doAction("common-combostorelist-load", b, function (a) {
        if (a || a.success)a = a.root, Scdp.ObjUtil.isNotEmpty(a) && Ext.each(a, function (a) {
            Scdp.CacheUtil.setPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, a.cacheKey, a.cacheObj)
        })
    }, null, !0, !1)
};
Scdp.initComboStores = function (a, b) {
    var c = [];
    Ext.each(a, function (a) {
        var e = a.codeType, f = a.filterMap, g = {};
        g.comboType = a.comboType;
        g.codeType = e;
        g.filterMap = f;
        a = Scdp.StrUtil.getMd5(Ext.encode(g));
        g.menuCode = b;
        e = Scdp.StrUtil.getMd5(Ext.encode(g));
        Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, a);
        Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, e);
        !Scdp.CacheUtil.pageContainsKey(Scdp.Const.CACHE_TYPE_COMBO_STORE, e) && !Scdp.CacheUtil.pageContainsKey(Scdp.Const.CACHE_TYPE_COMBO_STORE, a) &&
        (f = {}, f.cacheKey = a, f.cacheObj = g, f.cacheKeyWithMenuCode = e, c.push(f), Scdp.DebugUtil.logInfo("Combo Type:" + g.comboType + " Code Type:" + g.comboType + " Filter:" + Ext.encode(g.filterMap) + " Load Data from Server!"))
    });
    Scdp.ObjUtil.isNotEmpty(c) && Scdp.initComboStoreList(c)
};
Scdp.getStoreData = function (a) {
    a = a.getRange(0, a.getCount() - 1);
    var b = [];
    Ext.Array.each(a, function (a) {
        b.push(a.data)
    });
    return b
};
Scdp.getComboStoreDate = function (a, b, c, d) {
    var e = {};
    e.comboType = Scdp.StrUtil.replaceNull(a);
    e.codeType = Scdp.StrUtil.replaceNull(b);
    e.filterMap = d || {};
    a = Scdp.StrUtil.getMd5(Ext.encode(e));
    e.menuCode = Scdp.StrUtil.replaceNull(c);
    b = Scdp.StrUtil.getMd5(Ext.encode(e));
    c = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, a);
    d = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, b);
    if (!Scdp.CacheUtil.pageContainsKey(Scdp.Const.CACHE_TYPE_COMBO_STORE, b) && !Scdp.CacheUtil.pageContainsKey(Scdp.Const.CACHE_TYPE_COMBO_STORE,
            a)) {
        e.cacheKey = a;
        e.cacheKeyWithMenuCode = b;
        a = Scdp.doAction("common-combostore-load", e, null, null, !1, !1);
        Scdp.DebugUtil.logInfo("Combo Type:" + e.comboType + " Code Type:" + e.comboType + " Filter:" + Ext.encode(e.filterMap) + " Load Data from Server!");
        if (!a && !a.success)return;
        c = a.root;
        Scdp.CacheUtil.setPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, a.cacheKey, c)
    } else if (Scdp.CacheUtil.pageContainsKey(Scdp.Const.CACHE_TYPE_COMBO_STORE, b))return d;
    return c
};
Scdp.getSysMenu = function (a, b) {
    b.items = [];
    Ext.each(a.children, function (a) {
        var d = {};
        d.text = a.text;
        d.iconCls = a.iconSmallPath;
        b.items.push(d);
        "MENU_DIR" === a.menuType && Scdp.getSysMenu(a, d.items)
    })
};
Scdp.getViewPort = function () {
    return Ext.getCmp("viewPort")
};
Scdp.getContentPanel = function () {
    return Ext.getCmp("contentPnl")
};
Scdp.getActiveModule = function () {
    var a = Scdp.getContentPanel();
    return Scdp.ObjUtil.isNotEmpty(a) ? a.getLayout().getActiveItem() : null
};
Scdp.getAllModules = function () {
    var a = Scdp.getContentPanel();
    return Scdp.ObjUtil.isNotEmpty(a) ? a.getLayout().getLayoutItems() : null
};
Scdp.removeMenuItem = function (a, b) {
    var c = a.items.items;
    Scdp.ObjUtil.isNotEmpty(c) && Ext.each(c, function (c) {
        if (c.menuCode === b)return a.remove(c), Scdp.removeModuleHistory(c.menuCode), !1
    })
};
Scdp.addModuleHistory = function (a) {
    var b = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_MODULE_VIEW_HISTORY, "MENU_CODE");
    Scdp.ObjUtil.isEmpty(b) && (b = [], Scdp.CacheUtil.setPage(Scdp.Const.CACHE_MODULE_VIEW_HISTORY, "MENU_CODE", b));
    Ext.Array.contains(b, a) && Ext.Array.remove(b, a);
    b.push(a);
    Scdp.ObjUtil.isEmpty(b) || 2 > b.length ? Ext.getCmp("goBackPreviousModuleBtn").setDisabled(!0) : Ext.getCmp("goBackPreviousModuleBtn").setDisabled(!1)
};
Scdp.removeModuleHistory = function (a) {
    var b = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_MODULE_VIEW_HISTORY, "MENU_CODE");
    Scdp.ObjUtil.isNotEmpty(b) && Ext.Array.contains(b, a) && Ext.Array.remove(b, a);
    Scdp.ObjUtil.isEmpty(b) || 2 > b.length ? Ext.getCmp("goBackPreviousModuleBtn").setDisabled(!0) : Ext.getCmp("goBackPreviousModuleBtn").setDisabled(!1)
};
Scdp.getPreviousMenuCode = function () {
    var a = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_MODULE_VIEW_HISTORY, "MENU_CODE");
    return Scdp.ObjUtil.isNotEmpty(a) && 1 < a.length ? a[a.length - 2] : null
};
Scdp.moveMenuItemToTop = function (a, b) {
    var c = a.items.items;
    Scdp.ObjUtil.isNotEmpty(c) && Ext.each(c, function (c) {
        if (c.menuCode === b)return a.move(c, 0), Scdp.addModuleHistory(b), !1
    })
};
Scdp.goBackPreviousModule = function () {
    var a = Ext.getCmp("curModuleName"), b = a.menu, c = Scdp.getActiveModule(), d = Scdp.getPreviousMenuCode();
    if (!Scdp.ObjUtil.isEmpty(c) && !Scdp.ObjUtil.isEmpty(d)) {
        Scdp.removeModuleHistory(c.menuCode);
        var e = Scdp.getContentPanel();
        Ext.Array.each(Scdp.getAllModules(), function (c) {
            if (c.menuCode === d) {
                var g = Scdp.tickMenuItem(b, d);
                a.setText("\x3cspan style\x3d'font-weight: bold'\x3e\x26lt;" + g + "\x26gt;\x3c/span\x3e");
                e.getLayout().setActiveItem(c);
                d == Scdp.Const.MAINPAGE_MENU_CODE &&
                c.controller && c.controller.queryDashboar && c.controller.queryDashboar();
                return !1
            }
        })
    }
};
Scdp.tickMenuItem = function (a, b) {
    var c = a.items.items, d = "";
    Scdp.ObjUtil.isNotEmpty(c) && Ext.each(c, function (a) {
        var c = a.menuCode;
        Scdp.ObjUtil.isNotEmpty(c) && (c === b ? (a.setIconCls("next_icon_16"), d = a.text) : a.setIconCls("null_img_btn"))
    });
    return d
};
Scdp.checkMaxOpenModules = function (a) {
    a = a.items.items;
    return Scdp.ObjUtil.isNotEmpty(a) && a.length > Scdp.Const.MAX_ALLOWED_OPEN_MODULES + 3 ? (Scdp.MsgUtil.info(Scdp.StrUtil.replaceFirst(Scdp.I18N.MAX_ALLOWED_OPEN_MODULES, "${windows}", Scdp.Const.MAX_ALLOWED_OPEN_MODULES)), !1) : !0
};
Scdp.isClosableModule = function (a) {
    return Scdp.Const.MAINPAGE_MENU_CODE != a.menuCode && (Scdp.ObjUtil.isEmpty(a.controller) || Scdp.ObjUtil.isEmpty(a.controller.view) || !1 !== a.controller.view.viewClosable)
};
Scdp.closeActiveModule = function () {
    var a = Ext.getCmp("curModuleName"), b = a.menu, c = Scdp.getActiveModule();
    if (Scdp.ObjUtil.isNotEmpty(c) && Scdp.isClosableModule(c)) {
        var d = null;
        Ext.Array.each(a.menu.items.items, function (a) {
            if (c.menuCode === a.menuCode)return d = a, !1
        });
        if (Scdp.ObjUtil.isNotEmpty(d)) {
            var e = null, f = d.nextSibling(), g = d.previousSibling();
            Scdp.ObjUtil.isNotEmpty(f) && Scdp.ObjUtil.isNotEmpty(f.menuCode) ? e = f.menuCode : Scdp.ObjUtil.isNotEmpty(g) && Scdp.ObjUtil.isNotEmpty(g.menuCode) && (e = g.menuCode);
            if (Scdp.ObjUtil.isNotEmpty(e)) {
                var i =
                    Scdp.getContentPanel();
                Ext.Array.each(Scdp.getAllModules(), function (c) {
                    if (c.menuCode === e) {
                        var d = Scdp.tickMenuItem(b, e);
                        a.setText("\x3cspan style\x3d'font-weight: bold'\x3e\x26lt;" + d + "\x26gt;\x3c/span\x3e");
                        i.getLayout().setActiveItem(c);
                        e == Scdp.Const.MAINPAGE_MENU_CODE && c.controller && c.controller.queryDashboar && c.controller.queryDashboar();
                        return !1
                    }
                })
            } else a.setText("");
            Scdp.removeMenuItem(b, c.menuCode);
            c.close()
        }
    }
};
Scdp.setActiveModule = function () {
    if (Scdp.getSysConfig("tree_menu")) {
        var a = Scdp.getContentPanel(), b = a.getLayout().getLayoutItems();
        Ext.each(b, function (b) {
            b = b.menuCode;
            if (Scdp.Const.MAINPAGE_MENU_CODE === b && (b = a.getCmp(b), Scdp.ObjUtil.isNotEmpty(b))) {
                var d = b.controller;
                a.getLayout().setActiveItem(b);
                d.queryDashboar && d.queryDashboar(!0)
            }
        })
    } else b = Ext.getCmp("curModuleName").menu.items.items, Scdp.ObjUtil.isNotEmpty(b) && Ext.Array.forEach(b, function (a) {
        if (Scdp.Const.MAINPAGE_MENU_CODE == a.menuCode) {
            var b =
                a.menuAction, e = a.menuType;
            Scdp.ObjUtil.isNotEmpty(b) && Scdp.openNewModule(b.trim(), null, a, e)
        }
    })
};
Scdp.closeAllOtherModule = function () {
    var a = Ext.getCmp("curModuleName").menu, b = Scdp.getActiveModule();
    if (Scdp.ObjUtil.isNotEmpty(b)) {
        for (var c, d = b.prev(); Scdp.ObjUtil.isNotEmpty(d);)c = d, d = d.prev(), Scdp.isClosableModule(c) && (Scdp.removeMenuItem(a, c.menuCode), c.close());
        for (b = b.next(); Scdp.ObjUtil.isNotEmpty(b);)c = b, b = b.next(), Scdp.isClosableModule(c) && (Scdp.removeMenuItem(a, c.menuCode), c.close())
    }
};
Scdp.closeAllModule = function () {
    Scdp.closeAllOtherModule();
    Scdp.closeActiveModule()
};
Scdp.openNewModule = function (a, b, c, d, e) {
    var f = {};
    Scdp.ObjUtil.isEmpty(c) ? f = Ext.getCmp(a) : (f.menuCode = c.menuCode, f.menuAction = c.menuAction, f.text = c.text);
    Ext.getCmp("shortcutPanel");
    f = f || {};
    !Scdp.DebugUtil.isProdMode() && "MENU_ITEM_CTL" == d && Scdp.CacheUtil.set("CURRENT_MODULE_PARAMS", [a, b, f, d]);
    var g = Scdp.getContentPanel(), i = Ext.getCmp("curModuleName");
    c = g.getLayout().getLayoutItems();
    var j = !1, h = null;
    Scdp.ObjUtil.isEmpty(b) ? b = {} : Ext.isString(b) && (b = Ext.decode(b));
    Scdp.getSysConfig("tree_menu") ? Ext.each(c,
        function (a) {
            var c = a.menuCode;
            if (f.menuCode === c && (c = g.getCmp(c), Scdp.ObjUtil.isNotEmpty(c)))return j = !0, Scdp.ObjUtil.isNotEmpty(c.controller) && (h = c.controller, a.controller.actionParams = b, !0 === e && a.controller.afterInit(), f.menuCode == Scdp.Const.MAINPAGE_MENU_CODE && h.queryDashboar && h.queryDashboar()), g.getLayout().setActiveItem(c), !1
        }) : Ext.each(c, function (a) {
        if (f.menuCode === a.menuCode) {
            var c = Scdp.tickMenuItem(i.menu, f.menuCode);
            i.setText("\x3cspan style\x3d'font-weight: bold'\x3e\x26lt;" + c + "\x26gt;\x3c/span\x3e");
            j = !0;
            Scdp.ObjUtil.isNotEmpty(a.controller) && (h = a.controller, a.controller.actionParams = b, !0 === e && a.controller.afterInit(), f.menuCode == Scdp.Const.MAINPAGE_MENU_CODE && h.queryDashboar && h.queryDashboar());
            g.getLayout().setActiveItem(a);
            Scdp.moveMenuItemToTop(i.menu, a.menuCode);
            return !1
        }
    });
    if (!j) {
        if (!1 === Scdp.MainFrameEvents.fireEvent("beforeModuleOpen", a, b, f, d))return;
        if (Scdp.getSysConfig("tree_menu")) {
            if (c.length > Scdp.Const.MAX_ALLOWED_OPEN_MODULES) {
                Scdp.MsgUtil.info(Scdp.StrUtil.replaceFirst(Scdp.I18N.MAX_ALLOWED_OPEN_MODULES,
                    "${windows}", Scdp.Const.MAX_ALLOWED_OPEN_MODULES));
                return
            }
        } else if (!Scdp.checkMaxOpenModules(i.menu))return;
        if ("MENU_ITEM_URL" == d)h = Ext.create("Scdp.mvc.AbstractController"), h.actionParams = b, h.menuCode = f.menuCode, h.menuText = f.text, a = Ext.widget("IView", {
            fitToFrame: !0,
            html: '\x3ciframe src\x3d"' + a + '" frameborder\x3d"0" width\x3d"100%" height\x3d"100%"\x3e\x3c/iframe\x3e'
        }), h.view = a, h.view.menuCode = f.menuCode; else try {
            h = Ext.create(a);
            h.actionParams = b;
            h.menuCode = f.menuCode;
            h.menuText = f.text;
            var k = Scdp.loadWorkflowDefinitionKey(h.menuCode);
            h.init();
            k && (h.view.workFlowDefinitionKey = k, h.view.setUIStatus())
        } catch (p) {
            console.log("Error creating controller, name :" + a)
        }
        g.suspendLayout = !0;
        Scdp.getSysConfig("tree_menu") ? (a = g.add(h.view), h.view.setTitle(f.text), g.setActiveTab(a)) : g.getLayout().setActiveItem(h.view);
        h.view.cid = f.menuCode;
        h.view.menuText = f.text;
        g.suspendLayout = !1;
        g.doLayout();
        Scdp.getSysConfig("tree_menu") || (a = Ext.encode({}), a = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_TYPE_SYS_MENU, a, !0, !0), a = f.text || Scdp.getMenuTextByMenuCode(a.treeData,
                f.menuCode), i.menu.insert(0, {
            xtype: "JSysMenuItem",
            menuAction: f.menuAction,
            menuCode: f.menuCode,
            menuType: d,
            text: a
        }), i.setText("\x3cspan style\x3d'font-weight: bold'\x3e\x26lt;" + a + "\x26gt;\x3c/span\x3e"), Scdp.tickMenuItem(i.menu, f.menuCode), Scdp.addModuleHistory(f.menuCode));
        d = Scdp.CacheUtil.get(Scdp.Const.USER_PRIVILEGES);
        if (Scdp.ObjUtil.isNotEmpty(d) && (d = (d[h.view.menuCode] || {}).functionList, Scdp.ObjUtil.isNotEmpty(d)))for (a = 0; a < d.length; a++)if (k = d[a], !k.authorized && (k = h.view.getCmp(k.funcCid), Scdp.ObjUtil.isNotEmpty(k))) {
            c =
                k.previousSibling("[xtype\x3dtbseparator]") || k.previousSibling("[xtype\x3dJTbSeparator]");
            var n = k.nextSibling("[xtype\x3dtbseparator]") || k.nextSibling("[xtype\x3dJTbSeparator]");
            k.setVisible(!1);
            c && n && c.setVisible(!1)
        }
    }
    return h
};
Scdp.loadWorkflowDefinitionKey = function (a) {
    var b = {};
    b.menuCode = a;
    a = null;
    b = Scdp.doAction("workflow-def-key-query-action", b, null, null, !0, !1);
    b.lstWorkFlowDefinitionKey && (a = b.lstWorkFlowDefinitionKey[0]);
    return a
};
Scdp.openNewModuleByMenuCode = function (a, b, c, d) {
    if (Scdp.ObjUtil.isNotEmpty(a) && (a = Scdp.loadMenuInfo(a, null), Scdp.ObjUtil.isNotEmpty(a))) {
        var e = {};
        Scdp.ObjUtil.isNotEmpty(a.actionParams) && (e = Ext.isString(a.actionParams) ? Ext.decode(a.actionParams) : Ext.Object.clone(a.actionParams));
        Scdp.ObjUtil.isNotEmpty(b) && (e = Ext.isString(b) ? Ext.Object.merge(e, Ext.decode(b)) : Ext.Object.merge(e, b));
        Scdp.ObjUtil.isEmpty(c) && (c = a.menuType);
        Scdp.openNewModule(a.menuAction, e, a, c, d)
    }
};
Scdp.loadMenuInfo = function (a, b) {
    var c = null;
    if (!Scdp.DebugUtil.isProdMode() && ("sample02" == a || "sample02" == a.menuCode))return c = {
        xtype: "JSysMenuItem",
        text: "单表样例",
        menuType: "MENU_ITEM_CTL",
        menuCode: "sample02",
        menuAction: "SampleSingle.controller.SampleSingleCrudController"
    };
    if (Scdp.ObjUtil.isEmpty(b)) {
        var d = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_TYPE_SYS_MENU, "{}", !0, !0);
        Scdp.ObjUtil.isNotEmpty(d) && (d = d.treeData.menu, Scdp.ObjUtil.isNotEmpty(d) && Scdp.ObjUtil.isNotEmpty(d.items) && (b = d.items))
    }
    Scdp.ObjUtil.isNotEmpty(b) &&
    Ext.Array.forEach(b, function (b) {
        if (null != c)return !1;
        var d = b.menuType;
        "MENU_DIR" == d ? Scdp.ObjUtil.isNotEmpty(b.menu.items) && (c = Scdp.loadMenuInfo(a, b.menu.items)) : "MENU_ITEM_CTL" == d && a == b.menuCode && (c = b)
    });
    return c
};
Scdp.runWithMask = function (a, b) {
    Scdp.mask();
    (new Ext.util.DelayedTask(b)).delay(1)
};
Scdp.mask = function (a) {
    Scdp.switchMask(Scdp.I18N.MASK_WAITING, a)
};
Scdp.unmask = function (a) {
    Scdp.switchMask(!1, a)
};
Scdp.switchMask = function (a, b) {
    Scdp.ObjUtil.isNotEmpty(window.ACTIVE_WINDOW) && !window.ACTIVE_WINDOW.hidden ? window.ACTIVE_WINDOW.setLoading(a) : Scdp.ObjUtil.isNotEmpty(b) ? b.setLoading(Ext.isString(a) ? "" : a) : Scdp.getViewPort().setLoading(a)
};
Scdp.closeMsg = function () {
    Ext.Msg.close()
};
Scdp.getLayoutAspects = function (a, b, c) {
    var d = {}, e = Scdp.getContentPanel(), f = e.getWidth(), e = e.getHeight();
    Scdp.getSysConfig("tree_menu") && (e -= 33);
    Scdp.ObjUtil.isEmpty(a) ? f < Scdp.Const.CONTENT_PANEL_MIN_WIDTH && (f = Scdp.Const.CONTENT_PANEL_MIN_WIDTH, d.overflowX = "scroll", e -= 18) : (f = a, c || (d.overflowX = "scroll", e -= 18));
    Scdp.ObjUtil.isEmpty(b) ? e < Scdp.Const.CONTENT_PANEL_MIN_HEIGHT && (e = Scdp.Const.CONTENT_PANEL_MIN_HEIGHT) : (e = b, c || (d.overflowY = "scroll", f -= 18));
    d.cWidth = f;
    d.cHeight = e;
    return d
};
Scdp.calcAxisStart = function (a, b) {
    var c = 0;
    if (1 == b)c = 0; else for (var d = 0; d < b - 1; d++)c += a[d];
    return c
};
Scdp.calcAxisEnd = function (a, b) {
    for (var c = 0, d = 0; d < b; d++)c += a[d];
    return c
};
Scdp.calcComponentPrePercent = function (a, b) {
    for (var c = 0, d = 0; d < b - 1; d++)c += a[d];
    return c
};
Scdp.calcComponentPercent = function (a, b, c) {
    var d = 0;
    for (b -= 1; b < c; b++)d += a[b];
    return d
};
Scdp.buildInfoLayout = function (a, b, c, d) {
    c -= 4;
    d -= 1;
    var e = b.row.split(","), f = [], g = [], i = 0;
    Ext.Array.each(e, function (a) {
        if (0 <= a.indexOf("flex"))f.push(a); else {
            0 > a.indexOf("*") && (a += "*1");
            a = a.split("*");
            for (var b = 0; b < a[1]; b++)f.push(1 * a[0])
        }
    });
    Ext.Array.each(f, function (a) {
        Ext.isNumber(a) && (i += a)
    });
    Ext.Array.each(f, function (a) {
        Ext.isNumber(a) || (a = Scdp.StrUtil.replaceFirst(a, "flex", "") || "0", a = a.startsWith("*") ? (d - 4 - i) * parseFloat(Scdp.StrUtil.replaceFirst(a, "*")) : d - 4 - i + parseInt(a), 0 > a && (a = 300));
        g.push(a)
    });
    "scroll" == a.overflowY && (c -= 16);
    var e = b.col.split(","), j = [], h = [];
    Ext.Array.each(e, function (a) {
        0 > a.indexOf("*") && (a += "*1");
        a = a.split("*");
        for (var b = 0; b < a[1]; b++)j.push(c * a[0]), h.push(new Number(a[0]))
    });
    Ext.Array.each(b.children, function (b) {
        var c = b.xtype;
        Scdp.Const.COMPONENT_JHIDDEN == c && (b.pos = "A0:A0");
        var d = b.pos;
        0 > d.indexOf(":") && (d = d + ":" + d);
        var e = d.split(":")[0], f = d.split(":")[1], d = e.substring(0, 1).charCodeAt(0) - 64, i = e.substring(1), e = f.substring(0, 1).charCodeAt(0) - 64, l = f.substring(1), f = parseInt(Scdp.calcAxisStart(j,
            d)), i = parseInt(Scdp.calcAxisStart(g, i)), o = parseInt(Scdp.calcAxisEnd(j, e)), m = parseInt(Scdp.calcAxisEnd(g, l)), l = {};
        null != b.col && (null != b.row && Scdp.ObjUtil.isNotEmpty(b.children)) && (l = {
            layout: "absolute",
            items: []
        });
        l = Ext.apply(l, b);
        delete l.children;
        if ("JEGrid" == c || "JQGrid" == c)l = Ext.apply(l, {store: Ext.create(b.store, {})});
        var q = 0;
        b.wx && (q = parseInt(b.wx || 0) + 4);
        o = o - f - 2 + q;
        m = m - i - 2;
        d = Ext.apply(l, {
            xtype: c,
            prePercent: Scdp.calcComponentPrePercent(h, d),
            percent: Scdp.calcComponentPercent(h, d, e),
            x: f + 2 - parseInt(b.wx ||
                0),
            y: i + 2,
            width: o,
            height: m
        });
        b.width && (d = Ext.apply(l, {overflowX: "scroll", layout: "auto"}));
        b.height && (d = Ext.apply(l, {overflowY: "scroll", layout: "auto"}));
        null != b.col && (null != b.row && Scdp.ObjUtil.isNotEmpty(b.children)) && ("JPanel" == c && Scdp.ObjUtil.isNotEmpty(b.title) ? m -= 25 : "JFieldSet" == c && Scdp.ObjUtil.isNotEmpty(b.title) ? m -= 20 : "JForm" == c && Scdp.ObjUtil.isNotEmpty(b.title) ? m -= 25 : "JTab" == c && (m += 7, o += 3), d = Scdp.buildInfoLayout(d, b, b.width ? b.width : o, b.height ? b.height : m));
        a.items.push(d)
    });
    return a
};
Scdp.openNewPage = function (a, b, c) {
    return Scdp.ObjUtil.isNotEmpty(b) && Scdp.ObjUtil.isNotEmpty(c) ? window.open(a, "", "height\x3d" + c + ",width\x3d" + b + ",top\x3d0,left\x3d0, toolbar\x3dno, menubar\x3dno,titlebar\x3dno,scrollbars\x3dyes, resizable\x3dyes,location\x3dyes, status\x3dno,fullscreen\x3dno") : window.open(a, "")
};
Scdp.openNewWinByView0 = function (a) {
    Scdp.openNewWinByView(a, a.okFunction, a.iconCls, a.windowTitle, a.okBtnText, null, null, null, a.cancelFunc)
};
Scdp.openNewWinByView = function (a, b, c, d, e, f, g, i, j) {
    Scdp.ObjUtil.isEmpty(c) && (c = "temp_icon_16");
    Scdp.ObjUtil.isEmpty(e) && (e = Scdp.I18N.OK_BTN);
    var h = Ext.create("Ext.window.Window", {
        title: d,
        width: (a.aWidth || a.width || Scdp.Const.CONTENT_PANEL_MIN_WIDTH) + 12,
        height: (a.aHeight || a.height || 480) + 70,
        frame: !0,
        modal: !0,
        resizable: !1,
        closable: !0,
        closeAction: "destroy",
        draggable: !0,
        iconCls: c,
        layout: "fit",
        bodyPadding: 2,
        parentActiveWin: window.ACTIVE_WINDOW,
        items: [],
        dockedItems: [{
            xtype: "JToolBar",
            dock: "bottom",
            ui: "footer",
            border: 1,
            height: 32,
            items: [{xtype: "JDisplay", flex: 1}, {
                xtype: "JButton",
                cid: "okBtn",
                text: e,
                iconCls: "ok_btn",
                width: 120,
                listeners: {
                    click: function () {
                        var c = this.up("window");
                        Scdp.ObjUtil.isNotEmpty(b) && b(a) && (c.notNeedCancelFunc = !0, c.close())
                    }
                }
            }, {xtype: "JTbSeparator"}, {
                xtype: "JButton",
                cid: "cancelBtn",
                text: Scdp.I18N.CANCEL_BTN,
                iconCls: "cancel_btn",
                width: 120,
                listeners: {
                    click: function () {
                        this.up("window").close()
                    }
                }
            }]
        }],
        onEsc: function () {
            this.close()
        },
        listeners: {
            close: function () {
                j && !this.notNeedCancelFunc && j()
            },
            show: function () {
                this.notNeedCancelFunc = !1
            }, beforeclose: function () {
                window.ACTIVE_WINDOW = this.parentActiveWin;
                Scdp.unmask()
            }
        }
    });
    f && (c = a.down("JQGrid"), c.on("itemdblclick", function () {
        b(a) && (h.notNeedCancelFunc = !0, h.close())
    }), c.enterFn = function () {
        b(a) && (h.notNeedCancelFunc = !0, h.close())
    });
    h.suspendLayout = !0;
    h.add(a);
    h.suspendLayout = !1;
    h.doLayout();
    i || h.show(null, function () {
        g && g(a)
    });
    return window.ACTIVE_WINDOW = h
};
Scdp.popupActiveTabPanel = function (a) {
    var b = a.getActiveTab(), c = b.items && b.items.items ? b.items.items[0] : null;
    if (c && c.doLayout) {
        var d = {}, e = c.getHeight(), f = c.width, g = a.popupHeight;
        c.setHeight(g);
        var i = c.query("[popupHeight]");
        i && Ext.Array.each(i, function (a) {
            a.popupHeight && (d[a.id] = a.getHeight(), a.setHeight(a.popupHeight), a.doLayout())
        });
        c.doLayout();
        b = Ext.create("Ext.window.Window", {
            title: b.title,
            width: f + 15,
            height: g + 40,
            frame: !0,
            modal: !0,
            resizable: !1,
            closable: !0,
            closeAction: "destroy",
            draggable: !0,
            iconCls: "temp_icon_16",
            layout: "fit",
            bodyPadding: 2,
            parentActiveWin: window.ACTIVE_WINDOW,
            contentEl: c.id,
            onEsc: function () {
                this.close()
            },
            listeners: {
                close: function () {
                    c.setHeight(e);
                    for (var b in d)c.queryById(b).setHeight(d[b]);
                    a.updateLayout()
                }, beforeclose: function () {
                    window.ACTIVE_WINDOW = this.parentActiveWin;
                    Scdp.unmask()
                }
            }
        });
        b.show();
        return window.ACTIVE_WINDOW = b
    }
};
Scdp.openNewWinByController = function (a, b, c, d, e, f, g, i, j, h, k, p) {
    a.init(!0, !1, g, i, j);
    return Scdp.openNewWinByView(a.view, b, c, d, e, f, h, k, p)
};
Scdp.getMaxSnoInStore = function (a) {
    var b = 0;
    Scdp.ObjUtil.isEmpty(a) || 0 == a.getCount() ? b = 0 : (b = a.getAt(a.getCount() - 1).data.seqNo, Scdp.ObjUtil.isEmpty(b) && (b = 0));
    return b
};
Scdp.getMaxSnoInTreeNode = function (a) {
    var b = 0;
    Scdp.ObjUtil.isNotEmpty(a) && a.eachChild(function (a) {
        a = a.raw.seqNo;
        a > b && (b = a)
    });
    return b + 10
};
Scdp.sortBySno = function (a) {
    return this.sortBy(a, "seqNo")
};
Scdp.sortBy = function (a, b) {
    Scdp.ObjUtil.isEmpty(a) || 0 == a.getCount() || a.sort([{property: b, direction: "ASC"}])
};
Scdp.doCommonQuery = function (a, b, c, d, e, f, g, i, j, h, k, p) {
    var n = {
        modulePath: e,
        layoutFile: f,
        queryConditions: b,
        queryExtraParams: k,
        quickQueryValue: p,
        ignoreCase: c,
        menuCode: g,
        userId: Scdp.CacheUtil.get(Scdp.Const.USER_ID),
        timestamp: Date.now(),
        userLocaleId: Scdp.getSysConfig("locale_id"),
        network: window.NETWORK_DELAY
    };
    n.signature = Scdp.getSign(a, n);
    d.store.proxy.extraParams = {actionName: a, postData: Ext.encode(n)};
    d.store.on("beforeload", function () {
        j || Scdp.mask();
        var h = Scdp.CacheUtil.get(Scdp.Const.COMMON_QUERY_MULTI_SORT_CACHE);
        Scdp.ObjUtil.isEmpty(h) && (h = Scdp.Const.COMMON_QUERY_MULTISORT_DEFAULT);
        if (h) {
            d.preSort = d.preSort || [];
            var i = this.sorters.items[0], n = [];
            if (i) {
                var l = !0;
                Ext.each(d.preSort, function (a) {
                    a.property == i.property ? (l = !1, n.push(i)) : n.push(a)
                });
                l && n.push(i)
            }
            d.preSort = n
        } else d.preSort = [];
        h = {
            modulePath: e,
            layoutFile: f,
            queryConditions: b,
            queryExtraParams: k,
            quickQueryValue: p,
            preSortList: Ext.encode(d.preSort),
            ignoreCase: c,
            menuCode: g,
            userId: Scdp.CacheUtil.get(Scdp.Const.USER_ID),
            timestamp: Date.now(),
            userLocaleId: Scdp.getSysConfig("locale_id"),
            network: window.NETWORK_DELAY
        };
        h.signature = Scdp.getSign(a, h);
        this.proxy.extraParams = {actionName: a, postData: Ext.encode(h)}
    });
    d.store.on("load", function (a) {
        a = a.proxy.reader.jsonData;
        var b = a.bizexception, c = a.sysexception, d = a.errorcode;
        a.loginTimeout && (window.LOGIN_TIMEOUT = a.loginTimeout);
        Scdp.unmask();
        b ? (Scdp.MsgUtil.warn(Ext.String.htmlEncode(b), function () {
            "3" === d.substr(0, 1) && window.top.location.replace(Scdp.getSysConfig("base_path"))
        }), this.loadData([])) : c && (d = a.stack, Scdp.MsgUtil.error(c + "\x3cbr\x3e\x3cbr\x3e[Error Code:" +
            d + "]"), this.loadData([]));
        i && i(h)
    });
    j || Scdp.mask();
    d.store.loadPage(1)
};
Scdp.doCommonReport = function (a, b, c, d, e, f, g, i) {
    Scdp.doAction(a, {
            modulePath: c,
            layoutFile: d,
            queryConditions: b,
            preSortList: "",
            ignoreCase: !0,
            menuCode: e
        }, function (a) {
            var b = a.bizexception, c = a.sysexception, d = a.errorcode;
            a.loginTimeout && (window.LOGIN_TIMEOUT = a.loginTimeout);
            b ? Scdp.MsgUtil.warn(Ext.String.htmlEncode(b), function () {
                "3" === d.substr(0, 1) && window.top.location.replace(Scdp.getSysConfig("base_path"))
            }) : c && (d = a.stack, Scdp.MsgUtil.error(c + "\x3cbr\x3e\x3cbr\x3e[Error Code:" + d + "]"));
            f && f(i, a)
        }, function () {
        },
        !g, !1)
};
Scdp.saveData = function (a, b, c, d, e, f, g, i) {
    var j = {};
    j.viewdata = a;
    j.dtoClass = d;
    j.uistatus = c;
    j.modulePath = e;
    j.uniqueValidateFields = f;
    return Scdp.doAction(b, j, g, i)
};
Scdp.loadDataByUuid = function (a, b, c, d) {
    var e = {};
    e.uuid = a;
    e.dtoClass = c;
    return Scdp.doAction(b, e, d)
};
Scdp.deleteDataByUnids = function (a, b, c, d, e) {
    var f = {};
    f.uuids = a;
    f.dtoClass = c;
    f.isVoid = !!d;
    return Scdp.doAction(b, f, e)
};
Scdp.getCurrentUserId = function () {
    return Scdp.CacheUtil.get(Scdp.Const.USER_ID)
};
Scdp.getUserCountry = function () {
    return Scdp.CacheUtil.get(Scdp.Const.USER_COUNTRY_CODE)
};
Scdp.getUserCity = function () {
    return Scdp.CacheUtil.get(Scdp.Const.USER_CITY_CODE)
};
Scdp.getUserCurrency = function () {
    return Scdp.CacheUtil.get(Scdp.Const.USER_CURRENCY_CODE)
};
Scdp.getLayoutRet = function (a, b) {
    var c = {};
    c.modulePath = a.modulePath;
    c.layoutFile = a.layoutFile;
    c.queryLayoutFile = a.queryLayoutFile;
    c.editLayoutFile = a.editLayoutFile;
    c.extraLayoutFile = a.extraLayoutFile;
    c.langId = Scdp.getSysConfig("locale_id");
    c.menuCode = a.menuCode;
    var d = Ext.encode(c), e = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT, d, !1, !0);
    Scdp.DebugUtil.isProdMode() || (e = null);
    if (Scdp.ObjUtil.isEmpty(e)) {
        e = Scdp.doAction(b, c, null, null, !0, !1);
        if (!e.success)return null;
        Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT,
            d, e, !1, !0)
    }
    Scdp.initComboStores(e.comboStores, a.menuCode);
    return e
};
Scdp.isColumnChanged = function (a, b) {
    var c = !1, d = [], e = [];
    Ext.each(a, function (a) {
        d.push(a.dataIndex)
    });
    Ext.each(b, function (a) {
        e.push(a.dataIndex)
    });
    return c = d.length != e.length ? !0 : !Ext.Array.equals(Ext.Array.sort(d), Ext.Array.sort(e))
};
Scdp.removeNoneAttributesFromTreeNode = function (a) {
    var b = {};
    Ext.apply(b, a);
    Scdp.ObjUtil.remove(b, "id");
    Scdp.ObjUtil.remove(b, "allowDrag");
    Scdp.ObjUtil.remove(b, "loginTimeout");
    Scdp.ObjUtil.remove(b, "success");
    Scdp.ObjUtil.remove(b, "leaf");
    Scdp.ObjUtil.remove(b, "text");
    return b
};
Scdp.getTreeRawData = function (a) {
    var b = {}, c = [];
    Scdp.ObjUtil.isNotEmpty(a) && (b = Ext.apply(b, a.raw));
    a.eachChild(function (a) {
        c.push(Scdp.getTreeRawData(a))
    });
    Scdp.ObjUtil.set(b, "children", c);
    return Scdp.removeNoneAttributesFromTreeNode(b)
};
Scdp.changeMenu2TreeMenu = function (a) {
    if (Scdp.ObjUtil.isNotEmpty(a.menu) && Scdp.ObjUtil.isNotEmpty(a.menu.items)) {
        for (var b = 0; b < a.menu.items.length; b++)Scdp.changeMenu2TreeMenu(a.menu.items[b]);
        a.children = a.menu.items;
        a.iconCls = a.imgCls || "menu_not_leaf_icon";
        a.leaf = !1
    } else a.iconCls = a.iconCls || a.imgCls || "menu_leaf_icon", a.leaf = !0
};
Scdp.getMenuTextByMenuCode = function (a, b) {
    if (Scdp.ObjUtil.isNotEmpty(a)) {
        if (a.menuCode == b)return a.text;
        for (; 0 < a.menu.items.length;)return Scdp.getMenuTextByMenuCode(a.menu.items[0], b)
    } else return ""
};
Scdp.findRowByUUID = function (a, b) {
    var c = {};
    if (Scdp.ObjUtil.isNotEmpty(a))for (var d = 0; d < a.length; d++) {
        var e = a[d];
        e.uuid == b && (c = e)
    }
    return c
};
Scdp.reloadQueryTemplate = function (a, b) {
    a.removeAll();
    if (Scdp.ObjUtil.isNotEmpty(b)) {
        for (var c = 0; c < b.length; c++) {
            var d = b[c], d = Ext.widget("JQueryTemplateItem", {text: d.templateName, content: d.templateContent});
            a.add(d)
        }
        a.expand()
    }
};
Scdp.loadQueryTemplate = function (a, b) {
    var c = {menuCode: b};
    Scdp.ObjUtil.isEmpty(a.items.items) && Scdp.doAction("sys-load-query-template", c, function (b) {
        Scdp.reloadQueryTemplate(a, b.userQueryTemplate)
    })
};
Scdp.validateEditor = function (a, b, c, d) {
    var e = !0;
    try {
        var f = a.getCell(d, c), g = f.dom.textContent;
        Ext.isIE8 && (g = f.dom.innerText);
        var i = Ext.isIE8 ? g.replace(/^\s+|\s+$/g, "") : g.trim();
        if (Scdp.ObjUtil.isEmpty(i))g = ""; else if ("JCur" == b.getXType() || "JDec" == b.getXType())g = g.replace(/,/g, "");
        var j = b.getErrors(g);
        b.isXType("JSearchField") && b.isNotExist && (Scdp.ObjUtil.isEmpty(j) && (j = []), j.push(Scdp.I18N.COMBOX_DATA_EXIST_VALIDATE), b.isNotExist = !1);
        0 < j.length ? (f.dom.style.background = "#FFAFAF", f.dom.setAttribute("data-errorqtip",
            j), e = !1) : (f.dom.style.background = "", f.dom.setAttribute("data-errorqtip", ""))
    } catch (h) {
    }
    return e
};
Scdp.getMergedData = function (a, b) {
    a instanceof Array || (a = []);
    b instanceof Array || (b = []);
    Ext.each(b, function (b) {
        var d = b.uuid;
        switch (b.editflag) {
            case "":
            case "+":
                a.push(b);
                break;
            case "*":
                var e = Ext.Array.findBy(a, function (a) {
                    return a.uuid == d
                });
                null !== e && (e = Ext.merge(e, b));
                break;
            case "-":
                b = Ext.Array.findBy(a, function (a) {
                    return a.uuid == d
                }), null !== b && Ext.Array.remove(a, b)
        }
    });
    return a
};
Scdp.wrapDataForRemoveSystemFields = function (a) {
    if (!Scdp.ObjUtil.isEmpty(a))if (a instanceof Array)Ext.each(a, function (a) {
        Scdp.wrapDataForRemoveSystemFields(a)
    }); else if (a instanceof Object)for (var b in a)a.hasOwnProperty(b) && ("createBy" == b || "createTime" == b || "updateBy" == b || "updateTime" == b || "isVoid" == b || "locTimezone" == b || "tblVersion" == b || "uuid" == b ? a[b] = null : "editflag" == b ? a[b] = "+" : (a[b]instanceof Array || a[b]instanceof Object) && Scdp.wrapDataForRemoveSystemFields(a[b]))
};
Scdp.wrapDataForChange = function (a) {
    if (!Scdp.ObjUtil.isEmpty(a))if (a instanceof Array)Ext.each(a, function (a) {
        Scdp.wrapDataForChange(a)
    }); else if (a instanceof Object)for (var b in a)a.hasOwnProperty(b) && (b.endsWith("_c") && Scdp.ObjUtil.isNotEmpty(a[b]) ? (Scdp.wrapDataForChange(a[b]), a[Scdp.StrUtil.replaceLast(b, "_c", "")] = Ext.clone(a[b]), delete a[b]) : (a[b]instanceof Array || a[b]instanceof Object) && Scdp.wrapDataForChange(a[b]))
};
Scdp.wrapDataForMerge = function (a) {
    if (!Scdp.ObjUtil.isEmpty(a))if (a instanceof Array)Ext.each(a, function (a) {
        Scdp.wrapDataForMerge(a)
    }); else if (a instanceof Object)for (var b in a)if (a.hasOwnProperty(b))if (b.endsWith("_c") && Scdp.ObjUtil.isNotEmpty(a[b])) {
        var c = Scdp.StrUtil.replaceLast(b, "_c", "");
        a[c] = Scdp.getMergedData(a[c], a[b]);
        Scdp.wrapDataForMerge(a[c]);
        delete a[b]
    } else(a[b]instanceof Array || a[b]instanceof Object) && Scdp.wrapDataForMerge(a[b])
};
Scdp.printReport = function (a, b, c, d, e) {
    var f = "", g = Scdp.getSysConfig("base_path") + Scdp.getSysConfig("report_servlet");
    if (!Scdp.ObjUtil.isEmpty(a) && !Scdp.ObjUtil.isEmpty(b) && Ext.isArray(b) && !(0 == b.size || g == Scdp.getSysConfig("base_path"))) {
        Ext.Array.forEach(b, function (b) {
            f += "{reportlet:'" + a + "', ";
            Ext.Object.each(b, function (a, b) {
                f += a + ":'" + encodeURIComponent(b) + "', "
            });
            f += Scdp.getSysConfig("REPORT_SYSUSER_PARAM") + ":'" + Scdp.CacheUtil.get(Scdp.Const.USER_ID) + "'";
            f += "}, "
        });
        f = Scdp.StrUtil.cjkEncode("[" + f.substr(0,
                f.length - 2) + "]");
        b = {url: g, isPopUp: c, data: {reportlets: Scdp.StrUtil.Base64.encode(f)}};
        Scdp.ObjUtil.isNotEmpty(e) && (b.printerName = e, d = "applet");
        e = Ext.get("mockReportForm").dom;
        var g = Ext.get("reportType").dom, i = Ext.get("reportConfig").dom, j = Ext.get("signature").dom, h = Ext.get("userId").dom;
        g.value = d;
        i.value = Ext.encode(b);
        j.value = Scdp.getSign(Scdp.Const.REPORT_PRINT_ACTION, b);
        h.value = Scdp.CacheUtil.get(Scdp.Const.USER_ID);
        e.target = Ext.isIE || c ? "_black" : "reportframe";
        e.action = "framework/jsp/report_print.jsp";
        e.submit();
        Scdp.doAction("sys-time-expend", {}, null, null, !1)
    }
};
Scdp.getFormSetupInfo = function (a) {
    Scdp.doAction("formsetup-get-formid", {key: a.formType + "@" + a.formCode + "@" + a.schemeCode}, function (b) {
        a.printer = b.root.printer;
        a.formDesc = b.root.formDesc;
        a.templatePath = b.root.templatePath;
        a.templatePathPreview = Scdp.StrUtil.replaceLast(a.templatePath, ".cpt", "Preview.cpt");
        Ext.Array.each(a.attach, function (a) {
            var d = Ext.Array.findBy(b.root.scdpFormSetupAttachDto, function (b) {
                return b.formCode === a.formCode
            });
            Scdp.ObjUtil.isNotEmpty(d) && (a.printer = d.printer, a.templatePath =
                d.templatePath, a.formDesc = d.formDesc)
        })
    }, function () {
    }, !1, !1)
};
Scdp.saveReportsParams = function (a) {
    var b = [];
    Scdp.doAction("common-report-savaparams", {reportParamList: a}, function (a) {
        b = a.root
    }, function () {
    }, !1, !1);
    return b
};
Scdp.getReportUrl = function (a, b) {
    var c = Scdp.getSysConfig("base_path") + Scdp.getSysConfig("report_servlet");
    if (c == Scdp.getSysConfig("base_path"))return "";
    c += "?reportlet\x3d" + a;
    Ext.Object.each(b, function (a, b) {
        a.startsWith("RP_") || (c += "\x26" + a + "\x3d" + b)
    });
    c += "\x26" + Scdp.getSysConfig("REPORT_SYSUSER_PARAM") + "\x3d" + Scdp.CacheUtil.get(Scdp.Const.USER_ID);
    return c += "\x26fr_locale\x3d" + Scdp.getSysConfig("LOCALE_ID")
};
Scdp.doPrintPreview = function (a, b, c, d) {
    Ext.create("Scdp.window.ReportPrintPreviewWindowSplit", {reports: a, width: b, height: c, winHandle: d}).show();
    Scdp.doAction("sys-time-expend", {}, null, null, !1)
};
Scdp.doSplitPrint = function (a, b, c) {
    var d = window.ACTIVE_WINDOW;
    if (!Scdp.ObjUtil.isEmpty(d) || !Scdp.ObjUtil.isEmpty(b)) {
        Scdp.ObjUtil.isEmpty(b) && (b = d.reports);
        Scdp.ObjUtil.isEmpty(c) && (c = 0);
        var e = {}, d = Ext.Array.findBy(b.records, function (b) {
            return b.queryKey == a
        });
        Scdp.ObjUtil.isNotEmpty(d) ? e = Scdp.filterReportData(d) : (e = {queryKey: a}, e[Scdp.getSysConfig("REPORT_SYSUSER_PARAM")] = Scdp.CacheUtil.get(Scdp.Const.USER_ID));
        Scdp.printReport(b.templatePath, [e], !1, b.printMethod, b.printer);
        Scdp.DebugUtil.logInfo("Print " +
            b.templatePath + " by using " + Scdp.StrUtil.replaceNull(b.printer, "default") + ", queryKey: " + a);
        var f = 1;
        Ext.Array.each(b.attach, function (a) {
            setTimeout(function () {
                Scdp.printReport(a.templatePath, [e], !1, b.printMethod, a.printer);
                Scdp.DebugUtil.logInfo("Print attachment " + a.templatePath + " by using " + Scdp.StrUtil.replaceNull(a.printer, "default"))
            }, Scdp.Const.REPORT_DEFAULT_PRINT_INTERVAL * (f + b.attach.length * c));
            f += 1
        })
    }
};
Scdp.checkSaved = function (a, b) {
    var c = a.up("IView");
    if (Scdp.ObjUtil.isNotEmpty(c)) {
        var d = c.getUIStatus();
        d === Scdp.Const.UI_INFO_STATUS_NEW || d === Scdp.Const.UI_INFO_STATUS_MODIFY ? Scdp.MsgUtil.confirm(Scdp.I18N.DATA_NOT_SAVED_OR_CONTINUE, function (d) {
            "yes" == d && c.controller.doSave(a, null, b)
        }) : b(c.controller, a)
    }
};
Scdp.filterReportData = function (a) {
    var b = {};
    Scdp.ObjUtil.isNotEmpty(a) && Ext.Object.each(a, function (a, d) {
        !a.startsWith("RP_") && "attachKey" !== a && (b[a] = d)
    });
    return b
};
Scdp.doEmailReport = function (a, b) {
    var c = window.ACTIVE_WINDOW;
    if (!Scdp.ObjUtil.isEmpty(c) || !Scdp.ObjUtil.isEmpty(b))Scdp.ObjUtil.isEmpty(b) && (b = c.reports), c = Ext.Array.findBy(b.records, function (b) {
        return b.queryKey == a
    }), Scdp.ObjUtil.isEmpty(c) || (Ext.Object.each(c, function (a) {
        a.startsWith("RP_")
    }), Ext.create("Scdp.window.ReportSendWindow", {
        postData: {
            templatePath: b.templatePath,
            formDesc: b.formDesc,
            formCode: b.formCode,
            attachKey: b.attachKey,
            attach: b.attach,
            emailForm: Ext.merge(c.RP_EmailForm, {
                format: b.emailDocType,
                attachNameMap: c.RP_TitleMap
            }),
            emailData: Scdp.filterReportData(c)
        }
    }).show())
};
Scdp.getEmailAttachmentName = function (a, b) {
    if ("function" === typeof b) {
        var c = [{formCode: a.formCode, formDesc: a.formDesc, isAttach: !1}];
        Ext.Array.each(a.attach, function (a) {
            c.push({formCode: a.formCode, formDesc: a.formDesc, isAttach: !0})
        });
        Ext.Array.each(a.records, function (a) {
            var e = Ext.clone(c);
            Ext.Array.each(e, function (c) {
                a.RP_TitleMap[c.formCode] = b(c.formCode, c.formDesc, a.RP_Record, c.isAttach)
            })
        })
    }
};
Scdp.resizeEditPanelHeight = function (a, b, c) {
    var d = b - c;
    window.isNaN(d) || (a = a.getCmp("editView"), a.setHeight(b), b = a.query("[autoExpand\x3dtrue]"), Scdp.ObjUtil.isNotEmpty(d) && (0 != d && Scdp.ObjUtil.isNotEmpty(b)) && Ext.Array.each(b, function (a) {
        a.setHeight(a.height + d)
    }))
};
Scdp.resizeEditPanelWidth = function (a, b, c) {
    a = a ? a.items ? a.items.items : null : null;
    Scdp.ObjUtil.isNotEmpty(a) && Ext.Array.each(a, function (a) {
        if (Scdp.ObjUtil.isNotEmpty(a.percent)) {
            var e = (b - c) * a.percent;
            "scroll" == a.overflowY ? (e = (b - 1) * a.percent, Scdp.resizeEditPanelWidth(a, e, c + 5)) : "JTab" == a.xtype ? Scdp.resizeEditPanelWidth(a, e, c - 2) : Scdp.resizeEditPanelWidth(a, e, c);
            Scdp.ObjUtil.isNotEmpty(a.prePercent) && 0 != a.prePercent && a.setLocalX(a.getLocalX() + (e - a.width) * (a.prePercent / a.percent));
            a.setWidth(e)
        }
    })
};
Scdp.resizeQueryPanelWidth = function (a, b, c) {
    Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), a = a.getCmp("queryView"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), a = a.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), a = a.query("[qxtype\x3dtrue]"), Scdp.ObjUtil.isNotEmpty(a) && Ext.Array.each(a, function (a) {
        var e = (b - c) * a.percent;
        switch (a.xtype) {
            case "JFromTo":
                e *= 1.006
        }
        Scdp.ObjUtil.isNotEmpty(a.prePercent) && 0 != a.prePercent && a.setLocalX(a.getLocalX() + (e - a.width) * (a.prePercent / a.percent));
        a.setWidth(e)
    }))))
};
Scdp.autoResizeView = function (a) {
    if (!Scdp.ObjUtil.isEmpty(a) && !window.isNaN(a.width - a.oldWidth)) {
        Ext.suspendLayouts();
        var b = a.width;
        b < Scdp.Const.CONTENT_PANEL_MIN_WIDTH && (b = Scdp.Const.CONTENT_PANEL_MIN_WIDTH);
        if (a instanceof Scdp.mvc.AbstractView) {
            var c = a.down("JPanel");
            Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), Scdp.resizeEditPanelWidth(c, b, 8))
        } else if (a instanceof Scdp.mvc.AbstractCrudView) {
            var d = a.getQueryPanel(), e = a.getEditPanel(), c = a.getExtraPanel();
            a instanceof Scdp.mvc.AbstractCrudView_1 ? (Scdp.ObjUtil.isNotEmpty(d) &&
            Scdp.resizeQueryPanelWidth(d, b, 46), Scdp.ObjUtil.isNotEmpty(e) && (e.setWidth(b), a = e.getCmp("editView"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), a = a.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), Scdp.resizeEditPanelWidth(a, b, 10)))), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), c = c.getCmp("extraView"), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), a = c.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), Scdp.resizeEditPanelWidth(a, b, 10))))) : a instanceof Scdp.mvc.AbstractCrudView_2 ? (Scdp.ObjUtil.isNotEmpty(d) &&
            Scdp.resizeQueryPanelWidth(d, b, 74), Scdp.ObjUtil.isNotEmpty(e) && (e.up("JTab").setWidth(b), b -= 23, e.setWidth(b), a = e.getCmp("editView"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), a = a.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), Scdp.resizeEditPanelWidth(a, b, 10)))), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), c = c.getCmp("extraView"), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), a = c.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), Scdp.resizeEditPanelWidth(a, b, 10))))) : a instanceof Scdp.mvc.AbstractCrudView_3 ?
                (Scdp.ObjUtil.isNotEmpty(d) && (b -= d.width), Scdp.ObjUtil.isNotEmpty(e) && (e.setWidth(b), a = e.getCmp("editView"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), a = a.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), Scdp.resizeEditPanelWidth(a, b, 8)))), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), c = c.getCmp("extraView"), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), a = c.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), Scdp.resizeEditPanelWidth(a, b, 8))))) : a instanceof Scdp.mvc.AbstractReportView && (Scdp.ObjUtil.isNotEmpty(d) &&
            Scdp.resizeQueryPanelWidth(d, b, 46), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), c = c.getCmp("extraView"), Scdp.ObjUtil.isNotEmpty(c) && (c.setWidth(b), a = c.down("JPanel"), Scdp.ObjUtil.isNotEmpty(a) && (a.setWidth(b), Scdp.resizeEditPanelWidth(a, b, 10)))))
        }
        Ext.resumeLayouts(!0)
    }
};
Scdp.getTreeNodeFullPath = function (a, b) {
    return Scdp.ObjUtil.isEmpty(a.parentNode) ? a.get("text") : Scdp.getTreeNodeFullPath(a.parentNode, b) + b + a.get("text")
};
Scdp.formatDashboardTask = function (a) {
    var b = "'" + a.businessKey + "'", c;
    c = '\x3cdiv class\x3d"workFlowTask"\x3e\x26nbsp;\x3cimg src\x3d"framework/images/icon/task_detail.png"/\x3e';
    c += "\x26nbsp;";
    c += a.title + "_";
    c += '\x3ca href\x3d"javascript:doProcessTask(' + b + ');" title\x3d"' + a.name + '" style\x3d"color: blue"\x3e' + a.name + "\x3c/a\x3e";
    return c += "\x3c/div\x3e"
};
Scdp.getDeviceType = function () {
    var a = navigator.userAgent.toLowerCase(), b = a.match(/android/);
    if ("android" == b)return b;
    b = a.match(/iphone/);
    if ("iphone" == b)return "ios";
    b = a.match(/ipad/);
    return "ipad" == b ? "ios" : "pc"
};
Scdp.initMenuForApp = function (a) {
    a.items && a.items.items && Ext.Array.each(a.items.items, function (a) {
        a.menu && (a.menu.items && 0 < a.menu.items.length) && (a.hideOnClick = !1, a.on("mouseenter", function () {
            a.menu.setVisible(!0)
        }), Scdp.initMenuForApp(a.menu))
    })
};
Scdp.getExportFileName = function (a, b) {
    var c = Scdp.StrUtil.replaceAll(b, "{module}", a), d = b.match(/\{D(.*)}/);
    null !== d && 2 == d.length && (c = Scdp.StrUtil.replaceAll(c, d[0], Ext.Date.format(new Date(Date.now()), d[1])));
    return c
};
Ext.define("Scdp.store.JComboStore", {
    extend: "Ext.data.Store",
    alias: ["widget.JComboStore"],
    autoLoad: !0,
    data: [],
    proxy: {type: "memory", reader: {type: "json"}},
    fields: "code codedesc field1 field2 field3 field4 field5 field6 field7 field8 field9 field10".split(" ")
});
Ext.define("Scdp.store.JBolComboStore", {
    extend: "Ext.data.Store",
    alias: ["widget.JBolComboStore"],
    storeId: "JBolComboStore",
    autoLoad: !0,
    data: [{code: 1, codedesc: Scdp.I18N.TRUE_TEXT}, {code: 0, codedesc: Scdp.I18N.FALSE_TEXT}],
    proxy: {type: "memory", reader: {type: "json"}},
    fields: ["code", "codedesc"]
});
Ext.define("Scdp.store.JPageSizeComboStore", {
    extend: "Ext.data.Store",
    alias: ["widget.JPageSizeComboStore"],
    storeId: "JPageSizeComboStore",
    autoLoad: !0,
    data: [{code: "10", codedesc: "10"}, {code: "20", codedesc: "20"}, {code: "50", codedesc: "50"}, {
        code: "100",
        codedesc: "100"
    }, {code: "200", codedesc: "200"}, {code: "500", codedesc: "500"}],
    proxy: {type: "memory", reader: {type: "json"}},
    fields: ["code", "codedesc"]
});
Ext.define("Scdp.model.JTreeNodeModel", {extend: "Ext.data.Model", fields: ["id", "text", "leaf", "expanded"]});
Ext.define("Scdp.store.JDataTypeComboStore", {
    extend: "Ext.data.Store",
    alias: ["widget.JDataTypeComboStore"],
    storeId: "JDataTypeComboStore",
    autoLoad: !0,
    data: [{code: "VARCHAR", codedesc: "VARCHAR"}, {code: "TEXT", codedesc: "TEXT"}, {
        code: "INT",
        codedesc: "INT"
    }, {code: "LONG", codedesc: "LONG"}, {code: "DECIMAL", codedesc: "DECIMAL"}, {
        code: "DATETIME",
        codedesc: "DATETIME"
    }, {code: "BLOB", codedesc: "BLOB"}, {code: "BOOLEAN", codedesc: "BOOLEAN"}],
    proxy: {type: "memory", reader: {type: "json"}},
    fields: ["code", "codedesc"]
});
Ext.define("Scdp.container.IContainer", {
    getCmps: function (a) {
        return Scdp.ObjUtil.isNotEmpty(a) ? this.query("[cid\x3d" + a + "]") : []
    }, getCmp: function (a, b) {
        if (Scdp.ObjUtil.isNotEmpty(a)) {
            for (var c = a.split("-\x3e"), d = this, e = 0; e < c.length; e++)d = b ? d.query("[bcid\x3d" + c[e] + "]") : d.query("[cid\x3d" + c[e] + "]")[0];
            return d
        }
        return {}
    }
});
Ext.define("Scdp.container.JPanel", {
    extend: "Ext.panel.Panel",
    mixins: ["Scdp.container.IContainer"],
    alias: ["widget.JPanel"],
    layout: "fit",
    overflowX: "hidden",
    overflowY: "hidden",
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    bodyPadding: "0 0 0 0",
    frame: !1,
    border: 0
});
Ext.define("Scdp.container.JFieldSet", {
    extend: "Ext.form.FieldSet",
    mixins: ["Scdp.container.IContainer"],
    alias: ["widget.JFieldSet"],
    layout: "fit",
    overflowX: "hidden",
    overflowY: "hidden",
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    bodyPadding: "0 0 0 0",
    frame: !1,
    labelWidth: Scdp.Const.FORM_FIELD_LABEL_DEFAULT_WIDTH,
    collapsible: !1,
    border: 0,
    initComponent: function () {
        this.defaults = {
            labelWidth: this.labelWidth,
            labelAlign: this.labelAlign ? this.labelAlign : Scdp.Const.FORM_FIELD_LABEL_ALIGN
        };
        this.callParent(arguments)
    }
});
Ext.define("Scdp.container.JForm", {
    extend: "Ext.form.Panel",
    mixins: ["Scdp.container.IContainer"],
    alias: ["widget.JForm"],
    layout: "auto",
    overflowX: "hidden",
    overflowY: "hidden",
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    bodyPadding: "0 0 0 0",
    frame: !1,
    collapsible: !1,
    bindValidateMode: "EACH",
    labelWidth: Scdp.Const.FORM_FIELD_LABEL_DEFAULT_WIDTH,
    border: 0,
    trackResetOnLoad: !0,
    isBind: !1,
    canEdit: !0,
    initComponent: function () {
        var a = this;
        a.defaults = {
            labelWidth: a.labelWidth,
            labelAlign: a.labelAlign ? a.labelAlign : Scdp.Const.FORM_FIELD_LABEL_ALIGN
        };
        a.callParent(arguments);
        if (a.isBind) {
            var b = function (b) {
                b instanceof Ext.form.field.ComboBox || b instanceof Ext.form.field.Date || b instanceof Ext.form.field.Time ? a.relayEvents(b, ["select"]) : b instanceof Ext.form.field.Checkbox || b instanceof Ext.form.CheckboxGroup || b instanceof Ext.form.RadioGroup ? a.relayEvents(b, ["change"]) : a.relayEvents(b, ["blur"]);
                b instanceof Ext.form.field.Date && b.setEditable(!1)
            };
            this.getForm().getFields().each(function (a) {
                b(a)
            });
            var c = a.getCmps(a.cid + ".sub");
            Ext.each(c, function (a) {
                a.getForm().getFields().each(function (a) {
                    b(a)
                })
            });
            a.on("change", function () {
                a.syncBindGrid();
                a.clearDirty()
            });
            a.on("blur", function () {
                a.syncBindGrid();
                a.clearDirty()
            });
            a.on("select", function () {
                a.syncBindGrid();
                a.clearDirty()
            })
        }
    },
    syncBindGrid: function () {
        var a = this, b = this.up("IView"), c = b.getCmp(Scdp.StrUtil.replaceLast(this.bcid, ".bind", ""));
        if (Scdp.ObjUtil.isNotEmpty(c)) {
            var d = c.getCurRecord();
            if (Scdp.ObjUtil.isNotEmpty(d) && (c = this.gotValue("ALL" !== a.bindValidateMode), Scdp.ObjUtil.isNotEmpty(d) && ("ALL" !== a.bindValidateMode || this.validate())))d.beginEdit(),
                Ext.Object.each(c, function (c, i) {
                    ("ALL" === a.bindValidateMode || !b.getCmp(c) || !b.getCmp(c).validate || b.getCmp(c).validate()) && d.set(c, i)
                }), d.endEdit()
        }
    },
    getFields: function () {
        return this.getForm().getFields()
    },
    gotValue: function (a, b) {
        var c = this, d = {};
        this.getForm().getFields().each(function (e) {
            var i = e.cid;
            if (Scdp.ObjUtil.isNotEmpty(i)) {
                var g = e.gotValue(), h = e.allowRemoveNull;
                if (!b || !h || !Scdp.ObjUtil.isEmpty(g))if ("uuid" == i)Scdp.ObjUtil.isNotEmpty(g) ? (d.editflag = "*", d[i] = g) : (d.editflag = "+", d[i] = Scdp.StrUtil.replaceNull(g));
                else if (!c.isBind && "tblVersion" == i)d[i] = Scdp.StrUtil.replaceNull(g); else if (!a || e.isDirty())d[i] = Scdp.StrUtil.replaceNull(g)
            }
        }, this);
        return d
    },
    sotValue: function (a, b, c) {
        a = a || {};
        this.getForm().getFields().each(function (d) {
            var e = d.cid;
            Scdp.ObjUtil.isNotEmpty(e) && (d.suspendEvent("change"), e = a[e], void 0 !== e ? (Ext.isString(e) && (Scdp.ObjUtil.isNotEmpty(e) && /\d{2}-\d{2}-\d{2}[T]\d{2}:\d{2}:\d{2}/g.test(e)) && (e = Scdp.DateUtil.parseDate(Scdp.StrUtil.replaceFirst(e, "T", " "))), d.sotValue(e, !0)) : c || d.sotValue(null,
                !0), b && d.resetOriginalValue(), d.gotRawValue && (d.oldValue = d.gotRawValue()), d.resumeEvent("change"))
        })
    },
    reset: function () {
        this.getForm().getFields().each(function (a) {
            Scdp.ObjUtil.isNotEmpty(a.cid) && (a.suspendEvent("change"), a.reset(), a.resumeEvent("change"))
        }, this)
    },
    isEditable: function () {
        return this.canEdit
    },
    sotEditable: function (a) {
        this.getForm().getFields().each(function (b) {
            Scdp.ObjUtil.isNotEmpty(b.cid) && (b.sotEditable && "function" == typeof b.sotEditable && b.sotEditable(a), b.belongFieldContainer && (b =
                b.up("fieldcontainer"), a ? b.removeCls("xx-form-readonly") : b.addCls("xx-form-readonly")))
        }, this);
        this.canEdit = a
    },
    validate: function () {
        var a = null, b = !0;
        this.getForm().getFields().each(function (c) {
            if (Scdp.ObjUtil.isNotEmpty(c.cid) && (!c.hidden && (!c.isXType("JSearchField") || !c.hasActiveError())) && !c.validate())Scdp.ObjUtil.isEmpty(a) && (a = c), b = !1
        }, this);
        Scdp.ObjUtil.isNotEmpty(a) && a.focus();
        return b
    },
    clearData: function () {
        this.getForm().getFields().each(function (a) {
            a.suspendEvent("change");
            Scdp.ObjUtil.isNotEmpty(a.cid) &&
            a.sotValue(null);
            a.resumeEvent("change")
        }, this)
    },
    clearDirty: function () {
        this.getForm().getFields().each(function (a) {
            a.suspendEvent("change");
            Scdp.ObjUtil.isNotEmpty(a.cid) && a.resetOriginalValue();
            a.resumeEvent("change")
        }, this)
    },
    isDirty: function () {
        var a = !1;
        this.getForm().getFields().each(function (b) {
            if (Scdp.ObjUtil.isNotEmpty(b.cid) && b.isDirty())return a = !0, !1
        }, this);
        return a
    },
    getFirstEditableField: function () {
        var a = null;
        this.getForm().getFields().each(function (b) {
            var c = b.xtype;
            if (Scdp.ObjUtil.isNotEmpty(b.cid) &&
                "JHidden" != c && "JButton" != c && b.isEditable())return a = b, !1
        }, this);
        return a
    }
});
Ext.define("Scdp.container.JExpandForm", {extend: "Scdp.container.JForm", alias: ["widget.JExpandForm"]});
Ext.define("Scdp.container.JTab", {
    extend: "Ext.tab.Panel",
    mixins: ["Scdp.container.IContainer"],
    alias: ["widget.JTab"],
    tabBar: {border: 1, cls: "common", height: 24, style: {backgroundColor: "transparent", backgroundImage: "none"}},
    layout: "card",
    overflowX: "hidden",
    overflowY: "hidden",
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    bodyPadding: "0 0 0 0",
    frame: !1,
    border: 0,
    skipActiveItemsAfterRender: !1,
    allowPopup: !1,
    popupHeight: 510,
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        a.on("afterrender", function () {
            var b =
                a.getLayout().getActiveItem(), c = a.items.items;
            Scdp.ObjUtil.isNotEmpty(c) && !a.skipActiveItemsAfterRender && Ext.each(c, function (b) {
                a.getLayout().setActiveItem(b)
            });
            b && a.getLayout().setActiveItem(b)
        });
        if (a.allowPopup)a.getTabBar().on("dblclick", function () {
            var b = a.up("IView");
            !Scdp.ObjUtil.isEmpty(b) && !(Scdp.ObjUtil.isNotEmpty(b.viewType) && Scdp.Const.UI_INFO_STATUS_NULL == b.getUIStatus()) && Scdp.popupActiveTabPanel(a)
        })
    }
});
Ext.define("Scdp.container.JMenu", {
    extend: "Ext.menu.Menu",
    mixins: ["Scdp.container.IContainer"],
    alias: ["widget.JMenu"],
    frame: !1,
    floating: !0,
    border: 0
});
Ext.define("Scdp.container.JMenuItem", {
    extend: "Ext.menu.Item", alias: ["widget.JMenuItem"], checkSaved: function (a) {
        Scdp.checkSaved(this, a)
    }
});
Ext.define("Scdp.mvc.JQueryView", {
    extend: "Scdp.container.JPanel",
    alias: ["widget.JQueryView"],
    isPopup: !1,
    preSort: [],
    uuidMapping: "uuid",
    selMode: "MULTI",
    withSelMode: !0,
    defaultSelect: !1,
    enableKeyNav: !1,
    enableColumnMove: !0,
    isReport: !1,
    reportFrameId: "",
    xpHeight: 0,
    layout: {align: "stretch", type: "vbox"},
    closable: !1,
    showHeaderCheckbox: !0,
    needSplitPage: !0,
    mergeCols: [],
    initComponent: function () {
        var a = this, b = a.layoutContent, c = [], d = a.width - 38, e = parseInt(d / a.columns);
        a.reportFrameId = Ext.id() + "_Frame";
        var i = 0;
        Ext.Array.each(b.conditions,
            function (f) {
                f.margin = "0 0 0 0";
                "JSplit" == f.xtype && (f.xtype = "JPanel", f.x = 0, f.y = 23 * f.row + 8 * i, f.width = d - 10, f.margin = "2 0 0 5", f.height = 1, f.border = 1, i++);
                var h = f.pos;
                if (Scdp.ObjUtil.isNotEmpty(h)) {
                    var g = h.split(":")[0], j = h.split(":")[1], h = g.substring(0, 1).charCodeAt(0) - 64, g = g.substring(1), k = j.substring(0, 1).charCodeAt(0) - 64;
                    j.substring(1);
                    f.height = 21;
                    f.x = 0 + (h - 1) * e;
                    f.y = 0 + 23 * (g - 1) + 8 * i;
                    f.percent = (k - h + 1) / a.columns;
                    f.prePercent = (h - 1) / a.columns;
                    f.width = e * (k - h + 1) - (a.columns - 1);
                    f.labelWidth = a.labelWidth;
                    f.enterQuery = !0;
                    if ((!0 === Scdp.Const.QUERY_CONDITION_FORCE_ENABLE || "1.0" !== b.version) && "true" !== b.hideOpts && !0 !== f.hideOpt && !Ext.Array.contains(Scdp.Const.QC_OPT_IGNORE_XTYPES, f.xtype))j = "JCombo" == f.xtype ? f.multiSelect ? "~,!~" : "\x3d,!\x3d" : null, f.flex = 1, f = Ext.create("Ext.form.FieldContainer", {
                        layout: {align: "stretch", type: "hbox"},
                        defaults: {hideLabel: !0},
                        fieldLabel: f.fieldLabel,
                        labelWidth: f.labelWidth,
                        labelAlign: Scdp.Const.FORM_FIELD_LABEL_ALIGN,
                        labelSeparator: "",
                        items: [Ext.create("Scdp.form.JOptButton", {
                            cid: f.cid +
                            Scdp.getSysConfig("QUERY_OPERATOR_SUFFIX"),
                            width: 32,
                            optFilter: Scdp.StrUtil.replaceNull(j, Scdp.StrUtil.replaceNull(f.queryOptFilter)),
                            defaultOpt: Scdp.StrUtil.replaceNull(f.defaultOpt)
                        }), f]
                    }), f.x = 0 + (h - 1) * e, f.y = 0 + 23 * (g - 1) + 8 * i, f.percent = (k - h + 1) / a.columns, f.prePercent = (h - 1) / a.columns, f.width = e * (k - h + 1) - (a.columns - 1);
                    f.qxtype = !0
                }
                c.push(f)
            });
        var g = [a.uuidMapping], h = [], l = function (a) {
            a.menuDisabled = !0;
            !1 !== a.sortable && "JGroupCol" != a.xtype && (a.sortable = !0);
            a.dataIndex && g.push(a.dataIndex.trim());
            a.columns &&
            Ext.Array.each(a.columns, function (a) {
                l(a)
            })
        };
        Ext.Array.each(b.results, function (a) {
            l(a);
            h.push(a)
        });
        h.unshift({text: "", xtype: "rownumberer", width: 35});
        if (Scdp.ObjUtil.isNotEmpty(a.viewClassName)) {
            var j = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_JQGRID_COLUMN_DEF, a.viewClassName + "_resultPanel");
            Scdp.ObjUtil.isNotEmpty(j) && (Scdp.isColumnChanged(h, j) || (h = j))
        }
        j = Scdp.CacheUtil.get(Scdp.Const.COMMON_QUERY_PAGE_SIZE_CACHE);
        Scdp.ObjUtil.isEmpty(j) && (j = Scdp.Const.GRID_EVERY_PAGE_SHOW_RECORDS_DEFAULT);
        a.needSplitPage ||
        (j = 99999999);
        j = a.isReport ? null : Ext.create("Ext.data.Store", {
            fields: g,
            autoLoad: !1,
            remoteSort: !0,
            pageSize: j,
            proxy: {
                type: "ajax",
                url: Scdp.Const.JSON_ACTION,
                actionMethods: {read: "POST"},
                reader: {type: "json", root: "root", totalProperty: "totalProperty"}
            }
        });
        a.items = [{
            xtype: "JFieldSet",
            collapsible: !0,
            collapsed: !(!b.quickQuery || !b.quickQuery.queryCids) && "true" != b.defaultExpand,
            title: Scdp.I18N.SEARCH_CONDITIONS,
            margin: "2 4 2 3 ",
            height: a.cpHeight,
            firstField: b.firstField,
            border: 1,
            hidden: !1,
            layout: "fit",
            items: [{
                xtype: "JPanel",
                overflowY: "scroll",
                layout: "auto",
                items: [{
                    xtype: "JForm",
                    cid: "conditionPanel",
                    labelWidth: 120,
                    border: 0,
                    overflowX: "hidden",
                    overflowY: "hidden",
                    margin: "1 1 1 1",
                    padding: "0 5 0 5",
                    layout: "absolute",
                    items: c,
                    flex: 1,
                    hasConditions: function () {
                        var a = this, b = a.gotValue(), c = !1;
                        Ext.Object.each(b, function (b, d) {
                            if (!b.endsWith(Scdp.getSysConfig("QUERY_OPERATOR_SUFFIX"))) {
                                var e = a.getCmp(b), h = e.xtype;
                                if (e && "JHidden" != h && Scdp.ObjUtil.isNotEmpty(d))return c = !0, !1
                            }
                        });
                        return c
                    }
                }]
            }]
        }, {
            xtype: "JToolBar",
            ui: "footer",
            cid: "conditionToolbar",
            frame: !0,
            height: 25,
            items: [{
                xtype: "JText",
                cid: "quickQueryTxt",
                enterQuickQuery: !0,
                fieldLabel: Scdp.I18N.QUICK_QUERY,
                labelWidth: 80,
                hidden: !(b.quickQuery && b.quickQuery.queryCids),
                emptyText: b.quickQuery ? b.quickQuery.queryTips : "",
                width: 550
            }, {
                xtype: "JButton",
                cid: "quickQueryBtn",
                text: Scdp.I18N.QUERY_BTN,
                hidden: !0,
                iconCls: "query_btn"
            }, "-\x3e", {
                xtype: "JButton",
                cid: "queryBtn",
                text: Scdp.I18N.QUERY_BTN,
                iconCls: "query_btn"
            }, {xtype: "JTbSpacer"}, {
                xtype: "JButton",
                cid: "resetBtn",
                text: Scdp.I18N.RESET_BTN,
                iconCls: "reset_btn"
            },
                {xtype: "JTbSpacer"}, {
                    xtype: "JButton",
                    cid: "saveQueryBtn",
                    hidden: a.isPopup,
                    text: Scdp.I18N.DEVP_VIEW_SAVE_BTN,
                    iconCls: "save_btn",
                    handler: function (a) {
                        var b = a.up("IView");
                        a = Ext.widget("JForm", {
                            height: 80,
                            width: 500,
                            layout: "form",
                            bodyPadding: "10 10 10 10",
                            items: [{
                                xtype: "JText",
                                allowBlank: !1,
                                cid: "templateName",
                                fieldLabel: Scdp.I18N.QUERY_TEMPLATE_NAME,
                                value: b.queryTemplateName ? b.queryTemplateName : ""
                            }]
                        });
                        Scdp.openNewWinByView(a, function (a) {
                            if (a.validate()) {
                                var c = a.getCmp("templateName").gotValue();
                                a = {
                                    menuCode: b.menuCode,
                                    templateName: c, templateContent: Ext.encode(b.getConditionPanel().gotValue(!1))
                                };
                                Scdp.doAction("sys-add-query-template", a, function (a) {
                                    a = a.userQueryTemplate;
                                    var d = b.getCmp("loadQueryBtn").menu;
                                    b.queryTemplateName = c;
                                    Scdp.reloadQueryTemplate(d, a)
                                });
                                return !0
                            }
                            return !1
                        }, "save_btn", Scdp.I18N.QUERY_TEMPLATE_SAVE, Scdp.I18N.SAVE_BTN)
                    }
                }, {xtype: "JTbSpacer"}, {
                    xtype: "JButton",
                    cid: "loadQueryBtn",
                    hidden: a.isPopup,
                    text: Scdp.I18N.DEVP_VIEW_LOAD_BTN,
                    iconCls: "add_btn",
                    menu: {items: []}
                }, {xtype: "JTbSpacer"}, a.isReport ? null :
                {
                    xtype: "JButton",
                    cid: "exportBtn",
                    hidden: a.exportDisable || a.isPopup,
                    text: Scdp.I18N.EXPORT_BTN,
                    iconCls: "export_btn"
                }, {xtype: "JTbSpacer"}]
        }, a.isReport ? {
            xtype: "JPanel",
            cid: "resultPanel",
            margin: "2 4 2 3 ",
            flex: 1,
            html: '\x3ciframe id\x3d"' + a.reportFrameId + '" cid\x3d"' + a.reportFrameId + '" src\x3d"" frameborder\x3d"1" width\x3d"100%" height\x3d"100%"\x3e\x3c/iframe\x3e'
        } : Ext.Object.merge({
            xtype: "JQGrid",
            cid: "resultPanel",
            margin: "2 4 2 3 ",
            rowColorConfigFn: a.rowColorConfigFn,
            flex: 1,
            store: j,
            columns: h,
            resultColumns: h,
            enableColumnMove: a.enableColumnMove,
            viewClassName: a.viewClassName,
            ignoreCaseDisable: !1,
            multiSortDisable: !1,
            addNewDisable: !0,
            batchDelDisable: !1,
            exportDisable: !1,
            selMode: a.selMode,
            withSelMode: a.withSelMode,
            showHeaderCheckbox: a.showHeaderCheckbox,
            enableKeyNav: a.enableKeyNav,
            defaultSelect: a.defaultSelect,
            needSplitPage: a.needSplitPage,
            needLoadItem: !0,
            autoResizeColumn: Scdp.Const.AUTO_RESIZE_QUERY_GRID_COLUMN,
            mergeCols: a.mergeCols
        }, Scdp.ObjUtil.isEmpty(b.resultGridConfig) ? {} : Ext.JSON.decode(b.resultGridConfig)),
            {
                xtype: "JFieldSet",
                collapsible: !1 === a.extraPanelCollapsible ? !1 : !0,
                title: a.extraPanelTitle,
                border: 1,
                height: a.xpHeight ? a.xpHeight + (a.extraPanelTitle ? 22 : 0) : 0,
                layout: "fit",
                items: [{xtype: "JPanel", cid: "extraPanel", border: 0}]
            }];
        a.callParent(arguments)
    }
});
Ext.define("Scdp.mvc.JEditView", {
    extend: "Scdp.container.JPanel",
    alias: ["widget.JEditView"],
    editable: !0,
    dockedWay: "top",
    closable: !1,
    withToolbar: !0,
    layout: {type: "vbox", align: "stretch"},
    initComponent: function () {
        var a = {
            xtype: "JToolBar",
            cid: "editToolbar",
            items: [{xtype: "button", text: Scdp.I18N.ADD_BTN, cid: "addNew2Btn", iconCls: "add_btn"}, {
                xtype: "button",
                text: Scdp.I18N.COPY_ADD_BTN,
                cid: "copyAddBtn",
                iconCls: "copy_add_btn"
            }, {xtype: "button", text: Scdp.I18N.MODIFY_BTN, cid: "modifyBtn", iconCls: "modify_btn"}, {
                xtype: "button",
                text: Scdp.I18N.DELETE_BTN, cid: "deleteBtn", iconCls: "delete_btn"
            }, {xtype: "button", text: Scdp.I18N.CANCEL_BTN, cid: "cancelBtn", iconCls: "reset_btn"}, {
                xtype: "button",
                text: Scdp.I18N.SAVE_BTN,
                cid: "saveBtn",
                iconCls: "save_btn"
            }, "-", {
                xtype: "button",
                text: Scdp.I18N.WROKFLOW_COMMIT_BTN,
                cid: "workFlowCommitBtn",
                iconCls: "workFlowCommit_Btn",
                hidden: !0
            }, {
                xtype: "button",
                text: Scdp.I18N.WROKFLOW_ROLLBACK_BTN,
                cid: "workFlowRollBackBtn",
                iconCls: "workFlowRollBack_Btn",
                hidden: !0
            }, {
                xtype: "button", text: Scdp.I18N.WROKFLOW_ASSIGN_BTN,
                cid: "workFlowAssignBtn", iconCls: "workFlowAssign_Btn", hidden: !0
            }, {
                xtype: "button",
                text: Scdp.I18N.WROKFLOW_CANCEL_BTN,
                cid: "workFlowCancelBtn",
                iconCls: "workFlowCancel_Btn",
                hidden: !0
            }, {
                xtype: "button",
                text: Scdp.I18N.WROKFLOW_VIEW_LOG_BTN,
                cid: "workFlowViewLogBtn",
                iconCls: "workFlowViewLog_Btn",
                hidden: !0
            }, "-"]
        }, b = this.layoutContent, c = {
            xtype: "JPanel",
            layout: "absolute",
            closable: !1,
            width: this.width,
            flex: 1,
            height: this.height,
            items: []
        };
        this.items = this.withToolbar ? "top" == this.dockedWay ? [a, c] : [c, a] : [c];
        Scdp.buildInfoLayout(c,
            b, this.width, this.withToolbar ? this.height - 28 : this.height);
        this.callParent(arguments)
    },
    listeners: {}
});
Ext.define("Scdp.window.BasePopupWindow", {
    extend: "Ext.window.Window", initComponent: function () {
        var a = this;
        a.callParent(arguments);
        a.on("show", function () {
            a.currentActiveWin = window.ACTIVE_WINDOW;
            window.ACTIVE_WINDOW = a;
            Scdp.DebugUtil.logInfo("Set Active Window to " + a.title)
        });
        a.on("close", function (a) {
            window.ACTIVE_WINDOW = a.currentActiveWin;
            Scdp.DebugUtil.logInfo("Set Active Window back to " + (window.ACTIVE_WINDOW ? window.ACTIVE_WINDOW.title : "null"))
        })
    }
});
Ext.define("Scdp.window.PassWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.CHANGE_PERSONAL_INFO,
    modal: !0,
    resizable: !1,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "pass_icon_16",
    needModifyPass: !1,
    userId: Scdp.getCurrentUserId(),
    layout: "border",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 350,
    width: 400,
    items: [{
        xtype: "JForm", layout: "form", region: "center", flex: 1, id: "changePassForm", items: [{
            xtype: "JText",
            allowBlank: !1,
            fieldLabel: Scdp.I18N.ORI_PASS,
            id: "userOriPass",
            cid: "userOriPass",
            inputType: "password",
            emptyText: Scdp.I18N.ORI_PASS_TIPS,
            listeners: {
                specialkey: function (a, b) {
                    b.getKey() == Ext.EventObject.ENTER && Ext.getCmp("userNewPass").focus()
                }
            }
        }, {
            xtype: "JFieldSet",
            title: Scdp.I18N.CHANGE_PASS_TIPS,
            height: 80,
            margin: "10 0",
            border: 1,
            layout: "form",
            items: [{
                xtype: "JText",
                fieldLabel: Scdp.I18N.NEW_PASS,
                id: "userNewPass",
                cid: "userNewPass",
                inputType: "password",
                emptyText: Scdp.I18N.NEW_PASS_TIPS,
                validator: function (a) {
                    return Scdp.ObjUtil.isEmpty(a) ? !0 : !/^(?![^a-zA-Z]+$)(?!\D+$).{6,}$/.test(a) ? Scdp.I18N.PASSWORD_SIMPLE :
                        Ext.getCmp("userOriPass").getValue() == a ? Scdp.I18N.PASS_NOT_SAME : !0
                },
                listeners: {
                    specialkey: function (a, b) {
                        b.getKey() == Ext.EventObject.ENTER && Ext.getCmp("userNewPassConfirm").focus()
                    }
                }
            }, {
                xtype: "JText",
                fieldLabel: Scdp.I18N.NEW_PASS_CONFIRM,
                id: "userNewPassConfirm",
                cid: "userNewPassConfirm",
                inputType: "password",
                emptyText: Scdp.I18N.NEW_PASS_CONFIRM_TIPS,
                validator: function (a) {
                    return Ext.getCmp("userNewPass").getValue() != a ? Scdp.I18N.PASS_NOT_MATCH : !0
                },
                listeners: {
                    specialkey: function (a, b) {
                        b.getKey() == Ext.EventObject.ENTER &&
                        (Ext.getCmp("passChangeOkBtn").focus(), Ext.getCmp("passChangeOkBtn").fireEvent("click"))
                    }
                }
            }]
        }, {
            xtype: "JVTextOpt",
            cids: "userMail",
            id: "userMailVOpt",
            vtype: "email",
            fieldLabel: Scdp.I18N.VERIFY_MAIL,
            verifyFunc: function () {
                this.up("window").verifyInfo(Scdp.Const.VERIFY_TYPE_MAIL, this.down("JText"))
            }
        }, {
            xtype: "JVTextOpt",
            cids: "userMobile",
            id: "userMobileVOpt",
            fieldLabel: Scdp.I18N.VERIFY_MOBILE,
            verifyFunc: function () {
                this.up("window").verifyInfo(Scdp.Const.VERIFY_TYPE_MOBILE, this.down("JText"))
            }
        }, {
            xtype: "JText",
            fieldLabel: Scdp.I18N.USER_NICKNAME, id: "nickname", cid: "nickname"
        }]
    }, {
        xtype: "JForm",
        layout: "form",
        region: "south",
        height: 30,
        items: [{xtype: "JDisplay", flex: 1, id: "displayInfo", stype: {marginTop: "20px"}}]
    }],
    dockedItems: [{
        xtype: "JToolBar", dock: "bottom", ui: "footer", border: 1, height: 32, items: ["-\x3e", {
            xtype: "JButton",
            cid: "okBtn",
            id: "passChangeOkBtn",
            text: Scdp.I18N.OK_BTN,
            iconCls: "ok_btn",
            width: 80,
            listeners: {
                click: function (a) {
                    if (Ext.getCmp("changePassForm").validate()) {
                        var b = function (b) {
                            b = a.up("window").query("[cid\x3d" +
                                b + "]")[0];
                            return b.isChanged() ? b.gotValue() : ""
                        }, c = a.up("window"), d = c.down("#displayInfo"), e = [Scdp.I18N.INFO_MODIFY_SUCCESS, Scdp.I18N.NO_USER, Scdp.I18N.PASSWORD_INCORRECT], i = {
                            userId: c.userId,
                            userOriPass: "",
                            userNewPass: "",
                            userMail: b("userMail"),
                            userMobile: b("userMobile"),
                            nickname: b("nickname")
                        }, g = function (a) {
                            return !1 === a ? (Scdp.CryptUtil.getServerPublicKey(), d.setValue(Scdp.I18N.RSA_EXPIRE_PASSCHANGE), d.setFieldStyle("color: orangered"), !1) : !0
                        };
                        Ext.getCmp("passChangeOkBtn").setDisabled(!0);
                        Scdp.CryptUtil.encryptPass(Ext.getCmp("userOriPass").getValue(),
                            function (a) {
                                !1 == g(a) ? c.down("#passChangeOkBtn").setDisabled(!1) : (i.userOriPass = a, Scdp.CryptUtil.encryptPass(Ext.getCmp("userNewPass").getValue(), function (a) {
                                    !1 == g(a) ? c.down("#passChangeOkBtn").setDisabled(!1) : (i.userNewPass = a, d.setValue(""), Scdp.doAction("sys-user-modify-info", i, function (a) {
                                        var b = a.resultCode;
                                        switch (b) {
                                            case 0:
                                                d.setValue(e[b]);
                                                c.needModifyPass && Scdp.CacheUtil.remove(Scdp.Const.USER_NEED_MODIFY_PASS);
                                                d.setFieldStyle("color: forestgreen");
                                                Scdp.doAction("sys-user-get-mobile-mail", {uuid: Scdp.CacheUtil.get(Scdp.Const.USER_UUID)},
                                                    function (a) {
                                                        Ext.getCmp("changePassForm").sotValue(a)
                                                    }, function () {
                                                    }, !0, !1);
                                                break;
                                            case 1:
                                            case 2:
                                                d.setValue(e[b]);
                                                d.setFieldStyle("color: orangered");
                                                break;
                                            case -1:
                                                d.setValue(a.resultInfo), d.setFieldStyle("color: orangered")
                                        }
                                        c.down("#userOriPass").setValue("");
                                        c.down("#userNewPass").setValue("");
                                        c.down("#userNewPassConfirm").setValue("");
                                        c.down("#passChangeOkBtn").setDisabled(!1)
                                    }, function () {
                                        c.down("#userOriPass").setValue("");
                                        c.down("#userNewPass").setValue("");
                                        c.down("#userNewPassConfirm").setValue("");
                                        c.down("#passChangeOkBtn").setDisabled(!1)
                                    }))
                                }))
                            })
                    }
                }
            }
        }, {
            xtype: "JButton",
            cid: "cancelBtn",
            text: Scdp.I18N.CLOSE_BTN,
            iconCls: "cancel_btn",
            width: 80,
            listeners: {
                click: function () {
                    this.up("window").close()
                }
            }
        }]
    }],
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        a.needModifyPass && (a.down("JDisplay").setFieldStyle("color: orangered"), a.down("JDisplay").setValue(Scdp.I18N.PASSWORD_NEED_MODIFY));
        a.on("show", function () {
            Ext.getCmp("userOriPass").focus();
            a.query("[cid\x3duserMail]")[0].on("change", function (b) {
                a.down("#userMailVOpt").disableBtn(b.isChanged() ?
                    Scdp.I18N.VERIFY_NOT_SAVED_OR_EMPTY : !0)
            });
            a.query("[cid\x3duserMobile]")[0].on("change", function (b) {
                a.down("#userMobileVOpt").disableBtn(b.isChanged() ? Scdp.I18N.VERIFY_NOT_SAVED_OR_EMPTY : !0)
            })
        });
        a.on("beforeshow", function () {
            Scdp.doAction("sys-user-get-mobile-mail", {uuid: Scdp.CacheUtil.get(Scdp.Const.USER_UUID)}, function (a) {
                Ext.getCmp("changePassForm").sotValue(a)
            }, function () {
            }, !0, !1)
        })
    },
    verifyInfo: function (a, b) {
        Ext.create("Scdp.window.VerifyWindow", {
            userUuid: Scdp.CacheUtil.get(Scdp.Const.USER_UUID),
            target: b.gotValue(), verifyType: a, closeCallback: function (a) {
                a && b.verifyField.sotValue(1)
            }
        }).show()
    }
});
Ext.define("Scdp.window.LoginWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.SYSTEM_LOGIN,
    modal: !0,
    resizable: !1,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "pass_icon_16",
    layout: "border",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 200,
    width: 400,
    isSuccess: !1,
    relogin: !1,
    items: [{
        xtype: "JForm", layout: "form", region: "center", flex: 1, id: "loginForm", items: [{
            xtype: "JText", allowBlank: !1, fieldLabel: Scdp.I18N.USER_ID, id: "userName", cid: "userName", listeners: {
                specialkey: function (a, b) {
                    b.getKey() == Ext.EventObject.ENTER &&
                    Ext.getCmp("userPass").focus()
                }
            }
        }, {
            xtype: "JText",
            allowBlank: !1,
            fieldLabel: Scdp.I18N.USER_PASS,
            id: "userPass",
            cid: "userPass",
            inputType: "password",
            listeners: {
                specialkey: function (a, b) {
                    b.getKey() == Ext.EventObject.ENTER && (Ext.getCmp("loginOkBtn").focus(), Ext.getCmp("loginOkBtn").fireEvent("click"))
                }
            }
        }]
    }, {
        xtype: "JForm",
        layout: "form",
        region: "south",
        height: 30,
        items: [{xtype: "JDisplay", flex: 1, id: "displayInfo", stype: {marginTop: "20px"}}]
    }],
    dockedItems: [{
        xtype: "JToolBar", dock: "bottom", ui: "footer", border: 1, height: 32,
        items: ["-\x3e", {
            xtype: "JButton",
            cid: "loginOkBtn",
            id: "loginOkBtn",
            text: Scdp.I18N.OK_BTN,
            iconCls: "ok_btn",
            width: 80,
            listeners: {
                click: function () {
                    if (Ext.getCmp("loginForm").validate()) {
                        var a = this.up("window"), b = Ext.getCmp("displayInfo"), c = {
                            userId: Ext.getCmp("userName").getValue(),
                            password: "",
                            userTzOffset: -1 * (new Date).getTimezoneOffset(),
                            timeZone: jstz.determine().name(),
                            userLocaleId: Scdp.getSysConfig("locale_id")
                        };
                        window.SYSCONFIG_RSA_DISABLED || (c.publicKey = Scdp.CryptUtil.getClientPublicKey());
                        Ext.getCmp("loginOkBtn").setDisabled(!0);
                        Scdp.CryptUtil.encryptPass(Ext.getCmp("userPass").getValue(), function (d) {
                            var e;
                            !1 === d ? (Scdp.CryptUtil.getServerPublicKey(), b.setValue(Scdp.I18N.RSA_EXPIRE_PASSCHANGE), b.setFieldStyle("color: orangered"), e = !1) : e = !0;
                            !1 == e ? Ext.getCmp("loginOkBtn").setDisabled(!1) : (c.password = d, c.OTP = Scdp.CryptUtil.getTOTP(Scdp.Const.TOTP), b.setValue(""), Scdp.doAction("sys-user-login", c, function (c) {
                                if (0 != c.resultCode)b.setValue(c.resultInfo), 11 == c.resultCode ? Ext.getCmp("userName").focus(!0) : Ext.getCmp("userPass").focus(!0),
                                    Ext.getCmp("loginOkBtn").setDisabled(!1); else {
                                    if ("1" == c.userToken.substr(0, 1)) {
                                        var d = Scdp.StrUtil.decodeab(c.userToken.substr(2));
                                        Scdp.CryptUtil.decryptRSA(d, Scdp.RSA.ClientKey, function (a) {
                                            c.userToken = a;
                                            saveLoginData(c, !0)
                                        })
                                    } else c.userToken = c.userToken.substr(2), saveLoginData(c, !0);
                                    a.isSuccess = !0;
                                    a.close()
                                }
                            }, function () {
                                Ext.getCmp("loginOkBtn").setDisabled(!1)
                            }))
                        })
                    }
                }
            }
        }]
    }],
    initComponent: function () {
        this.callParent(arguments);
        this.relogin && (this.down("JDisplay").setFieldStyle("color: orangered"), this.down("JDisplay").setValue(Scdp.I18N.LOGIN_TIMEOUT_RELOGIN),
            Ext.getCmp("userName").setValue(Scdp.CacheUtil.get(Scdp.Const.USER_ID)), Ext.getCmp("userName").setDisabled(!0));
        this.on("show", function (a) {
            a.relogin && Ext.getCmp("userPass").focus();
            window.SYSCONFIG_RSA_DISABLED || (Scdp.CryptUtil.getServerPublicKey(), Scdp.CryptUtil.generateClientKeyPair());
            window.IS_LOGIN_EXPIRED = !0;
            this.modal && Ext.select("div.x-mask").addCls("loginWinMask")
        });
        this.on("beforeclose", function (a) {
            a = a.isSuccess;
            this.modal && a && Ext.select("div.x-mask").removeCls("loginWinMask");
            return a
        })
    }
});
Ext.define("Scdp.panel.JShortcutMenu", {
    extend: "Scdp.container.JFieldSet",
    alias: ["widget.JShortcutMenu"],
    frame: !1,
    layout: {type: "vbox", pack: "center", align: "center"},
    height: 60,
    border: 0,
    margin: "2 1 0 1",
    initComponent: function () {
        var a = this.menuObj;
        this.items = [{
            xtype: "JImg",
            height: 32,
            width: 32,
            imgCls: a.imgCls,
            overCls: "mainframe_shortcut_icon_over_color",
            listeners: {
                afterrender: function (b) {
                    b.getEl().on("click", function () {
                        Scdp.openNewModule(a.menuAction, a.actionParams, a, a.menuType)
                    });
                    b.getEl().on("contextmenu",
                        function (c) {
                            c.preventDefault();
                            Ext.getCmp("myFavorite");
                            var d = Ext.getCmp("shortcutPanel");
                            (new Ext.menu.Menu({
                                floating: !0, items: [{
                                    text: Scdp.I18N.DELETE_BTN, iconCls: "delete_btn", handler: function () {
                                        Scdp.MsgUtil.confirm(Scdp.I18N.REMOVE_FROM_MY_FAVORITE, function (b) {
                                            "yes" == b && Scdp.doAction("sys-menu-remove-favorite", {menuCode: a.menuCode}, function (a) {
                                                d.removeAll(!0);
                                                Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_SYS_MENU);
                                                a = a.userFavorites;
                                                if (Scdp.ObjUtil.isNotEmpty(a)) {
                                                    d.userFavorites = a;
                                                    for (var b =
                                                        0; b < a.length; b++) {
                                                        var c = a[b];
                                                        Scdp.ObjUtil.isEmpty(c.imgCls) && (c.imgCls = "temp_icon_32");
                                                        c = Ext.widget("JShortcutMenu", {menuObj: c});
                                                        d.add(c)
                                                    }
                                                }
                                            })
                                        })
                                    }
                                }]
                            })).showAt(b.getEl().getX() + 24, b.getEl().getY() + 24)
                        })
                }
            }
        }, {
            xtype: "JDisplay",
            value: a.text,
            height: 20,
            width: Scdp.getSysConfig("tree_menu") ? 164 : 114,
            fieldStyle: {
                fontSize: "13px",
                color: "white",
                textAlign: "center",
                "text-overflow": "ellipsis",
                "white-space": "nowrap",
                overflow: "hidden"
            }
        }];
        this.callParent(arguments)
    }
});
Ext.define("Scdp.panel.LiveSearchPanel", {
    matchCls: "x-livesearch-match",
    searchValue: null,
    searchRegExp: null,
    caseSensitive: !1,
    regExpMode: !1,
    multiSelect: !1,
    withSearchBar: !1,
    needFilter: !1,
    filterStatus: 1,
    searchFieldTips: null,
    searchFilterCids: [],
    searchBarFullMode: !1,
    setSearchBar: function () {
        var a = this;
        if (a.withSearchBar) {
            Ext.isString(a.searchFilterCids) && (a.searchFilterCids = a.searchFilterCids.split(","));
            var b = null;
            a.needFilter && (b = {
                xtype: "JCheck", fieldLabel: Scdp.I18N.FIELD_LABLE_FILTER, labelWidth: 25, value: a.filterStatus,
                width: 46, handler: function (b) {
                    a.getStore();
                    1 == b.gotValue() ? (a.filterStatus = 1, a.startFilter()) : (a.filterStatus = 0, a.clearFilter());
                    a.onTextFieldChange();
                    a.onNextClick()
                }, scope: a
            });
            var c = null, c = Scdp.ObjUtil.isNotEmpty(a.searchBarWidth) ? {
                xtype: "JText",
                margin: "0 0 0 2",
                name: "searchField",
                emptyText: a.searchFieldTips ? a.searchFieldTips : Scdp.I18N.LIVESEARCH_TOOLTIP,
                hideLabel: !0,
                width: a.searchBarWidth,
                listeners: {
                    specialkey: function (b, c) {
                        if (c.getKey() == Ext.EventObject.ENTER) {
                            if (b.isChanged())a.onTextFieldChange();
                            a.onNextClick()
                        }
                    }, change: function () {
                        a.needFilter && 1 == a.filterStatus && (Scdp.ObjUtil.isEmpty(a.getSearchValue()) ? a.clearFilter() : a.startFilter())
                    }
                }
            } : {
                xtype: "JText",
                name: "searchField",
                margin: "0 0 0 2",
                emptyText: a.searchFieldTips ? a.searchFieldTips : Scdp.I18N.LIVESEARCH_TOOLTIP,
                hideLabel: !0,
                flex: 1,
                listeners: {
                    specialkey: function (b, c) {
                        if (c.getKey() == Ext.EventObject.ENTER) {
                            if (b.isChanged())a.onTextFieldChange();
                            a.onNextClick()
                        }
                    }, change: function () {
                        a.needFilter && 1 == a.filterStatus && (Scdp.ObjUtil.isEmpty(a.getSearchValue()) ?
                            a.clearFilter() : a.startFilter())
                    }
                }
            };
            a.tbar = [{
                xtype: "JImg",
                src: "framework/images/16x16/query_btn16.png",
                width: 16,
                height: 16,
                margin: "0 2px"
            }, b, c];
            a.hideLiveSearchBtn || a.tbar.push({
                xtype: "button",
                text: "\x26lt;",
                tooltip: Scdp.I18N.LIVESEARCH_PREROW,
                handler: a.onPreviousClick,
                scope: a
            }, {
                xtype: "button",
                text: "\x26gt;",
                tooltip: Scdp.I18N.LIVESEARCH_NEXTROW,
                handler: a.onNextClick,
                scope: a
            });
            a.searchBarFullMode && a.tbar.push("-", {
                xtype: "checkbox", hideLabel: !0, margin: "0 0 0 4px", boxLabel: Scdp.I18N.LIVESEARCH_REGEXP,
                handler: a.regExpToggle, scope: a, hidden: !a.searchBarFullMode
            }, {
                xtype: "checkbox",
                id: "livesearch_caseSensi",
                hideLabel: !0,
                margin: "0 2px 0 4px",
                boxLabel: Scdp.I18N.LIVESEARCH_CASESENSITIVE,
                handler: a.caseSensitiveToggle,
                scope: a,
                hidden: !a.searchBarFullMode
            });
            a.bbar = Ext.create("Ext.ux.StatusBar", {
                defaultText: Scdp.I18N.LIVESEARCH_DEFAULTSTATUS,
                name: "searchStatusBar"
            })
        }
    },
    tagsRe: /<[^>]*>/gm,
    tagsProtect: "",
    regExpProtect: /\\|\/|\+|\\|\.|\[|\]|\{|\}|\?|\$|\*|\^|\|/gm,
    startFilter: function () {
        var a = this, b = a.getStore();
        a.searchValue = a.getSearchValue();
        Scdp.ObjUtil.isNotEmpty(a.searchValue) && (a.searchRegExp = RegExp(a.searchValue, a.caseSensitive && !a.regExpMode ? "" : "i"), b.filterBy(function (b) {
            var d = !1;
            Ext.each(a.searchFilterCids, function (e) {
                if (a.searchRegExp.test(b.get(e)))return d = !0, !1
            });
            return d
        }))
    },
    clearFilter: function () {
        this.getStore().clearFilter()
    },
    getSearchValue: function () {
        var a = this.textField.getValue();
        if ("" === a)return null;
        if (this.regExpMode) {
            try {
                RegExp(a)
            } catch (b) {
                return this.statusBar.setStatus({
                    text: b.message,
                    iconCls: "x-status-error"
                }), null
            }
            if ("^" === a || "$" === a)return null
        } else a = a.replace(this.regExpProtect, function (a) {
            return "\\" + a
        });
        return a
    },
    onTextFieldChange: function () {
        var a = this;
        a.view.refresh();
        a.searchValue = a.getSearchValue();
        a.currentIndex = null;
        a.selectNodes = [];
        a.currentSelect = null;
        a.getSelectionModel().deselectAll();
        if (null !== a.searchValue) {
            a.searchRegExp = RegExp(a.searchValue, a.caseSensitive && !a.regExpMode ? "" : "i");
            var b = a.xtype;
            if ("JQGrid" === b || "JEGrid" === b) {
                var c = a.getStore();
                Scdp.ObjUtil.isNotEmpty(a.searchFilterCids) &&
                Ext.each(a.searchFilterCids, function (b) {
                    c.each(function (c) {
                        a.searchRegExp.test(c.get(b)) && a.selectNodes.push(c)
                    })
                })
            } else a.getRootNode().cascadeBy(function () {
                a.searchRegExp.test(this.raw.text) && a.selectNodes.push(this)
            })
        }
        b = a.selectNodes.length;
        0 < b ? a.statusBar.setText(b + " " + Scdp.I18N.LIVESEARCH_MATCH) : a.statusBar.setText(Scdp.I18N.LIVESEARCH_DEFAULTSTATUS)
    },
    onPreviousClick: function () {
        if (Scdp.ObjUtil.isNotEmpty(this.selectNodes)) {
            this.currentSelect = Scdp.ObjUtil.isEmpty(this.currentSelect) ? 0 : 0 == this.currentSelect ?
            this.selectNodes.length - 1 : this.currentSelect - 1;
            var a = this.selectNodes[this.currentSelect], b = this.xtype;
            "JQGrid" === b || "JEGrid" === b ? this.setCurRecord(a) : this.selectNode(a)
        }
        this.textField.focus()
    },
    onNextClick: function () {
        if (Scdp.ObjUtil.isNotEmpty(this.selectNodes)) {
            this.currentSelect = Scdp.ObjUtil.isEmpty(this.currentSelect) ? 0 : this.currentSelect == this.selectNodes.length - 1 ? 0 : this.currentSelect + 1;
            var a = this.selectNodes[this.currentSelect], b = this.xtype;
            "JQGrid" === b || "JEGrid" === b ? this.setCurRecord(a) : this.selectNode(a)
        }
        this.textField.focus()
    },
    caseSensitiveToggle: function (a, b) {
        this.caseSensitive = b;
        this.onTextFieldChange()
    },
    regExpToggle: function (a, b) {
        this.regExpMode = b;
        this.down("#livesearch_caseSensi").setDisabled(b);
        this.onTextFieldChange()
    }
});
Ext.define("Scdp.window.ReportPrintPreviewWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.PREVIEW,
    modal: !0,
    resizable: !0,
    maximizable: !0,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "preview_icon_16",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 800,
    width: 1200,
    isSuccess: !1,
    relogin: !1,
    layout: "fit",
    reports: null,
    winHandle: null,
    items: [{
        xtype: "JTab",
        id: "reportPreviewPanel",
        border: 0,
        frame: !1,
        flex: 1,
        margin: "0 0 0 0",
        tabBar: {frame: !0, cls: "header", border: 0, height: 26},
        items: [],
        skipActiveItemsAfterRender: !0,
        listeners: {
            tabchange: function (a, b) {
                b.isLoaded || (b.update(b.reportHtml), b.isLoaded = !0)
            }
        }
    }],
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        var b = Ext.getCmp("reportPreviewPanel", !0);
        Ext.suspendLayouts();
        Ext.Array.each(a.reports.records, function (c) {
            var d = "ReportPreview_" + c.uuid, e = Scdp.getReportUrl(a.reports.templatePathPreview, c);
            b.add({
                xtype: "JPanel",
                title: c.RP_Title,
                flex: 1,
                isLoaded: !1,
                html: "",
                reportHtml: '\x3ciframe id\x3d"' + d + '" cid\x3d"' + d + '" src\x3d"' + e + '" frameborder\x3d"0" width\x3d"100%" height\x3d"100%" onload\x3d"this.contentWindow.queryKey \x3d \'' +
                c.queryKey + "';\"\x3e\x3c/iframe\x3e"
            })
        });
        Ext.resumeLayouts(!0);
        b.setActiveTab(0);
        a.on("show", function (a) {
            a.winHandle = a
        });
        a.on("beforeclose", function (a) {
            a.winHandle = null
        })
    }
});
Ext.define("Scdp.window.ReportPrintPreviewWindowSplit", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.PREVIEW,
    modal: !0,
    resizable: !0,
    maximizable: !0,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "preview_icon_16",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 800,
    width: 1200,
    isSuccess: !1,
    relogin: !1,
    layout: "fit",
    reports: null,
    winHandle: null,
    currentUuid: "",
    items: [{
        xtype: "JPanel", layout: {type: "vbox", align: "stretch"}, items: [{
            xtype: "JToolBar",
            overflowY: "hidden",
            frame: !0,
            height: 28,
            padding: "0 0 0 0",
            margin: "1 1 1 1",
            layout: {type: "hbox", align: "stretch"},
            items: [{
                text: Scdp.I18N.PRINT, cid: "printReportBtn", iconCls: "printer_icon_16", handler: function () {
                    this.up("window").doOperation("print")
                }
            }, {
                text: Scdp.I18N.EMAIL, cid: "emailReportBtn", iconCls: "mail_icon_16", handler: function () {
                    this.up("window").doOperation("email")
                }
            }, "-\x3e", {
                xtype: "JDisplay",
                value: Scdp.I18N.REPORT_CURRENT_FORM,
                margin: "3 5 5 5"
            }, {id: "curFormReport", text: "", menu: {items: []}}]
        }, {
            xtype: "JFieldSet", overflowY: "hidden", flex: 1, layout: {type: "hbox", align: "stretch"},
            items: [{xtype: "JFieldSet", overflowY: "hidden", width: 1}, {
                xtype: "JPanel",
                id: "reportPreviewPanel",
                layout: "card",
                border: 1,
                frame: !1,
                flex: 1,
                margin: "0 0 0 1",
                items: []
            }, {xtype: "JFieldSet", overflowY: "hidden", width: 1}]
        }]
    }],
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        var b = Ext.getCmp("reportPreviewPanel", !0), c = Ext.getCmp("curFormReport");
        Ext.suspendLayouts();
        var d = [{title: a.reports.formDesc, template: a.reports.templatePath}];
        Ext.Array.each(a.reports.attach, function (a) {
            d.push({
                title: a.formDesc,
                template: a.templatePath
            })
        });
        Ext.Array.each(a.reports.records, function (e) {
            var i = [];
            Ext.Array.each(d, function (a) {
                i.push({
                    xtype: "JPanel",
                    title: a.title,
                    flex: 1,
                    isLoaded: !1,
                    html: "",
                    reportHtml: '\x3ciframe id\x3d"' + Scdp.StrUtil.getUUID() + '" src\x3d"' + Scdp.getReportUrl(a.template, e) + '" frameborder\x3d"0" width\x3d"100%" height\x3d"100%" onload\x3d"this.contentWindow.queryKey \x3d \'' + e.queryKey + "';\"\x3e\x3c/iframe\x3e"
                })
            });
            var g = function (a) {
                a.isLoaded || (a.update(a.reportHtml), a.isLoaded = !0)
            };
            b.add({
                xtype: "JTab",
                border: 0,
                id: "ReportPreview_" + e.uuid,
                ruuid: e.uuid,
                frame: !1,
                flex: 1,
                margin: "0 0 0 0",
                tabBar: {frame: !0, cls: "header", border: 0, height: 26},
                items: i,
                skipActiveItemsAfterRender: !0,
                listeners: {
                    tabchange: function (a, b) {
                        g(b)
                    }, activate: function (a) {
                        g(a.items.items[0])
                    }
                }
            });
            c.menu.add({
                menuCode: e.uuid, text: e.RP_Title, handler: function () {
                    a.switchReport(this)
                }
            })
        });
        a.switchReport(c.menu.items.items[0]);
        Ext.resumeLayouts(!0)
    },
    switchReport: function (a) {
        var b = Ext.getCmp("reportPreviewPanel", !0), c = Ext.getCmp("curFormReport");
        Ext.Array.each(c.menu.items.items, function (b) {
            if (b == a)return c.setText("\x3cspan style\x3d'font-weight: bold'\x3e\x26lt;" + b.text + "\x26gt;\x3c/span\x3e"), Scdp.tickMenuItem(c.menu, b.menuCode), !1
        });
        Ext.Array.each(b.getLayout().getLayoutItems(), function (c) {
            if (c.ruuid == a.menuCode)return b.getLayout().setActiveItem(c), !1
        });
        this.currentUuid = a.menuCode
    },
    doOperation: function (a) {
        var b = this.currentUuid, c = Ext.Array.findBy(this.reports.records, function (a) {
            return a.uuid == b
        });
        if (Scdp.ObjUtil.isNotEmpty(c))switch (a) {
            case "print":
                Scdp.doSplitPrint(c.queryKey);
                break;
            case "email":
                Scdp.doEmailReport(c.queryKey)
        }
    }
});
Ext.define("Scdp.window.ReportSendWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.REPORT_SEND_WIN,
    modal: !0,
    resizable: !1,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "mail_icon_16",
    layout: "border",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 410,
    width: 600,
    emailData: null,
    emailForm: null,
    postData: null,
    items: [{
        xtype: "JForm", layout: "form", region: "center", flex: 1, id: "reportMailSendForm", items: [{
            xtype: "JEmailText",
            allowBlank: !1,
            fieldLabel: Scdp.I18N.REPORT_SEND_TO,
            id: "toAddresses",
            cid: "toAddresses",
            hasMultiAddress: !0,
            labelAlign: "right"
        }, {
            xtype: "JEmailText",
            fieldLabel: Scdp.I18N.REPORT_SEND_CC,
            id: "ccAddresses",
            cid: "ccAddresses",
            hasMultiAddress: !0,
            labelAlign: "right"
        }, {
            xtype: "JEmailText",
            fieldLabel: Scdp.I18N.REPORT_SEND_BCC,
            id: "bccAddresses",
            cid: "bccAddresses",
            hasMultiAddress: !0,
            labelAlign: "right"
        }, {
            xtype: "JEmailText",
            fieldLabel: Scdp.I18N.REPORT_SEND_REPLY_TO,
            id: "replyToAddresses",
            cid: "replyToAddresses",
            hasMultiAddress: !0,
            labelAlign: "right"
        }, {
            xtype: "JText", fieldLabel: Scdp.I18N.REPORT_SEND_SUBJECT,
            id: "subject", cid: "subject", labelAlign: "right"
        }, {
            xtype: "JCombo",
            allowBlank: !1,
            fieldLabel: Scdp.I18N.REPORT_SEND_ATTACH_FORMAT,
            id: "format",
            cid: "format",
            comboType: "scdp_fmcode",
            codeType: "REPORT_FORMAT",
            fullInfo: !0,
            displayDesc: !0,
            labelAlign: "right"
        }, {
            xtype: "JTextArea",
            allowBlank: !1,
            fieldLabel: Scdp.I18N.REPORT_SEND_CTX,
            id: "msg",
            cid: "msg",
            height: 120,
            labelAlign: "right"
        }]
    }, {
        xtype: "JForm",
        layout: "form",
        region: "south",
        height: 30,
        items: [{xtype: "JDisplay", flex: 1, id: "reportMailSendDisplayInfo", stype: {marginTop: "20px"}}]
    }],
    dockedItems: [{
        xtype: "JToolBar", dock: "bottom", ui: "footer", border: 1, height: 32, items: ["-\x3e", {
            xtype: "JButton",
            cid: "reportSendBtn",
            id: "reportSendBtn",
            text: Scdp.I18N.REPORT_SEND_SEND_BTN,
            iconCls: "ok_btn",
            width: 80,
            listeners: {
                click: function (a) {
                    var b = Ext.getCmp("reportMailSendForm"), c = Ext.getCmp("reportMailSendDisplayInfo");
                    if (b.validate()) {
                        var d = Ext.clone(this.up("window").postData), e = d.emailForm.attachNameMap;
                        d.emailForm = Ext.merge(Scdp.ObjUtil.compactObject(b.gotValue()), {attachNameMap: e});
                        c.setValue(Scdp.I18N.REPORT_SEND_PROCESSING);
                        c.setFieldStyle("color: black");
                        a.setDisabled(!0);
                        Scdp.doAction("common-report-send", d, function (b) {
                            0 == b.resultCode ? (c.setValue(Scdp.I18N.REPORT_SEND_RESULT_SUCCESS + "  MailID: " + b.mailID), c.setFieldStyle("color: green")) : (c.setValue(Scdp.I18N.REPORT_SEND_RESULT_FAILED + " " + b.errorMsg), c.setFieldStyle("color: orangered"));
                            a.setDisabled(!1)
                        }, function () {
                            a.setDisabled(!1)
                        }, !0)
                    }
                }
            }
        }]
    }],
    initComponent: function () {
        this.callParent(arguments);
        var a = this.items.items[0];
        this.postData && this.postData.emailForm ? a.sotValue(this.postData.emailForm) :
            a.getCmp("format").sotValue(Scdp.Const.REPORT_DEFAULT_EMAIL_FORMAT)
    }
});
Ext.define("Scdp.window.getEncryptWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.GET_ENCRYPT_TITLE,
    modal: !1,
    resizable: !1,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "pass_icon_16",
    layout: "border",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 230,
    width: 400,
    items: [{
        xtype: "JForm", layout: "form", region: "center", flex: 1, id: "encryptionStringForm", items: [{
            xtype: "JCombo",
            fieldLabel: Scdp.I18N.GET_ENCRYPT_METHOD,
            id: "method",
            cid: "method",
            displayDesc: !0,
            editable: !1,
            listeners: {
                change: function (a, b) {
                    a.up("JForm").down("JText#key").setDisabled("passHash" ==
                        b)
                }
            }
        }, {
            xtype: "JText",
            fieldLabel: Scdp.I18N.GET_ENCRYPT_KEY,
            emptyText: Scdp.I18N.GET_ENCRYPT_KEY_TIPS,
            id: "key",
            cid: "key"
        }, {
            xtype: "JText",
            allowBlank: !1,
            fieldLabel: Scdp.I18N.GET_ENCRYPT_PLAIN,
            id: "plain",
            cid: "plain",
            maxLength: 50,
            listeners: {
                specialkey: function (a, b) {
                    b.getKey() == Ext.EventObject.ENTER && (Ext.getCmp("getEncBtn").focus(), Ext.getCmp("getEncBtn").fireEvent("click"))
                }
            }
        }, {
            xtype: "JTextArea",
            wrap: !0,
            fieldLabel: Scdp.I18N.GET_ENCRYPT_CIPHER,
            id: "cipher",
            height: 80,
            readOnly: !0,
            fieldCls: "x-form-textarea-wrap",
            grow: !0
        }]
    }],
    dockedItems: [{
        xtype: "JToolBar", dock: "bottom", ui: "footer", border: 1, height: 32, items: ["-\x3e", {
            xtype: "JButton",
            cid: "getEncBtn",
            id: "getEncBtn",
            text: Scdp.I18N.OK_BTN,
            iconCls: "ok_btn",
            width: 80,
            listeners: {
                click: function () {
                    var a = Ext.getCmp("encryptionStringForm");
                    if (a.validate())if (Ext.getCmp("getEncBtn").setDisabled(!0), "passHash" == a.gotValue(!1).method) {
                        var b = a.gotValue(!1).plain;
                        a.items.items[3].setValue(Scdp.CryptUtil.getPassHash(b));
                        Ext.getCmp("getEncBtn").setDisabled(!1)
                    } else Scdp.doAction("common-security-getencrypted",
                        a.gotValue(!1), function (b) {
                            a.items.items[3].setValue(b.cipher);
                            Ext.getCmp("getEncBtn").setDisabled(!1)
                        }, function () {
                            Ext.getCmp("getEncBtn").setDisabled(!1)
                        }, !0, !1)
                }
            }
        }]
    }],
    initComponent: function () {
        this.callParent(arguments);
        var a = this.down("JCombo");
        a.store.loadData([{code: "AES", codedesc: "AES"}, {code: "AES256", codedesc: "AES256"}, {
            code: "passHash",
            codedesc: "Password Hash"
        }]);
        a.sotValue("passHash");
        this.on("show", function () {
            Ext.getCmp("encryptionStringForm").items.items[2].focus()
        })
    }
});
Ext.define("Scdp.window.VerifyWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.VERIFY_WIN_TITLE,
    modal: !0,
    resizable: !1,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "verified_icon",
    userUuid: "",
    verifyType: "",
    target: "",
    closeCallback: null,
    verifyResult: !1,
    layout: "border",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 200,
    width: 400,
    items: [{
        xtype: "JForm", layout: "form", region: "center", flex: 1, id: "verifyForm", items: [{
            xtype: "fieldcontainer", layout: "hbox", items: [{
                xtype: "JText", allowBlank: !1, fieldLabel: Scdp.I18N.VERIFY_MOBILE,
                readOnly: !0, id: "target", cid: "target", flex: 1
            }, {
                xtype: "JButton",
                cid: "verifySentBtn",
                id: "verifySentBtn",
                width: 80,
                margin: "0 0 0 2",
                text: Scdp.I18N.VERIFY_SEND_BTN,
                listeners: {
                    click: function () {
                        var a = this.up("window"), b = this, c = a.down("#displayInfoVerify"), a = {
                            userUuid: a.userUuid,
                            target: Ext.getCmp("target").gotValue(),
                            type: a.verifyType
                        };
                        Scdp.ObjUtil.isEmpty(Ext.getCmp("target").gotValue()) ? (c.setValue(Scdp.I18N.VERIFY_TARGET_EMPTY), c.setFieldStyle("color: orangered")) : (c.setValue(""), b.setDisabled(!0), b.setText(Scdp.I18N.VERIFY_SENDING),
                            Scdp.doAction("sys-verify-send-code", a, function () {
                                c.setValue(Scdp.I18N.VERIFY_SEND_INFO);
                                c.setFieldStyle("color: forestgreen");
                                var a = 60;
                                Ext.TaskManager.start({
                                    run: function () {
                                        a -= 1;
                                        0 < a ? b.setText(Scdp.StrUtil.replaceAll(Scdp.I18N.VERIFY_SEND_BTN_WAIT, "%s", a + "s")) : (b.setText(Scdp.I18N.VERIFY_SEND_BTN), b.setDisabled(!1))
                                    }, interval: 1E3, repeat: 60
                                })
                            }, function () {
                                b.setText(Scdp.I18N.VERIFY_SEND_BTN);
                                b.setDisabled(!1)
                            }, !1, !0))
                    }
                }
            }]
        }, {
            xtype: "JText", allowBlank: !1, fieldLabel: Scdp.I18N.VERIFY_CODE, width: 80, id: "verifyCode",
            cid: "verifyCode", minLength: 4, maxLength: 20
        }]
    }, {
        xtype: "JForm",
        layout: "form",
        region: "south",
        height: 30,
        items: [{xtype: "JDisplay", flex: 1, id: "displayInfoVerify", stype: {marginTop: "20px"}}]
    }],
    dockedItems: [{
        xtype: "JToolBar", dock: "bottom", ui: "footer", border: 1, height: 32, items: ["-\x3e", {
            xtype: "JButton",
            cid: "okBtn",
            id: "verifyBtn",
            text: Scdp.I18N.VERIFY_BTN,
            iconCls: "ok_btn",
            width: 80,
            listeners: {
                click: function () {
                    if (Ext.getCmp("verifyForm").validate()) {
                        var a = this.up("window"), b = a.down("#displayInfoVerify"), c = {
                            userUuid: a.userUuid,
                            target: Ext.getCmp("target").gotValue(),
                            verifyCode: Ext.getCmp("verifyCode").gotValue(),
                            type: a.verifyType
                        };
                        Scdp.doAction("sys-verify-doVerify", c, function (c) {
                            0 == c.resultCode ? (Scdp.MsgUtil.info(Scdp.I18N.VERIFY_SUCCESS), a.verifyResult = !0, a.close()) : (b.setValue(Scdp.I18N.VERIFY_FAIL), b.setFieldStyle("color: orangered"))
                        }, function () {
                            b.setValue(Scdp.I18N.VERIFY_FAIL);
                            b.setFieldStyle("color: orangered")
                        }, !1, !0)
                    }
                }
            }
        }, {
            xtype: "JButton",
            cid: "cancelBtn",
            text: Scdp.I18N.CLOSE_BTN,
            iconCls: "cancel_btn",
            width: 80,
            listeners: {
                click: function () {
                    this.up("window").close()
                }
            }
        }]
    }],
    initComponent: function () {
        this.callParent(arguments);
        Scdp.ObjUtil.isNotEmpty(this.target) && this.down("#target").setValue(this.target);
        Scdp.ObjUtil.isEmpty(this.userUuid) && (this.userUuid = Scdp.CacheUtil.get(Scdp.Const.USER_UUID));
        this.down("#target").setFieldLabel("mail" == this.verifyType ? Scdp.I18N.VERIFY_MAIL : Scdp.I18N.VERIFY_MOBILE);
        this.on("beforeclose", function (a) {
            "function" == typeof a.closeCallback && a.closeCallback(a.verifyResult)
        })
    }
});
Ext.define("Scdp.window.ResetPassWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    title: Scdp.I18N.RESET_PASS_TITLE,
    modal: !0,
    resizable: !1,
    closeAction: "destroy",
    draggable: !0,
    iconCls: "user_pass_reset",
    layout: "border",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 300,
    width: 500,
    items: [{
        xtype: "JTab",
        cid: "resetTabPanel",
        id: "resetTabPanel",
        region: "center",
        flex: 1,
        tabBar: {hidden: !0},
        items: [{
            title: "BasicInfo", layout: "border", items: [{
                xtype: "JForm",
                region: "center",
                cid: "resetPassBasicInfo",
                id: "resetPassBasicInfo",
                layout: {
                    type: "vbox",
                    align: "stretch", defaultMargins: "2"
                },
                items: [{xtype: "JFieldSet", overflowY: "hidden", flex: 5}, {
                    xtype: "JDisplay",
                    value: Scdp.I18N.RESET_PASS_MOBILE_MAIL_TITLE,
                    fieldStyle: {fontSize: "14px", textAlign: "center"}
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 3}, {
                    xtype: "JText",
                    allowBlank: !1,
                    fieldLabel: Scdp.I18N.RESET_PASS_MOBILE_MAIL,
                    id: "target",
                    cid: "target",
                    height: 25,
                    validator: function (a) {
                        return Scdp.StrUtil.isEmail(a) || Scdp.StrUtil.isMobile(a) ? !0 : Scdp.I18N.RESET_PASS_ILLEGAL_TARGET
                    },
                    listeners: {
                        blur: function () {
                            Ext.getCmp("targetRead").sotValue(this.gotValue())
                        },
                        specialkey: function (a, b) {
                            b.getKey() == b.ENTER && this.up("window").down("#captcha").focus()
                        }
                    }
                }, {
                    xtype: "JFieldSet",
                    overflowY: "hidden",
                    border: 0,
                    layout: {type: "hbox", align: "stretch"},
                    items: [{
                        xtype: "JText",
                        allowBlank: !1,
                        fieldLabel: Scdp.I18N.RESET_PASS_CAPTCHA,
                        id: "captcha",
                        cid: "captcha",
                        margin: "5 0 0 0",
                        height: 25,
                        flex: 9,
                        listeners: {
                            specialkey: function (a, b) {
                                b.getKey() == b.ENTER && (b.preventDefault(), this.up("window").down("#nextBtn").fireEvent("click"))
                            }
                        }
                    }, {
                        xtype: "JImg", width: 80, height: 25, cid: "captchaImg", id: "captchaImg",
                        title: Scdp.I18N.RESET_PASS_CAPTCHA_TIP, listeners: {
                            el: {
                                click: function () {
                                    Scdp.doAction("sys-verify-refresh-captcha", {}, function (a) {
                                        Ext.getCmp("captchaImg").setSrc(a.capImg)
                                    }, function () {
                                    }, !1)
                                }
                            }
                        }
                    }]
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 1}, {
                    xtype: "JDisplay",
                    id: "resetPassStep1Info",
                    cid: "resetPassStep1Info",
                    fieldStyle: {fontSize: "14px", textAlign: "center", color: "orangered"}
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 2}]
            }], listeners: {
                activate: function (a) {
                    a.down("#resetPassStep1Info").setValue("")
                }
            },
            validateTab: function (a) {
                var b = this, c = b.down("#resetPassStep1Info"), d = this.up("window").down("JTab");
                if ("back" === a)return !0;
                if (!b.down("#resetPassBasicInfo").validate())return !1;
                var e = !1;
                a = {target: b.down("#target").gotValue(), captcha: b.down("#captcha").gotValue()};
                Ext.getCmp("nextBtn").setDisabled(!0);
                Scdp.doAction("sys-reset-pass-send-verify", a, function (a) {
                    switch (a.result) {
                        case 0:
                            e = !0;
                            Ext.getCmp("resetPassUserUuid").sotValue(a.userUuid);
                            Ext.getCmp("resetPassType").sotValue(a.type);
                            break;
                        case -1:
                            c.setValue(Scdp.I18N.RESET_PASS_ERROR_DUPLICATE);
                            e = !1;
                            Ext.getCmp("target").setValue("");
                            Ext.getCmp("target").focus();
                            break;
                        case -2:
                            c.setValue(Scdp.I18N.RESET_PASS_ERROR_NO_RECORD);
                            e = !1;
                            Ext.getCmp("target").setValue("");
                            Ext.getCmp("target").focus();
                            break;
                        case -3:
                            c.setValue(Scdp.I18N.RESET_PASS_ERROR_NOT_VERIFIED);
                            e = !1;
                            Ext.getCmp("target").setValue("");
                            Ext.getCmp("target").focus();
                            break;
                        case -8:
                            c.setValue(Scdp.I18N.RESET_PASS_ERROR_CAPTCHA), e = !1, Ext.getCmp("captcha").setValue(""), Ext.getCmp("captcha").focus()
                    }
                    e ? d.setActiveTab(d.nextChild(b)) : (Scdp.doAction("sys-verify-refresh-captcha",
                        {}, function (a) {
                            Ext.getCmp("captchaImg").setSrc(a.capImg)
                        }, function () {
                        }, !1), Ext.getCmp("captcha").setValue(""));
                    Ext.getCmp("nextBtn").setDisabled(!1)
                });
                return !1
            }
        }, {
            title: "VerifyCode", layout: "border", items: [{
                xtype: "JForm",
                region: "center",
                cid: "resetPassVerifyInfo",
                id: "resetPassVerifyInfo",
                layout: {type: "vbox", align: "stretch", defaultMargins: "2"},
                items: [{xtype: "JFieldSet", overflowY: "hidden", flex: 5}, {
                    xtype: "JDisplay",
                    value: Scdp.I18N.RESET_PASS_CODE_SEND_INFO,
                    fieldStyle: {fontSize: "14px", textAlign: "center"}
                },
                    {xtype: "JFieldSet", overflowY: "hidden", flex: 3}, {
                        xtype: "JHidden",
                        cid: "resetPassUserUuid",
                        id: "resetPassUserUuid"
                    }, {xtype: "JHidden", cid: "resetPassType", id: "resetPassType"}, {
                        xtype: "JText",
                        allowBlank: !1,
                        fieldLabel: Scdp.I18N.RESET_PASS_MOBILE_MAIL,
                        readOnly: !0,
                        height: 25,
                        id: "targetRead",
                        cid: "targetRead"
                    }, {
                        xtype: "JText",
                        allowBlank: !1,
                        fieldLabel: Scdp.I18N.VERIFY_CODE,
                        id: "verifyCode",
                        cid: "verifyCode",
                        height: 25,
                        minLength: 4,
                        maxLength: 20,
                        listeners: {
                            specialkey: function (a, b) {
                                b.getKey() == b.ENTER && this.up("window").down("#nextBtn").fireEvent("click")
                            }
                        }
                    },
                    {xtype: "JFieldSet", overflowY: "hidden", flex: 1}, {
                        xtype: "JDisplay",
                        id: "resetPassStep2Info",
                        cid: "resetPassStep2Info",
                        fieldStyle: {fontSize: "14px", textAlign: "center", color: "orangered"}
                    }, {xtype: "JFieldSet", overflowY: "hidden", flex: 2}]
            }], listeners: {
                activate: function (a) {
                    a.down("#resetPassStep2Info").setValue("")
                }
            }, validateTab: function (a) {
                var b = this, c = this.up("window").down("JTab");
                if ("back" === a)return !0;
                if (!b.down("#resetPassVerifyInfo").validate())return !1;
                a = {
                    userUuid: b.down("#resetPassUserUuid").gotValue(),
                    target: b.down("#targetRead").gotValue(),
                    verifyCode: b.down("#verifyCode").gotValue(),
                    type: b.down("#resetPassType").gotValue()
                };
                Ext.getCmp("nextBtn").setDisabled(!0);
                Scdp.doAction("sys-verify-doVerify", a, function (a) {
                    0 == a.resultCode && (c.setActiveTab(c.nextChild(b)), Ext.getCmp("nextBtn").setDisabled(!1), Ext.getCmp("backBtn").setDisabled(!1))
                });
                return !1
            }
        }, {
            title: "NewPass", layout: "border", items: [{
                xtype: "JForm",
                region: "center",
                cid: "resetPassNewPassInfo",
                id: "resetPassNewPassInfo",
                layout: {
                    type: "vbox", align: "stretch",
                    defaultMargins: "2"
                },
                items: [{xtype: "JFieldSet", overflowY: "hidden", flex: 5}, {
                    xtype: "JDisplay",
                    value: Scdp.I18N.RESET_PASS_NEW_PASS,
                    fieldStyle: {fontSize: "14px", textAlign: "center"}
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 3}, {
                    xtype: "JText",
                    allowBlank: !1,
                    fieldLabel: Scdp.I18N.NEW_PASS,
                    id: "userNewPass",
                    cid: "userNewPass",
                    height: 25,
                    inputType: "password",
                    emptyText: Scdp.I18N.NEW_PASS_TIPS,
                    validator: function (a) {
                        return !/^(?![^a-zA-Z]+$)(?!\D+$).{6,}$/.test(a) ? Scdp.I18N.PASSWORD_SIMPLE : !0
                    },
                    listeners: {
                        specialkey: function (a,
                                              b) {
                            b.getKey() == Ext.EventObject.ENTER && Ext.getCmp("userNewPassConfirm").focus()
                        }
                    }
                }, {
                    xtype: "JText",
                    allowBlank: !1,
                    fieldLabel: Scdp.I18N.NEW_PASS_CONFIRM,
                    id: "userNewPassConfirm",
                    cid: "userNewPassConfirm",
                    height: 25,
                    inputType: "password",
                    emptyText: Scdp.I18N.NEW_PASS_CONFIRM_TIPS,
                    validator: function (a) {
                        return Ext.getCmp("userNewPass").getValue() != a ? Scdp.I18N.PASS_NOT_MATCH : !0
                    },
                    listeners: {
                        specialkey: function (a, b) {
                            b.getKey() == Ext.EventObject.ENTER && this.up("window").down("#nextBtn").fireEvent("click")
                        }
                    }
                }, {
                    xtype: "JFieldSet",
                    overflowY: "hidden", flex: 1
                }, {
                    xtype: "JDisplay",
                    id: "resetPassStep3Info",
                    cid: "resetPassStep3Info",
                    fieldStyle: {fontSize: "14px", textAlign: "center", color: "orangered"}
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 2}]
            }], listeners: {
                activate: function (a) {
                    a.down("#resetPassStep3Info").setValue("")
                }
            }, validateTab: function (a) {
                var b = this, c = b.down("#resetPassStep3Info"), d = this.up("window").down("JTab");
                if ("back" === a)return !0;
                if (!b.down("#resetPassNewPassInfo").validate())return !1;
                var e = {
                    userUuid: Ext.getCmp("resetPassUserUuid").gotValue(),
                    userNewPass: ""
                };
                Ext.getCmp("nextBtn").setDisabled(!0);
                Scdp.CryptUtil.encryptPass(b.down("#userNewPass").getValue(), function (a) {
                    var g;
                    !1 === a ? (Scdp.CryptUtil.getServerPublicKey(), c.setValue(Scdp.I18N.RSA_EXPIRE_PASSCHANGE), g = !1) : g = !0;
                    !1 == g ? Ext.getCmp("nextBtn").setDisabled(!1) : (e.userNewPass = a, c.setValue(""), Scdp.doAction("sys-user-forgetpass", e, function (a) {
                        0 == a.resultCode && (d.setActiveTab(d.nextChild(b)), Ext.getCmp("nextBtn").setDisabled(!0), Ext.getCmp("backBtn").setDisabled(!0))
                    }))
                });
                return !1
            }
        }, {
            title: "Success",
            layout: "border", items: [{
                xtype: "JForm",
                region: "center",
                cid: "resetPassResultInfo",
                id: "resetPassResultInfo",
                layout: {type: "vbox", align: "stretch"},
                items: [{xtype: "JFieldSet", overflowY: "hidden", flex: 5}, {
                    xtype: "JFieldSet",
                    overflowY: "hidden",
                    border: 0,
                    margin: "0 0 0 30",
                    layout: {type: "hbox", align: "stretch"},
                    items: [{xtype: "JImg", width: 48, height: 48, margin: "0 0 0 30", imgCls: "info_ok_icon_48"}, {
                        xtype: "JDisplay",
                        value: Scdp.I18N.RESET_PASS_SUCCESS,
                        iconCls: "info_ok_icon_48",
                        margin: "10 0 0 10",
                        fieldStyle: {
                            fontSize: "16px",
                            textAlign: "center"
                        }
                    }]
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 5}]
            }], validateTab: function () {
                return !0
            }
        }]
    }],
    dockedItems: [{
        xtype: "JToolBar", dock: "bottom", ui: "footer", border: 1, height: 32, items: ["-\x3e", {
            xtype: "JButton",
            cid: "backBtn",
            id: "backBtn",
            text: Scdp.I18N.RESET_PASS_BACK,
            iconCls: "back_btn",
            disabled: !0,
            hidden: !0,
            width: 80,
            listeners: {
                click: function () {
                    var a = this.up("window").down("JTab"), b = a.prevChild(a.getActiveTab());
                    !1 !== a.getActiveTab().validateTab("back") && (a.setActiveTab(b), b = a.prevChild(b),
                        Ext.getCmp("nextBtn").setDisabled(!1), Ext.getCmp("backBtn").setDisabled(Scdp.ObjUtil.isEmpty(b)))
                }
            }
        }, {
            xtype: "JButton",
            cid: "nextBtn",
            id: "nextBtn",
            text: Scdp.I18N.RESET_PASS_NEXT,
            iconCls: "next_btn",
            iconAlign: "right",
            width: 80,
            listeners: {
                click: function () {
                    var a = this.up("window").down("JTab"), b = a.nextChild(a.getActiveTab());
                    !1 !== a.getActiveTab().validateTab("next") && (a.setActiveTab(b), b = a.nextChild(b), Ext.getCmp("nextBtn").setDisabled(Scdp.ObjUtil.isEmpty(b)), Ext.getCmp("backBtn").setDisabled(Scdp.ObjUtil.isEmpty(b)))
                }
            }
        },
            {
                xtype: "JButton",
                cid: "cancelBtn",
                text: Scdp.I18N.CLOSE_BTN,
                iconCls: "cancel_btn",
                width: 80,
                listeners: {
                    click: function () {
                        this.up("window").close()
                    }
                }
            }]
    }],
    initComponent: function () {
        this.callParent(arguments);
        this.on("show", function () {
            Scdp.CryptUtil.getServerPublicKey();
            Scdp.doAction("sys-verify-get-resetpass-user", {}, function (a) {
                Scdp.CacheUtil.set(Scdp.Const.USER_ID, a.userId);
                Scdp.CacheUtil.set(Scdp.Const.USER_TOKEN, a.userToken);
                Ext.getCmp("captchaImg").setSrc(a.capImg)
            }, function () {
            }, !1, !0)
        })
    }
});
Ext.define("Scdp.window.TableSelectWindow", {
    extend: "Scdp.window.BasePopupWindow",
    frame: !0,
    modal: !0,
    resizable: !1,
    closeAction: "destroy",
    draggable: !0,
    layout: "border",
    bodyBorder: !1,
    bodyPadding: 2,
    height: 600,
    width: 400,
    callBackFn: null,
    items: [],
    dockedItems: [{
        xtype: "JToolBar", dock: "bottom", ui: "footer", border: 1, height: 32, items: ["-\x3e", {
            xtype: "JButton",
            cid: "okBtn",
            id: "passChangeOkBtn",
            text: Scdp.I18N.OK_BTN,
            iconCls: "ok_btn",
            width: 80,
            listeners: {
                click: function () {
                    var a = this.up("window"), b = a.down("JEGrid");
                    "function" == typeof a.callBackFn && a.callBackFn.call(a, b.getSelectedRecords());
                    this.up("window").close()
                }
            }
        }, {
            xtype: "JButton",
            cid: "cancelBtn",
            text: Scdp.I18N.CLOSE_BTN,
            iconCls: "cancel_btn",
            width: 80,
            listeners: {
                click: function () {
                    this.up("window").close()
                }
            }
        }]
    }],
    initComponent: function () {
        var a = Ext.create("Codegenerator.store.CodegeneratorGridStore");
        this.items = [{
            xtype: "JPanel", region: "center", flex: 1, items: [{
                xtype: "JEGrid",
                title: Scdp.I18N.CODEGENE_SOURCE,
                store: a,
                width: 600,
                forceFit: !0,
                withToolbar: !1,
                caseSensitive: !1,
                withSearchBar: !0,
                searchFieldTips: null,
                searchFilterCids: ["tableName"],
                searchBarFullMode: !1,
                withSelMode: !0,
                columns: [{
                    text: Scdp.I18N.CODEGENE_TABLE_NAME,
                    flex: 1,
                    sortable: !0,
                    dataIndex: "tableName",
                    style: {textAlign: "center"}
                }],
                tools: [{
                    type: "refresh", tooltip: Scdp.I18N.CODEGENE_TOOLTIP_FORCE_REFRESH, callback: function (a) {
                        a.getStore().load()
                    }
                }],
                listeners: {
                    afterrender: function (a) {
                        var c = Scdp.CacheUtil.get(Scdp.Const.CACHE_CODEGENE_TABLES);
                        Scdp.ObjUtil.isEmpty(c) ? a.getStore().load() : setTimeout(function () {
                                a.getStore().loadRawData(c)
                            },
                            0)
                    }
                }
            }]
        }];
        this.callParent(arguments)
    }
});
Ext.define("Scdp.container.JFileUploadView", {
    extend: "Scdp.container.JForm",
    alias: ["widget.JFileUploadView"],
    height: 150,
    width: 500,
    layout: "form",
    bodyPadding: "5 10 20 10",
    frame: !1,
    windowIconCls: "temp_icon_16",
    okBtnText: Scdp.I18N.UPLOAD_FILE,
    windowTitle: Scdp.I18N.FILE_UPLOAD,
    fileUploadAction: "common-file-upload",
    items: [{
        xtype: "JFile", fieldLabel: Scdp.I18N.FILE_NAME, cid: "uploadFile", allowBlank: !1, listeners: {
            change: function (a) {
                a = a.gotValue();
                a = Scdp.StrUtil.getLastSplit(a, "\\");
                a = Scdp.StrUtil.replaceNull(Scdp.StrUtil.getLastSplit(a,
                    ".")).toUpperCase();
                this.up("JForm").getCmp("fileType").sotValue(a)
            }
        }
    }, {
        xtype: "JText",
        fieldLabel: Scdp.I18N.FILE_TYPE,
        allowBlank: !1,
        upperCase: !0,
        cid: "fileType"
    }, {xtype: "JTextArea", fieldLabel: Scdp.I18N.REMARK, cid: "fileRemark"}],
    okFunction: function (a) {
        if (!a.validate())return !1;
        var b = {};
        b.fileType = a.getCmp("fileType").gotValue();
        b.fileRemark = a.getCmp("fileRemark").gotValue();
        Scdp.doAction(a.fileUploadAction, b, function () {
            a.up("window").close()
        }, null, null, null, a.getForm())
    },
    cancelFunc: null
});
Ext.define("Scdp.form.IField", {
    enforceMaxLength: !0,
    grow: !1,
    enableKeyEvents: !1,
    maskRe: "",
    regex: "",
    regexText: "",
    selectOnFocus: !0,
    adaptable: !0,
    oldValue: null,
    upperCase: !1,
    allowEdit: !0,
    queryOptFilter: "",
    defaultOpt: "",
    withQuickTips: !1,
    allowRemoveNull: !0,
    registerQuickTips: function () {
        if (this.withQuickTips) {
            var a = this.getRawValue();
            Scdp.ObjUtil.isNotEmpty(a) ? (a = Scdp.StrUtil.replaceFirst(a, this.delimiter, ""), a = Scdp.StrUtil.replaceLast(a, this.delimiter, ""), a = a.split(this.delimiter).join("\x3cbr/\x3e"), Ext.QuickTips.register({
                target: this.el,
                autoHide: !1, text: a
            })) : Ext.QuickTips.unregister(this.el)
        }
    },
    sotValue: function (a, b, c) {
        this.setValue(a);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        c && (this.oldValue = this.gotRawValue());
        b || this.afterSotValue && this.afterSotValue(this)
    },
    gotValue: function () {
        var a = this.getValue();
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    gotRawValue: function () {
        var a = this.getRawValue ? this.getRawValue() : this.getValue();
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    setAdaptable: function (a) {
        this.adaptable =
            a
    },
    sotEditable: function (a, b) {
        b || this.adaptable ? (void 0 === a && (a = !0), this.clearInvalid(), this.validateOnBlur = this.allowEdit = a, this.fireEvent("editablechange", this, a), this.readOnlyAsEditable ? (Scdp.Const.IFIELD_READONLY_STYLE ? this.setReadOnly(!a) : this.multiSelect ? this.addCls("xxx-form-editable-false") : this.setEditable(a), a ? (this.removeCls("xx-form-editable-false"), this.removeCls("xx-form-readonly")) : (this.addCls("xx-form-editable-false"), this.addCls("xx-form-readonly"))) : this instanceof Ext.form.FieldContainer ?
            (this.setReadOnly(!a), a ? this.removeCls("xx-form-readonly") : this.addCls("xx-form-readonly")) : this.setReadOnly(!a)) : this.validateOnBlur = a
    },
    isEditable: function () {
        return this.allowEdit
    },
    isChanged: function () {
        return this.oldValue != this.gotRawValue()
    },
    checkSaved: function (a) {
        Scdp.checkSaved(this, a)
    },
    cascadeLoad: function (a, b) {
        if (Scdp.ObjUtil.isNotEmpty(this.cascadeField))for (var c = this.up("JEGrid"), d = this.up("JForm"), e = this.cascadeField.split(","), f = 0; f < e.length; f++) {
            var g = null, g = Scdp.ObjUtil.isNotEmpty(c) ?
                c.getColumnBydataIndex(e[f]).getEditor() : d.getCmp(e[f]);
            if (Scdp.ObjUtil.isNotEmpty(g) && (a || !0 == g.displayDesc))Scdp.ObjUtil.isNotEmpty(c) ? (c.getCurRecord().set(e[f], null), g.reload(c)) : (g.sotValue(""), g.clearInvalid(), b && g instanceof Scdp.form.JCombo ? !0 == g.filterCanBeBlank ? g.reload(d) : g.store.loadData([]) : g.reload(d))
        }
    },
    getUpForm: function () {
        return this.up("JForm")
    },
    getUpGrid: function () {
        return this.up("JEGrid")
    },
    isInForm: function () {
        return this.isInGrid() ? !1 : this.getUpForm() ? !0 : !1
    },
    isInGrid: function () {
        return this.getUpGrid() ?
            !0 : !1
    },
    getDescCid: function () {
        return this.getUpForm() ? this.cid + "Desc" : (this.dataIndex ? this.dataIndex : this.getUpGrid().prepareEditContext.field) + "Desc"
    },
    replaceHiddenFlag: function (a) {
        a && Ext.Object.each(a, function (b, c) {
            Ext.String.endsWith(b, "_h") && (a[b.substring(0, b.length - 2)] = c, delete a.key)
        });
        return a
    },
    getFilterConditions: function () {
        var a = this, b = a.filterConditions ? Ext.clone(a.filterConditions) : {};
        if (a.filterFields) {
            var c = a.filterFields.split(",");
            Ext.each(c, function (c) {
                c = c.split("|");
                var e = a.getUpForm(),
                    f = a.getUpGrid();
                b[c[1] ? c[1] : c[0]] = a.isInForm() ? e.getCmp(c[0]).gotValue() : f.getCurRecord().get(c[0])
            })
        }
        a.appendFilterConditions && Ext.Object.merge(b, a.appendFilterConditions());
        return b
    },
    mergeValues: function (a, b) {
        var c = this;
        if (-1 < b.indexOf(",")) {
            var d = "";
            Ext.Array.each(b.split(","), function (b) {
                d += (a[[b.trim()]] || "") + c.delimiter
            });
            return d.substr(0, d.length - 1)
        }
        var e = a[[b.trim()]];
        /[-/: T]+/.test(e) && void 0 !== Ext.Date.parse(e, "c") && (e = Scdp.StrUtil.replaceAll(e, "T", " "));
        return e
    },
    initObjEvents: function (a) {
        !1 ==
        this.allowEdit && a.sotEditable(!1, !0);
        a.on("beforerender", function (a) {
            !1 === a.allowBlank && Scdp.ObjUtil.isNotEmpty(a.fieldLabel) && a.setFieldLabel(a.fieldLabel + '\x3cdiv style\x3d"color:red;font-size: 20px;display:inline;margin-left: 2px"\x3e*\x3c/div\x3e');
            a.upperCase && (a.fieldCls = "xx-form-uppercase");
            a.labelSeparator = "";
            a.margin = "0 0 0 0";
            a.validateOnBlur = !0;
            a.validateOnChange = !1
        });
        a.on("render", function (a) {
            try {
                a.getEl().dom.setAttribute("spellcheck", !1)
            } catch (c) {
            }
            return !0
        });
        a.on("focus", function (a) {
            a.oldValue =
                a.gotRawValue();
            a.registerQuickTips()
        });
        a.on("blur", function (a) {
            !a.up("JEGrid") && a.isEditable() && a.isChanged() && a.isValid() && a.cascadeLoad && a.cascadeLoad(!0)
        });
        a.on("specialkey", function (a, c) {
            if (c.getKey() == Ext.EventObject.ENTER && !0 == a.enterQuery)a instanceof Scdp.form.JCombo ? a.isExpanded || this.up("JQueryView").getCmp("queryBtn").fireEvent("click", "simpleQuery") : a instanceof Scdp.form.JQueryField ? Scdp.ObjUtil.isNotEmpty(a.gotValue()) && !a.isChanged() && this.up("JQueryView").getCmp("queryBtn").fireEvent("click",
                "simpleQuery") : this.up("JQueryView").getCmp("queryBtn").fireEvent("click", "simpleQuery"); else if (c.getKey() == Ext.EventObject.ENTER && !0 == a.enterQuickQuery)this.up("JQueryView").getCmp("quickQueryBtn").fireEvent("click"); else if (c.getKey() == Ext.EventObject.ALT && !Scdp.DebugUtil.isProdMode()) {
                var d = a.up("toolbar") || a.up("JToolbar"), e = a.up("JEGrid");
                d ? Scdp.MsgUtil.info("cid:" + a.cid) : e ? "JCombo" == a.xtype ? Scdp.MsgUtil.info("dataIndex:" + e.prepareEditContext.column.dataIndex + "\x3cbr\x3ecomboType:" + a.comboType +
                    "\x3cbr\x3ecodeType:" + a.codeType) : "JQueryField" == a.xtype ? Scdp.MsgUtil.info("dataIndex:" + e.prepareEditContext.column.dataIndex + "\x3cbr\x3econtroller:" + a.controller) : Scdp.MsgUtil.info("dataIndex:" + e.prepareEditContext.column.dataIndex) : "JCombo" == a.xtype ? Scdp.MsgUtil.info("cid:" + a.cid + "\x3cbr\x3ecomboType:" + a.comboType + "\x3cbr\x3ecodeType:" + a.codeType) : "JQueryField" == a.xtype ? Scdp.MsgUtil.info("cid:" + a.cid + "\x3cbr\x3econtroller:" + a.controller) : Scdp.MsgUtil.info("cid:" + a.cid)
            }
        })
    }
});
Ext.define("Scdp.form.JText", {
    extend: "Ext.form.field.Text",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JText"],
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this)
    }
});
Ext.define("Scdp.form.JTextArea", {
    extend: "Ext.form.field.TextArea",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JTextArea"],
    fieldCls: "x-form-textarea-nowrap",
    wrap: !1,
    initComponent: function () {
        this.wrap && (this.fieldCls = "", this.fieldStyle = "white-space: pre-wrap");
        this.callParent(arguments);
        this.initObjEvents(this)
    }
});
Ext.define("Scdp.form.JInt", {
    extend: "Ext.form.field.Number",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JInt"],
    allowDecimals: !1,
    hideTrigger: !1,
    keyNavEnabled: !1,
    mouseWheelEnabled: !1,
    readOnlyAsEditable: !0,
    onSpinUp: function () {
        this.isEditable() && this.callParent(arguments)
    },
    onSpinDown: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this)
    }
});
Ext.define("Scdp.form.JDec", {
    extend: "Ext.form.field.Number",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JDec"],
    allowDecimals: !0,
    decimalPrecision: Scdp.Const.JDEC_DEFAULT_DECIMAL_LENGTH,
    hideTrigger: !1,
    keyNavEnabled: !1,
    mouseWheelEnabled: !1,
    readOnlyAsEditable: !0,
    onSpinUp: function () {
        this.isEditable() && this.callParent(arguments)
    },
    onSpinDown: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        this.decimalSeparator = Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_DECIMAL_SEPARATOR),
            Ext.util.Format.decimalSeparator);
        this.callParent(arguments);
        this.initObjEvents(this)
    },
    setValue: function (a) {
        this.superclass.setValue.call(this, a);
        this.setRawValue(Ext.util.Format.number(a, "0" + this.decimalSeparator + Scdp.StrUtil.getRecur("0", this.decimalPrecision)))
    }
});
Ext.define("Scdp.form.JCur", {
    extend: "Ext.form.field.Number",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JCur"],
    allowDecimals: !0,
    decimalPrecision: Scdp.Const.JDEC_DEFAULT_DECIMAL_LENGTH,
    hideTrigger: !1,
    keyNavEnabled: !1,
    mouseWheelEnabled: !1,
    readOnlyAsEditable: !0,
    onSpinUp: function () {
        this.isEditable() && this.callParent(arguments)
    },
    onSpinDown: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        this.decimalSeparator = Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_DECIMAL_SEPARATOR),
            Ext.util.Format.decimalSeparator);
        this.thousandSeparator = Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_THOUSAND_SEPARATOR), Ext.util.Format.thousandSeparator);
        this.callParent(arguments);
        this.initObjEvents(this)
    },
    setValue: function (a) {
        this.superclass.setValue.call(this, a);
        this.setRawValue(Ext.util.Format.number(a, "0" + this.thousandSeparator + "0" + this.decimalSeparator + Scdp.StrUtil.getRecur("0", this.decimalPrecision)))
    },
    onFocus: function (a) {
        this.setRawValue(Scdp.StrUtil.replaceAll(this.gotRawValue(),
            this.thousandSeparator, ""));
        this.callParent(arguments)
    },
    onBlur: function (a) {
        this.setRawValue(Scdp.StrUtil.replaceAll(this.gotRawValue(), this.thousandSeparator, ""));
        this.callParent(arguments)
    },
    processRawValue: function (a) {
        return Scdp.StrUtil.replaceAll(a, this.thousandSeparator, "")
    }
});
Ext.define("Scdp.form.JCheck", {
    extend: "Ext.form.field.Checkbox",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JCheck"],
    readOnlyCls: "xx-form-readonly",
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this)
    },
    sotValue: function (a, b) {
        Scdp.ObjUtil.isEmpty(a) ? this.setValue(!1) : typeof a === Scdp.Const.DATA_TYPE_BOOLEAN ? this.setValue(a) : 1 === a ? this.setValue(!0) : this.setValue(!1);
        b || this.afterSotValue && this.afterSotValue(this)
    },
    gotValue: function () {
        return this.getValue() ? 1 : 0
    }
});
Ext.define("Scdp.form.JDate", {
    extend: "Ext.form.field.Date",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JDate"],
    enableKeyEvents: !0,
    readOnlyAsEditable: !0,
    format: "Y-m-d",
    startDay: Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_WEEK_START), 0),
    expand: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        a.initObjEvents(a);
        a.on("keyup", function (b, c) {
            if (c.getKey() == Ext.EventObject.BACKSPACE || !Ext.EventObject.isSpecialKey()) {
                var d =
                    a.getRawValue();
                if (Scdp.ObjUtil.isEmpty(d))a.setValue(null); else if (8 == d.length) {
                    var e = d.substr(0, 4), f = d.substr(4, 2), d = d.substr(6, 2);
                    Ext.Date.isValid(e, f, d) && a.setValue(Scdp.DateUtil.newDate(e, f, d))
                }
            }
        })
    },
    sotValue: function (a, b, c) {
        Scdp.ObjUtil.isNotEmpty(a) && Ext.isString(a) && (a = Scdp.DateUtil.parseDate(Scdp.StrUtil.replaceFirst(a, "T", " ")));
        this.setValue(a);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        c && (this.oldValue = this.gotRawValue());
        b || this.afterSotValue && this.afterSotValue(this)
    }
});
Ext.define("Scdp.form.JDatetime", {
    extend: "Ext.form.field.Date",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JDatetime"],
    enableKeyEvents: !0,
    readOnlyAsEditable: !0,
    withSeconds: null,
    format: "Y-m-d G:i:s",
    needTz: !1,
    expand: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        var a = this;
        !0 === a.withSeconds ? a.format = "Y-m-d G:i:s" : !1 === a.withSeconds && (a.format = "Y-m-d G:i");
        a.callParent(arguments);
        a.initObjEvents(a);
        a.on("keyup", function (b, c) {
            if (c.getKey() == Ext.EventObject.BACKSPACE || !Ext.EventObject.isSpecialKey()) {
                var d = a.getRawValue();
                if (Scdp.ObjUtil.isEmpty(d))a.setValue(null); else if (8 == d.length) {
                    var e = d.substr(0, 4), f = d.substr(4, 2), d = d.substr(6, 2);
                    Ext.Date.isValid(e, f, d) && a.setValue(Scdp.DateUtil.newDate(e, f, d))
                }
            }
        })
    },
    sotValue: function (a, b, c) {
        Scdp.ObjUtil.isNotEmpty(a) && Ext.isString(a) && (a = Scdp.DateUtil.parseDate(Scdp.StrUtil.replaceFirst(a, "T", " ")));
        if (this.needTz && Scdp.ObjUtil.isNotEmpty(a)) {
            var d = a.getTime();
            a = 6E4 * a.getTimezoneOffset();
            a = new Date(d - a)
        }
        this.setValue(a);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        c && (this.oldValue = this.gotRawValue());
        b || this.afterSotValue && this.afterSotValue(this)
    },
    gotValue: function () {
        var a = this.getValue();
        if (this.needTz && Scdp.ObjUtil.isNotEmpty(a)) {
            var b = a.getTime(), a = 6E4 * a.getTimezoneOffset();
            return new Date(b + a)
        }
        return a
    }
});
Ext.define("Scdp.form.JTime", {
    extend: "Ext.form.field.Time",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JTime"],
    readOnlyAsEditable: !0,
    format: "G:i:s",
    increment: 30,
    pickerMaxHeight: 180,
    withSeconds: !0,
    emptyText: "____ : ____ : ____",
    expand: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        !0 === this.withSeconds ? (this.format = "G:i:s", this.emptyText = "____ : ____ : ____") : (this.format = "G:i", this.emptyText = "____ : ____");
        this.callParent(arguments);
        this.initObjEvents(this)
    },
    sotValue: function (a,
                        b) {
        Scdp.ObjUtil.isNotEmpty(a) && (a = Scdp.DateUtil.parseDate("2000-01-01 " + a));
        this.setValue(a);
        b || this.afterSotValue && this.afterSotValue(this)
    },
    gotValue: function () {
        return !0 === this.withSeconds ? Ext.util.Format.date(this.getValue(), "G:i:s") : Ext.util.Format.date(this.getValue(), "G:i")
    }
});
Ext.define("Scdp.form.JHidden", {
    extend: "Ext.form.field.Hidden",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JHidden"],
    hidden: !0,
    initComponent: function () {
        this.callParent(arguments)
    }
});
Ext.define("Scdp.form.JHtml", {
    extend: "Ext.form.HtmlEditor",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JHtml"],
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this)
    }
});
Ext.define("Scdp.form.JCombo", {
    extend: "Ext.form.field.ComboBox",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JCombo"],
    matchFieldWidth: !1,
    valueField: "code",
    displayDesc: !1,
    filterIgnoreCase: !0,
    multiSelect: !1,
    splitMultiValue: !0,
    delimiter: "|",
    fullInfo: !1,
    queryMode: "local",
    forceSelection: !1,
    typeAhead: !1,
    minChars: 1,
    filterFields: "",
    vtype: "comboxDataExist",
    pickerMaxHeight: 300,
    pickerMinWidth: 180,
    readOnlyAsEditable: !0,
    noCache: !1,
    filterCanBeBlank: !1,
    expand: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        var a = this;
        a.displayField = !0 == a.displayDesc ? "codedesc" : "code";
        !0 == a.multiSelect && (a.vtype = "", a.setEditable(!1), a.addCls("xxx-form-editable-false"), a.trigger1Cls = Ext.baseCSSPrefix + "form-clear-trigger", a.trigger2Cls = Ext.baseCSSPrefix + "form-trigger", a.onTrigger1Click = function () {
            a.isEditable() && this.sotValue(null)
        });
        a.listConfig = {
            emptyText: Scdp.I18N.COMBOX_DROP_EMPTY_TEXT,
            maxHeight: a.pickerMaxHeight,
            minWidth: a.pickerMinWidth,
            getInnerTpl: function (a) {
                return this.up("JCombo").fullInfo ?
                    !0 == this.up("JCombo").displayDesc ? "{codedesc}\x26nbsp;({code})" : "{code}\x26nbsp;({codedesc})" : "{" + a + "}"
            }
        };
        "string" == typeof a.store && Scdp.ObjUtil.isNotEmpty(a.store) ? a.store = Ext.widget(a.store, {storeId: Scdp.StrUtil.getUUID()}) : (!0 == a.displayDesc || !0 == a.multiSelect) && Scdp.ObjUtil.isNotEmpty(a.comboType) && Scdp.ObjUtil.isEmpty(a.filterFields) ? a.refreshStore() : Ext.isObject(a.store) || (a.store = Ext.widget("JComboStore", {storeId: Scdp.StrUtil.getUUID()}));
        if (a.noCache) {
            var b = a.filterMap || {}, c = {};
            c.comboType =
                Scdp.StrUtil.replaceNull(a.comboType);
            c.codeType = Scdp.StrUtil.replaceNull(a.codeType);
            c.menuCode = Scdp.StrUtil.replaceNull(a.menuCode);
            c.filterMap = b || {};
            Scdp.StrUtil.getMd5(Ext.encode(c));
            b = Scdp.getComboStoreDate(a.comboType, a.codeType, a.menuCode, b);
            a.store.loadData(b)
        }
        a.callParent(arguments);
        a.initObjEvents(a);
        a.on("focus", function (b) {
            if (!b.up("JEGrid") && b.isEditable() && Scdp.ObjUtil.isEmpty(b.getStore().data.items))if (Scdp.ObjUtil.isNotEmpty(b.comboType) && Scdp.ObjUtil.isEmpty(b.filterFields))a.refreshStore();
            else if (Scdp.ObjUtil.isNotEmpty(b.comboType) && Scdp.ObjUtil.isNotEmpty(b.filterFields)) {
                b = this.up("JEGrid");
                var c = this.up("JForm");
                Scdp.ObjUtil.isNotEmpty(b) ? a.reload(b, b.prepareEditContext.record) : a.reload(c)
            }
        });
        a.on("blur", function (b) {
            b.isEditable() && (b.isChanged() && b.isValid()) && a.refreshTarget(b)
        })
    },
    sotValue: function (a, b) {
        var c = a;
        this.multiSelect && Scdp.ObjUtil.isNotEmpty(c) && (0 == c.indexOf(this.delimiter) && (c = Scdp.StrUtil.replaceFirst(c, this.delimiter, "")), c.lastIndexOf(this.delimiter) == c.length -
        1 && (c = Scdp.StrUtil.replaceLast(c, this.delimiter, "")), c = c.split(this.delimiter));
        this.setValue(c ? c : null);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        b || this.afterSotValue && this.afterSotValue(this)
    },
    gotValue: function () {
        if (this.multiSelect) {
            var a = this.getValue().join(this.delimiter);
            Scdp.ObjUtil.isNotEmpty(a) && (Ext.String.startsWith(a, this.delimiter) || (a = this.delimiter + a), Ext.String.endsWith(a, this.delimiter) || (a += this.delimiter));
            return a
        }
        return this.getValue()
    },
    refreshStore: function () {
        var a = this.filterMap ||
            {}, b = {};
        b.comboType = Scdp.StrUtil.replaceNull(this.comboType);
        b.codeType = Scdp.StrUtil.replaceNull(this.codeType);
        b.menuCode = Scdp.StrUtil.replaceNull(this.menuCode);
        b.filterMap = this.filterMap || {};
        b = Scdp.StrUtil.getMd5(Ext.encode(b));
        a = Scdp.getComboStoreDate(this.comboType, this.codeType, this.menuCode, a);
        this.store = Ext.StoreManager.lookup(b);
        Scdp.ObjUtil.isEmpty(this.store) ? (Scdp.DebugUtil.logInfo("Cache Key:" + b + " Store init!"), this.store = Ext.widget("JComboStore", {
            storeId: b,
            data: a
        })) : this.store.loadData(a)
    },
    refreshTarget: function (a) {
        var b = a.gotValue();
        if (Scdp.ObjUtil.isNotEmpty(a.target)) {
            var c = a.target.split(",");
            Ext.each(c, function (c) {
                c = c.split("|");
                var d = a.up("JForm").query("[cid\x3d" + c[0] + "]")[0], g = a.store.findRecord("code", b, 0, !1, !0, !0);
                Scdp.ObjUtil.isNotEmpty(d) && (Scdp.ObjUtil.isNotEmpty(g) ? (g = g.data, Scdp.ObjUtil.isNotEmpty(c[1]) ? d.sotValue(g[c[1]]) : d.sotValue(g.codedesc)) : d.sotValue(null))
            })
        }
        if (Scdp.ObjUtil.isNotEmpty(a.targetCols)) {
            var c = a.targetCols.split(","), d = a.up("JEGrid").getSelectionModel().getSelection()[0];
            Ext.each(c, function (c) {
                c = c.split("|");
                var f = a.store.findRecord("code", b, 0, !1, !0, !0);
                Scdp.ObjUtil.isNotEmpty(f) ? (f = f.data, Scdp.ObjUtil.isNotEmpty(c[1]) ? d.set(c[0], f[c[1]]) : d.set(c[0], f.codedesc)) : d.set(c[0], null)
            })
        }
    },
    reload: function (a, b) {
        var c = this.filterMap || {};
        if (this.filterFields) {
            var d = this.filterFields.split(",");
            Ext.each(d, function (d) {
                d = d.split("|");
                var f = null, f = a instanceof Scdp.container.JForm ? a.getCmp(d[0]).gotValue() : b ? b.get(d[0]) : a.getCurRecord().get(d[0]), f = Scdp.StrUtil.replaceNull(f);
                Scdp.ObjUtil.isNotEmpty(d[1]) ? c[d[1]] = f : c[d[0]] = f
            });
            this.store.loadData(Scdp.getComboStoreDate(this.comboType, this.codeType, this.menuCode, c))
        }
    }
});
Ext.define("Scdp.form.JGridCombo", {
    extend: "Ext.form.field.ComboBox",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JGridCombo"],
    matchFieldWidth: !1,
    displayDesc: !1,
    filterIgnoreCase: !0,
    multiSelect: !1,
    delimiter: "|",
    fullInfo: !1,
    queryMode: "local",
    forceSelection: !1,
    typeAhead: !1,
    minChars: 999,
    gridWidth: 520,
    pageSize: Scdp.Const.GRID_EVERY_PAGE_SHOW_RECORDS_DEFAULT,
    queryAction: "common-crud-query",
    expand: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        var a = this, b = {};
        b.modulePath =
            a.modulePath;
        b.layoutFile = a.layoutFile;
        b.langId = Scdp.getSysConfig("locale_id");
        var c = Ext.encode(b), d = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT, c, !1, !0);
        Scdp.DebugUtil.isProdMode() || (d = null);
        if (Scdp.ObjUtil.isEmpty(d)) {
            d = Scdp.doAction("common-query-layout-load", b, null, null, !0, !1);
            if (!d.success)return;
            Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT, c, d, !1, !0)
        }
        var e = [], f = [];
        f.push({text: "", xtype: "rownumberer", width: 35});
        Ext.Array.each(d.results, function (a) {
            e.push(a.dataIndex.trim());
            a.menuDisabled = !0;
            f.push(a)
        });
        a.store = Ext.create("Ext.data.Store", {
            fields: e,
            autoLoad: !1,
            remoteSort: !0,
            pageSize: a.pageSize,
            proxy: {
                type: "ajax",
                url: Scdp.Const.JSON_ACTION,
                reader: {type: "json", root: "root", totalProperty: "totalProperty"}
            },
            listeners: {
                load: function () {
                    a.picker.focus();
                    0 < a.picker.getStore().count() ? a.picker.setCurRecord(0) : a.focus()
                }
            }
        });
        a.columns = f;
        a.callParent(arguments);
        a.initObjEvents(a);
        a.on("change", function (a, b) {
            if (Scdp.ObjUtil.isNotEmpty(a.target)) {
                var c = a.ownerCt.query("[cid\x3d" + a.target +
                    "]")[0], d = a.store.findRecord("code", b, 0, !1, !0, !0);
                Scdp.ObjUtil.isNotEmpty(d) && c.sotValue(d.data.codedesc)
            }
        })
    },
    afterQuery: function () {
        return !1
    },
    syncSelection: function () {
        return !1
    },
    findRecordByValue: function () {
        return !1
    },
    getValue: function () {
        var a = this.picker, b = this.gotRawValue(), c = this.value;
        this.getDisplayValue() !== b ? (c = b, this.value = this.displayTplData = this.valueModels = null, a && (this.ignoreSelection++, this.ignoreSelection--)) : (c = b, this.value = this.displayTplData = this.valueModels = null);
        return c
    },
    createPicker: function () {
        var a =
            this, b = Ext.widget("JQGrid", {
            store: a.store,
            columns: a.columns,
            frame: !0,
            selModel: {mode: a.multiSelect ? "SIMPLE" : "SINGLE"},
            floating: !0,
            hidden: !0,
            width: a.gridWidth,
            columnLines: !0,
            focusOnToFront: !1,
            listeners: {
                cellkeydown: function (c, d, e, f, g, h, l) {
                    if (l.getKey() == Ext.EventObject.ENTER)a.onItemClick(b, b.getSelectionModel().getSelection()[0])
                }
            }
        });
        a.mon(b, {itemclick: a.onItemClick, scope: a});
        return this.picker = b
    },
    doAutoSelect: function () {
        return !1
    },
    onTriggerClick: function () {
        this.expand()
    },
    onItemClick: function (a, b) {
        var c =
            this.picker.getSelectionModel().getSelection(), d = this.valueField;
        !this.multiSelect && c.length && b.get(d) === c[0].get(d) && (this.setRawValue(c[0].get(d)), this.collapse(), this.focus(!1, 50))
    },
    onExpand: function () {
        var a = this, b = a.gotValue();
        if (Scdp.ObjUtil.isEmpty(b))return a.collapse(), Scdp.MsgUtil.info(Scdp.I18N.INPUT_SEARCH_CRITERIA, function () {
            a.focus(!1, 50)
        }), !1;
        var c = a.getPicker(), d = c.getStore(), e = {};
        e[a.valueField] = b;
        Scdp.doCommonQuery(a.queryAction, e, !0, c, a.modulePath, a.layoutFile, null, function () {
            return 0 ==
            d.getCount() ? (a.setRawValue(b), !1) : !0
        }, !0);
        a.inputEl.focus()
    }
});
Ext.define("Scdp.form.JTreeCombo", {
    extend: "Ext.form.field.ComboBox",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JTreeCombo"],
    margin: "0 0 0 0",
    matchFieldWidth: !1,
    labelSeparator: "",
    validateOnBlur: !0,
    validateOnChange: !1,
    displayDesc: !1,
    filterIgnoreCase: !0,
    multiSelect: !1,
    delimiter: "|",
    fullInfo: !1,
    queryMode: "local",
    forceSelection: !1,
    typeAhead: !1,
    minChars: 999,
    gridWidth: 520,
    queryAction: "common-crud-query",
    expand: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        var a = this,
            b = {};
        b.modulePath = a.modulePath;
        b.layoutFile = a.layoutFile;
        b.langId = Scdp.getSysConfig("locale_id");
        var c = Ext.encode(b), d = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT, c, !1, !0);
        Scdp.DebugUtil.isProdMode() || (d = null);
        if (Scdp.ObjUtil.isEmpty(d)) {
            d = Scdp.doAction("common-query-layout-load", b, null, null, !0, !1);
            if (!d.success)return;
            Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT, c, d, !1, !0)
        }
        var e = [], f = [];
        f.push({text: "", xtype: "rownumberer", width: 35});
        Ext.Array.each(d.results, function (a) {
            e.push(a.dataIndex.trim());
            a.menuDisabled = !0;
            f.push(a)
        });
        a.store = Ext.create("Ext.data.Store", {
            fields: e,
            autoLoad: !1,
            remoteSort: !0,
            pageSize: Scdp.Const.GRID_EVERY_PAGE_SHOW_RECORDS_DEFAULT,
            proxy: {
                type: "ajax",
                url: Scdp.Const.JSON_ACTION,
                reader: {type: "json", root: "root", totalProperty: "totalProperty"}
            },
            listeners: {
                load: function () {
                    a.picker.focus();
                    0 < a.picker.getStore().count() ? a.picker.setCurRecord(0) : a.focus()
                }
            }
        });
        a.columns = f;
        a.callParent(arguments);
        a.initObjEvents(a);
        a.on("change", function (a, b) {
            if (Scdp.ObjUtil.isNotEmpty(a.target)) {
                var c =
                    a.ownerCt.query("[cid\x3d" + a.target + "]")[0], d = a.store.findRecord("code", b, 0, !1, !0, !0);
                Scdp.ObjUtil.isNotEmpty(d) && c.sotValue(d.data.codedesc)
            }
        })
    },
    afterQuery: function () {
        return !1
    },
    syncSelection: function () {
        return !1
    },
    getValue: function () {
        var a = this.picker, b = this.gotRawValue(), c = this.value;
        this.getDisplayValue() !== b && (c = b, this.value = this.displayTplData = this.valueModels = null, a && (this.ignoreSelection++, this.ignoreSelection--));
        return c
    },
    createPicker: function () {
        var a = this, b = Ext.widget("JQGrid", {
            store: a.store,
            columns: a.columns,
            frame: !0,
            selModel: {mode: a.multiSelect ? "SIMPLE" : "SINGLE"},
            floating: !0,
            hidden: !0,
            width: a.gridWidth,
            columnLines: !0,
            focusOnToFront: !1,
            listeners: {
                cellkeydown: function (c, d, e, f, g, h, l) {
                    if (l.getKey() == Ext.EventObject.ENTER)a.onItemClick(b, b.getSelectionModel().getSelection()[0])
                }
            }
        });
        a.mon(b, {itemclick: a.onItemClick, scope: a});
        return this.picker = b
    },
    doAutoSelect: function () {
        return !1
    },
    onTriggerClick: function () {
        this.expand()
    },
    onItemClick: function (a, b) {
        var c = this.picker.getSelectionModel().getSelection(),
            d = this.valueField;
        !this.multiSelect && c.length && b.get(d) === c[0].get(d) && (this.setRawValue(c[0].get(d)), this.collapse(), this.focus(!1, 50))
    },
    onExpand: function () {
        var a = this, b = a.gotValue();
        if (Scdp.ObjUtil.isEmpty(b))return a.collapse(), Scdp.MsgUtil.info(Scdp.I18N.INPUT_SEARCH_CRITERIA, function () {
            a.focus(!1, 50)
        }), !1;
        var c = a.getPicker(), d = c.getStore(), e = {};
        e[a.valueField] = b;
        Scdp.doCommonQuery(a.queryAction, e, !0, c, a.modulePath, a.layoutFile, null, function () {
                return 0 == d.getCount() ? (a.setRawValue(b), !1) : !0
            },
            !0);
        a.inputEl.focus()
    }
});
Ext.define("Scdp.form.JSearchField", {
    extend: "Ext.form.field.Trigger",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JSearchField"],
    trigger1Cls: Ext.baseCSSPrefix + "form-clear-trigger",
    trigger2Cls: Ext.baseCSSPrefix + "form-search-trigger",
    multiSelect: !1,
    callbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    descField: "",
    codeField: "",
    delimiter: "|",
    defaultField: null,
    menuCode: "",
    readOnlyAsEditable: !0,
    isPopup: !1,
    isNotExist: !1,
    initComponent: function () {
        var a = this;
        !0 == a.multiSelect && (a.setEditable(!1), a.addCls("xxx-form-editable-false"));
        a.callParent(arguments);
        a.initObjEvents(a);
        a.on("specialkey", function (a, c) {
            (c.getKey() == Ext.EventObject.ENTER || c.getKey() == Ext.EventObject.DOWN) && this.isEditable() && this.popupSearchWindow()
        });
        a.on("blur", function (b) {
            if (a.defaultField && !a.isPopup && b.isEditable() && b.isChanged())if (Scdp.ObjUtil.isNotEmpty(b.gotValue())) {
                b.isNotExist = !1;
                var c = a.getMatchedRecord();
                1 == c.IS_MATCHED ? a.up("JEGrid") ? a.setRecord(c) : Ext.Array.each(a.refer, function (b) {
                    var e = a.up().getCmp(b.refField);
                    e && e.sotValue(a.mergeValues(c,
                        b.valueField))
                }) : (b.isNotExist = !0, b.onTrigger1Click(), b.markInvalid(Scdp.I18N.COMBOX_DATA_EXIST_VALIDATE))
            } else b.onTrigger1Click()
        });
        a.on("focus", function (a) {
            a.isNotExist = !1
        })
    },
    onTrigger1Click: function () {
        var a = this;
        if (a.isEditable())if (!0 == a.multiSelect && a.clearFn)a.clearFn(); else {
            if (a.up("JEGrid")) {
                var b = a.up("JEGrid").getSelectionModel().getSelection()[0];
                b.beginEdit();
                Ext.Array.each(a.refer, function (a) {
                    b.set(a.refField, null)
                });
                b.endEdit()
            } else Ext.Array.each(a.refer, function (b) {
                (b = a.up().getCmp(b.refField)) &&
                b.sotValue("")
            });
            this.sotValue("")
        }
    },
    onTrigger2Click: function () {
        this.isEditable() && this.popupSearchWindow()
    },
    setRecord: function (a) {
        var b = this, c = b.up("JEGrid").getSelectionModel().getSelection()[0];
        c.beginEdit();
        Ext.Array.each(b.refer, function (d) {
            c.set(d.refField, b.mergeValues(a, d.valueField))
        });
        c.endEdit()
    },
    popupSearchWindow: function () {
        var a = this, b;
        a.isPopup = !0;
        var c = Ext.create(a.controller), d = a.multiSelect ? "MULTI" : "SINGLE", e = !a.multiSelect, f = !a.multiSelect;
        c.menuCode = a.menuCode;
        d = Scdp.openNewWinByController(c,
            function (c, d) {
                a.isPopup = !1;
                if (d)return a.focus(), a.oldValue = null, !0;
                if ("function" == typeof a.callbackFn)return a.callbackFn(a, c);
                var e = c.getCmp("resultPanel");
                if (a.multiSelect) {
                    b = e.getSelectionModel().getSelection();
                    if (0 == b.length) {
                        Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT);
                        return
                    }
                    a.up("JEGrid") ? a.setRecord(e.getSelectionModel().getLastSelected().raw) : Ext.Array.each(a.refer, function (c) {
                        var d;
                        if (1 == b.length)d = a.mergeValues(b[0].raw, c.valueField); else {
                            d = "";
                            for (var e = 0; e < b.length; e++) {
                                var g = b[e];
                                d = e < b.length - 1 ? d + (a.mergeValues(g.raw, c.valueField) + a.delimiter) : d + a.mergeValues(g.raw, c.valueField)
                            }
                        }
                        (c = a.up().getCmp(c.refField)) && c.sotValue(d)
                    })
                } else {
                    b = e.getSelectionModel().getLastSelected();
                    if (Scdp.ObjUtil.isEmpty(b)) {
                        Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT);
                        return
                    }
                    a.up("JEGrid") ? a.setRecord(b.raw) : Ext.Array.each(a.refer, function (c) {
                        var d = a.up().getCmp(c.refField);
                        d && d.sotValue(a.mergeValues(b.raw, c.valueField))
                    })
                }
                a.focus();
                "function" == typeof a.afterCallbackFn && a.afterCallbackFn(c);
                return !0
            },
            "temp_icon_16", Scdp.I18N.WINDOW_RECORDS_SELECT, Scdp.I18N.SELECT_BTN, !0, d, e, f, null, !1);
        if (this.defaultField) {
            var e = this.defaultField.split(","), g = this.up("JEGrid"), h = this.up("JForm");
            Ext.each(e, function (a) {
                a = a.split("|");
                var b = null, b = g instanceof Scdp.grid.JEGrid ? g.getCurRecord().get(a[0]) : h.getCmp(a[0]).gotValue(), b = Scdp.StrUtil.replaceNull(b);
                Scdp.ObjUtil.isNotEmpty(a[1]) ? c.view.getCmp(a[1]).sotValue(b) : c.view.getCmp(a[0]).sotValue(b);
                c.view.getCmp("queryBtn").focus();
                c.view.getCmp("queryBtn").fireEvent("click")
            })
        }
        "function" == typeof a.afterWinShowFn && a.afterWinShowFn(a, d)
    },
    getMatchedRecord: function () {
        var a = this.gotValue();
        if (Scdp.ObjUtil.isNotEmpty(this.defaultField)) {
            var b = this.defaultField.split(",")[0];
            if (Scdp.ObjUtil.isNotEmpty(b))var c = b.split("|");
            b = {};
            Scdp.ObjUtil.isNotEmpty(c[1]) ? b[c[1]] = a : b[c[0]] = a;
            a = Ext.create(this.controller);
            c = Ext.create(a.viewClass, {nullObject: !0});
            return Scdp.doAction(a.queryAction, {
                    modulePath: c.modulePath,
                    layoutFile: c.queryLayoutFile,
                    queryConditions: b,
                    isAccurate: !0,
                    ignoreCase: !1
                }, null, null,
                !0, !1)
        }
    }
});
Ext.define("Scdp.form.JQueryField", {
    extend: "Ext.form.field.Trigger",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JQueryField"],
    multiSelect: !1,
    splitMultiValue: !0,
    callbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    delimiter: "|",
    defaultFields: null,
    menuCode: "",
    readOnlyAsEditable: !0,
    isPopup: !1,
    displayDesc: !1,
    valueField: "code",
    descField: "codedesc",
    codeValue: "",
    filterConditions: null,
    initComponent: function () {
        var a = this;
        !0 == a.multiSelect ? (a.setEditable(!1), a.addCls("xxx-form-editable-false"), a.trigger1Cls =
            Ext.baseCSSPrefix + "form-clear-trigger", a.trigger2Cls = Ext.baseCSSPrefix + "form-search-trigger") : a.triggerCls = Ext.baseCSSPrefix + "form-search-trigger";
        a.callParent(arguments);
        a.initObjEvents(a);
        a.on("blur", function () {
            a.isEditable() && (a.isChanged() && !a.isPopup) && a.putValue(a.gotRawValue(), !1, !1)
        });
        a.on("specialkey", function (a, c) {
            if (c.getKey() == Ext.EventObject.ENTER && this.isEditable())if (Scdp.ObjUtil.isEmpty(this.gotRawValue()))this.onTrigger2Click(); else this.putValue(this.gotRawValue(), !1, !0, !1);
            if (c.getKey() ==
                Ext.EventObject.DOWN)this.onTrigger2Click()
        })
    },
    sotValue: function (a, b) {
        this.codeValue = a;
        this.setValue(a);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        b || this.afterSotValue && this.afterSotValue(this)
    },
    setValue: function (a) {
        this.codeValue = a;
        this.setRawValue(a);
        if (this.displayDesc && Scdp.ObjUtil.isNotEmpty(a))if (this.isInForm())a = this.getUpForm().getCmp(this.getDescCid()), Scdp.ObjUtil.isNotEmpty(a) && this.setRawValue(a.gotValue()); else if (this.isInGrid()) {
            a = this.getUpGrid();
            var b = a.prepareEditContext.record;
            this.dataIndex = a.prepareEditContext.field;
            this.setRawValue(b.get(a.prepareEditContext.field + "Desc"))
        }
    },
    gotValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    getValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    putValue: function (a, b, c, d) {
        var e = this;
        !1 !== d && (d = !0);
        void 0 === b && (b = !0);
        if (Scdp.ObjUtil.isEmpty(a)) {
            if (e.isInForm()) {
                var f = e.getUpForm();
                c = f.getCmp(e.getDescCid());
                Scdp.ObjUtil.isNotEmpty(c) &&
                c.sotValue(null);
                e.sotValue(null);
                Ext.Array.each(e.refer, function (a) {
                    (a = f.getCmp(a.refField)) && a.sotValue(null)
                })
            } else {
                c = e.getUpGrid();
                a = c.prepareEditContext.record;
                a.set(e.getDescCid(), null);
                a.set(e.dataIndex ? e.dataIndex : c.prepareEditContext.field, null);
                e.sotValue(null);
                var g = c.getCurRecord();
                g.beginEdit();
                Ext.Array.each(e.refer, function (a) {
                    g.set(a.refField, null)
                });
                g.endEdit()
            }
            "function" == typeof e.afterCallbackFn && e.afterCallbackFn()
        } else if (b = e.getMatchedRecord(a, b, d), a = b.matchedRecord, b = b.matchedField,
                Scdp.ObjUtil.isNotEmpty(a)) {
            var h = a[0];
            e.isInForm() ? (f = e.getUpForm(), c = f.getCmp(e.getDescCid()), Scdp.ObjUtil.isNotEmpty(c) && c.sotValue(h[e.descField]), e.sotValue(h[e.valueField]), e.oldValue = e.gotRawValue(), Ext.Array.each(e.refer, function (a) {
                var b = f.getCmp(a.refField);
                b && (b.isXType("JQueryField") || b.isXType("JTreeField") || b.isXType("JGridField") || b.isXType("JComboTreeField")) ? b.putValue(e.mergeValues(h, a.valueField)) : b && b.sotValue(e.mergeValues(h, a.valueField))
            })) : (c = e.getUpGrid(), a = c.prepareEditContext.record,
                a.set(e.getDescCid(), h[e.descField]), a.set(e.dataIndex ? e.dataIndex : c.prepareEditContext.field, h[e.valueField]), e.sotValue(h[e.valueField]), e.oldValue = e.gotRawValue(), g = c.getCurRecord(), g.beginEdit(), Ext.Array.each(e.refer, function (a) {
                g.set(a.refField, e.mergeValues(h, a.valueField))
            }), g.endEdit());
            "function" == typeof e.afterCallbackFn && e.afterCallbackFn()
        } else c ? e.popupSearchWindow(b) : (e.isInForm() && (f = e.getUpForm(), c = f.getCmp(e.getDescCid()), Scdp.ObjUtil.isNotEmpty(c) && c.sotValue(null), e.sotValue(null),
            e.markInvalid(Scdp.I18N.COMBOX_DATA_EXIST_VALIDATE)), "function" == typeof e.afterCallbackFn && e.afterCallbackFn())
    },
    onTrigger1Click: function () {
        this.onTrigger2Click()
    },
    onTrigger2Click: function () {
        this.isEditable() && this.popupSearchWindow()
    },
    getMatchedRecord: function (a, b, c) {
        var d = this, e = {}, f = {}, g = d.replaceHiddenFlag(d.getFilterConditions());
        if (Scdp.ObjUtil.isNotEmpty(this.defaultFields)) {
            var h = this.defaultFields.split("|");
            b && (h = [d.valueField]);
            Ext.each(h, function (b) {
                f[b] = a;
                var h = Ext.create(d.controller),
                    i = Ext.create(h.viewClass, {nullObject: !0}), h = Scdp.doAction(h.queryAction, {
                        modulePath: i.modulePath,
                        layoutFile: i.queryLayoutFile,
                        queryConditions: f,
                        queryExtraParams: g,
                        isAccurate: c,
                        isUniqueQuery: !0,
                        ignoreCase: !1
                    }, null, null, !0, !1);
                delete f[b];
                i = h.totalProperty;
                if (1 == i)return e.matchedRecord = h.root, e.matchedField = b, !1;
                if (1 < i)return e.matchedField = b, !1
            })
        }
        return e
    },
    popupSearchWindow: function (a) {
        var b = this, c;
        b.isPopup = !0;
        var d = Ext.create(b.controller), e = b.multiSelect ? "MULTI" : "SINGLE", f = !b.multiSelect, g = !b.multiSelect;
        d.menuCode = b.menuCode;
        e = Scdp.openNewWinByController(d, function (a) {
            b.isPopup = !1;
            if ("function" == typeof b.callbackFn)return b.callbackFn(b, a);
            c = a.getCmp("resultPanel").getCurRecord();
            if (Scdp.ObjUtil.isEmpty(c))Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT); else {
                if (!b.multiSelect)if (b.isInForm()) {
                    var d = b.getUpForm(), e = d.getCmp(b.getDescCid());
                    Scdp.ObjUtil.isNotEmpty(e) && e.sotValue(c.get(b.descField));
                    b.sotValue(c.get(b.valueField));
                    Ext.Array.each(b.refer, function (a) {
                        var e = d.getCmp(a.refField);
                        e && (e.isXType("JQueryField") ||
                        e.isXType("JTreeField") || e.isXType("JGridField") || e.isXType("JComboTreeField")) ? e.putValue(b.mergeValues(c.raw, a.valueField)) : e && e.sotValue(b.mergeValues(c.raw, a.valueField))
                    });
                    b.focus()
                } else {
                    var e = b.getUpGrid(), g = e.prepareEditContext.record;
                    g.set(b.getDescCid(), c.get(b.descField));
                    g.set(e.prepareEditContext.field, c.get(b.valueField));
                    e.startEditByPosition(e.prepareEditContext.rowIdx, e.prepareEditContext.colIdx);
                    b.sotValue(c.get(b.valueField));
                    var f = e.getCurRecord();
                    f.beginEdit();
                    Ext.Array.each(b.refer,
                        function (a) {
                            f.set(a.refField, b.mergeValues(c.raw, a.valueField))
                        });
                    f.endEdit()
                }
                "function" == typeof b.afterCallbackFn && b.afterCallbackFn(a);
                return !0
            }
        }, "temp_icon_16", Scdp.I18N.WINDOW_RECORDS_SELECT, Scdp.I18N.SELECT_BTN, !0, e, f, g, null, !1, function () {
            b.isPopup = !1;
            if (b.isInForm())b.sotValue(b.gotValue()), b.focus(); else {
                var a = b.getUpGrid();
                a.getCurRecord();
                a.startEditByPosition(a.prepareEditContext.rowIdx, a.prepareEditContext.colIdx);
                b.sotValue(b.gotValue())
            }
        });
        f = b.getFilterConditions();
        Ext.Object.each(f,
            function (a, b) {
                Ext.String.endsWith(a, "_h") || (d.view.getCmp(a).sotValue(b), d.view.getCmp(a).sotEditable(!1), d.view.getCmp(a).cid = "")
            });
        f = b.replaceHiddenFlag(f);
        d.view.getConditionPanel().queryExtraParams = f;
        Scdp.ObjUtil.isNotEmpty(a) && Scdp.ObjUtil.isNotEmpty(b.gotRawValue()) && (d.view.getCmp(a).sotValue(b.gotRawValue()), d.view.getCmp("queryBtn").focus(), d.view.getCmp("queryBtn").fireEvent("click"));
        "function" == typeof b.afterWinShowFn && b.afterWinShowFn(b, e)
    },
    mergeValues: function (a, b) {
        var c = this;
        if (-1 <
            b.indexOf(",")) {
            var d = "";
            Ext.Array.each(b.split(","), function (b) {
                d += (a[[b.trim()]] || "") + c.delimiter
            });
            return d.substr(0, d.length - 1)
        }
        var e = a[[b.trim()]];
        /[-/: T]+/.test(e) && void 0 !== Ext.Date.parse(e, "c") && (e = Scdp.StrUtil.replaceAll(e, "T", " "), e = Scdp.DateUtil.parseDate(e));
        return e
    }
});
Ext.define("Scdp.form.JCheckGroup", {
    extend: "Ext.form.CheckboxGroup",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JCheckGroup"],
    delimiter: "|",
    blankText: Scdp.I18N.CHECKBOX_GROUP_AT_LEAST_SELECT_ONE,
    readOnly: !1,
    componentId: Scdp.StrUtil.getUUID(),
    invalidCls: "x-form-invalid",
    codeField: "code",
    descField: "codedesc",
    items: [],
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this);
        Scdp.ObjUtil.isEmpty(this.data) && Scdp.ObjUtil.isNotEmpty(this.comboType) && (this.data = Scdp.getComboStoreDate(this.comboType,
            this.codeType, this.menuCode, this.filterMap));
        this.loadItems(this.data);
        this.readOnly && this.setReadOnly(!0)
    },
    loadItems: function (a) {
        var b = this;
        b.removeAll();
        Ext.each(a, function (a) {
            a = new Ext.form.Checkbox({
                boxLabel: a[b.descField],
                name: b.componentId,
                inputValue: a[b.codeField],
                readOnlyCls: "xx-form-readonly",
                checked: void 0 === a.checked ? !1 : a.checked
            });
            b.items.add(a)
        });
        b.doLayout()
    },
    sotValue: function (a, b) {
        if (Scdp.ObjUtil.isNotEmpty(a) && Ext.isString(a)) {
            0 == a.indexOf(this.delimiter) && (a = Scdp.StrUtil.replaceFirst(a,
                this.delimiter, ""));
            a.lastIndexOf(this.delimiter) == a.length - 1 && (a = Scdp.StrUtil.replaceLast(a, this.delimiter, ""));
            var c = {}, d = a.split(this.delimiter);
            c[this.componentId] = 1 == d.length ? d[0] : d;
            this.setValue(c)
        } else this.setValue(a);
        b || this.afterSotValue && this.afterSotValue(this)
    },
    gotValue: function () {
        var a = this.getValue(), b = "";
        if (Scdp.ObjUtil.isNotEmpty(a))if (a = Scdp.ObjUtil.get(a, this.componentId), Ext.isArray(a))for (var c = 0; c < a.length; c++)b = b + a[c] + this.delimiter; else b = b + a + this.delimiter;
        Scdp.ObjUtil.isNotEmpty(b) &&
        (b = Scdp.StrUtil.replaceLast(b, this.delimiter, ""));
        return b
    }
});
Ext.define("Scdp.form.JRadioGroup", {
    extend: "Ext.form.RadioGroup",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JRadioGroup"],
    blankText: Scdp.I18N.RADIOBOX_GROUP_SELECT_ONE,
    readOnly: !1,
    componentId: Scdp.StrUtil.getUUID(),
    invalidCls: "x-form-invalid",
    codeField: "code",
    descField: "codedesc",
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this);
        Scdp.ObjUtil.isEmpty(this.data) && Scdp.ObjUtil.isNotEmpty(this.comboType) && (this.data = Scdp.getComboStoreDate(this.comboType, this.codeType, this.menuCode,
            this.filterMap));
        this.loadItems(this.data);
        this.readOnly && this.setReadOnly(!0)
    },
    loadItems: function (a) {
        var b = this;
        b.items.removeAll();
        Ext.each(a, function (a) {
            a = new Ext.form.Radio({
                boxLabel: a[b.descField],
                name: b.componentId,
                inputValue: a[b.codeField],
                readOnlyCls: "xx-form-readonly",
                checked: void 0 === a.checked ? !1 : a.checked
            });
            b.items.add(a)
        });
        b.doLayout()
    },
    sotValue: function (a, b) {
        if (Scdp.ObjUtil.isNotEmpty(a) && Ext.isString(a)) {
            var c = {}, d = a.split("|");
            c[this.componentId] = 1 == d.length ? d[0] : d;
            this.setValue(c)
        } else this.setValue(a);
        b || this.afterSotValue && this.afterSotValue(this)
    },
    gotValue: function () {
        var a = this.getValue(), b = "";
        if (Scdp.ObjUtil.isNotEmpty(a))if (a = Scdp.ObjUtil.get(a, this.componentId), Ext.isArray(a))for (var c = 0; c < a.length; c++)b = b + a[c] + "|"; else b = b + a + "|";
        Scdp.ObjUtil.isNotEmpty(b) && (b = Scdp.StrUtil.replaceLast(b, "|", ""));
        return b
    }
});
Ext.define("Scdp.form.JDisplay", {
    extend: "Ext.form.field.Display",
    alias: ["widget.JDisplay"],
    readOnlyCls: "",
    hideLabel: !0,
    margin: "0 0 0 0",
    initComponent: function () {
        this.callParent(arguments)
    },
    listeners: {
        afterrender: function (a) {
            !1 == a.allowBlank && Scdp.ObjUtil.isNotEmpty(a.fieldLabel) && a.setFieldLabel(a.fieldLabel + '\x3cdiv style\x3d"color:red;font-size: 20px;display:inline;margin-left: 2px"\x3e*\x3c/div\x3e')
        }
    }
});
Ext.define("Scdp.form.JImg", {
    extend: "Ext.Img", alias: ["widget.JImg"], margin: "0 0 0 0", initComponent: function () {
        this.callParent(arguments)
    }
});
Ext.define("Scdp.form.JFile", {
    extend: "Ext.form.field.File",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JFile"],
    name: "uploadFile",
    readOnlyCls: "",
    buttonOnly: !1,
    buttonText: "...",
    buttonMargin: 0,
    buttonConfig: {padding: "0 0 0 0", height: 22, width: 18},
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this)
    }
});
Ext.define("Scdp.form.JButton", {
    extend: "Ext.button.Button",
    mixins: ["Scdp.form.IField"],
    margin: "0 0 0 0",
    alias: ["widget.JButton"]
});
Ext.define("Scdp.form.JFromTo", {
    extend: "Ext.form.FieldContainer",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JFromTo"],
    labelSeparator: "",
    combineErrors: !0,
    layout: {align: "stretch", type: "hbox"},
    defaults: {hideLabel: !0},
    cidSuffix: "field",
    needTz: !1,
    items: [],
    initComponent: function () {
        var a = [], b = {
            xtype: this.subXtype,
            cid: this.cid + this.cidSuffix + "From",
            belongFieldContainer: !0,
            hideTrigger: !1,
            flex: 1,
            needTz: this.needTz,
            enterQuery: this.enterQuery
        };
        this.format && (b.format = this.format);
        a.push(b);
        a.push({
            xtype: "JDisplay",
            componentCls: "display_field_text_align_center",
            width: this.labelWidth + 8,
            value: Scdp.I18N.SEARCH_PANEL_TO
        });
        b = {
            flex: 1,
            xtype: this.subXtype,
            hideTrigger: !1,
            cid: this.cid + this.cidSuffix + "To",
            belongFieldContainer: !0,
            needTz: this.needTz,
            enterQuery: this.enterQuery
        };
        this.format && (b.format = this.format);
        a.push(b);
        this.items = a;
        this.callParent(arguments);
        this.initObjEvents(this)
    }
});
Ext.define("Scdp.form.JBolCombo", {
    extend: "Scdp.form.JCombo",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JBolCombo"],
    displayDesc: !0,
    store: "JBolComboStore",
    splitMultiValue: !1,
    initComponent: function () {
        this.callParent(arguments)
    }
});
Ext.define("Scdp.form.TreeCombox", {
    extend: "Ext.form.field.Trigger",
    mixins: ["Scdp.form.IField"],
    data: null,
    alias: ["widget.JTreeCombox"],
    adaptable: !0,
    editable: !1,
    noSubComp: !1,
    orgType: "",
    trigger1Cls: Ext.baseCSSPrefix + "form-clear-trigger",
    trigger2Cls: Ext.baseCSSPrefix + "form-search-trigger",
    onTrigger1Click: function () {
        var a = this;
        this.data = null;
        if (!0 == this.multiSelect && this.clearFn)this.clearFn(); else {
            if (a.up("JEGrid")) {
                var b = a.up("JEGrid").getSelectionModel().getSelection()[0];
                b.beginEdit();
                Ext.Array.each(a.refer,
                    function (a) {
                        b.set(a.refField, null)
                    });
                b.endEdit()
            } else Ext.Array.each(a.refer, function (b) {
                (b = a.up().getCmp(b.refField)) && b.sotValue(null)
            });
            this.setValue(null)
        }
    },
    onTrigger2Click: function () {
        var a = this;
        if (null != a.win && !0 != a.win.isDestroyed)a.win.show(); else {
            var b = Ext.create("Scdp.window.TreeWindow", {
                title: a.title,
                url: a.url,
                noSubComp: a.noSubComp,
                orgType: a.orgType,
                loadAll: a.loadAll,
                multiSelect: a.multiSelect,
                selectChildren: a.selectChildren,
                searchkeys: a.searchkeys,
                showCodeColumn: a.showCodeColumn,
                onlyLeafCheckable: a.onlyLeafCheckable,
                enterFn: a.enterFn,
                clearFn: a.clearFn,
                fields: a.fields ? a.fields : [{name: "orgName", type: "string"}, {
                    name: "orgCode",
                    type: "string"
                }, {name: "uuid", type: "string"}, {name: "disabled", type: "boolean"}],
                descField: a.descField ? a.descField : "orgName",
                codeField: a.codeField ? a.codeField : "orgCode",
                autoLoad_: a.autoLoad_
            }).show();
            b.down("panel").on("itemdblclick", function (c, d) {
                if (!(!0 == a.multiSelect || d.data.disabled))if (!(!0 == a.selectChildren && (0 < d.data.children.length || "root" == d.data.parentId || "folder" == d.data.cls))) {
                    a.data =
                        d.data;
                    if (a.up("JEGrid")) {
                        var e = a.up("JEGrid").getSelectionModel().getSelection()[0];
                        e.beginEdit();
                        Ext.Array.each(a.refer, function (a) {
                            e.set(a.refField, d.data[a.valueField])
                        });
                        a.setValue(d.data[a.descField] || d.data[a.codeField]);
                        e.endEdit()
                    } else Ext.Array.each(a.refer, function (b) {
                        var c = a.up().getCmp(b.refField);
                        c && c.sotValue(d.data[b.valueField])
                    }), a.setValue(d.data[a.descField] || d.data[a.codeField]);
                    b.hide()
                }
            });
            a.win = b;
            b.parent = a
        }
    },
    initComponent: function () {
        this.callParent(arguments);
        this.initObjEvents(this)
    },
    listeners: {
        change: function (a) {
            Scdp.ObjUtil.isNotEmpty(a.setData) && a.setData(a.data);
            a.focus()
        }, specialkey: function (a, b) {
            8 == b.keyCode && (!0 === this.readOnly || !1 === this.editable) && b.preventDefault()
        }, afterrender: function (a) {
            !1 == a.allowBlank && CM.isNotEmpty(a.fieldLabel) && a.setFieldLabel(a.fieldLabel + '\x3cfont color\x3d"red"\x3e*\x3c/font\x3e')
        }
    },
    sotEditable: function (a) {
        this.adaptable && (this.setReadOnly(!a), this.clearInvalid(), this.validateOnBlur = a ? !0 : !1)
    },
    sotValue: function (a, b) {
        this.setValue(a);
        this.cascadeLoad(!1,
            Scdp.ObjUtil.isEmpty(a));
        this.afterSotValue && this.afterSotValue(this);
        b || this.afterSotValue && this.afterSotValue(this)
    }
});
Ext.define("Scdp.window.TreeWindow", {
    extend: "Ext.window.Window",
    height: 400,
    width: 800,
    draggable: !1,
    noSubComp: !1,
    orgType: "",
    layout: {type: "fit"},
    listeners: {
        hide: function (a) {
            a.close()
        }
    },
    modal: !0,
    initComponent: function () {
        var a = this.onlyLeafCheckable, b = this, c = {
            noSubComp: b.noSubComp,
            orgType: b.orgType,
            userId: Scdp.CacheUtil.get(Scdp.Const.USER_ID),
            timestamp: Date.now(),
            userLocaleId: Scdp.getSysConfig("locale_id"),
            network: window.NETWORK_DELAY
        };
        c.signature = Scdp.getSign("sys-org-treeload", c);
        var c = Ext.create("Ext.data.TreeStore",
            {
                fields: b.fields,
                autoLoad: b.autoLoad_,
                proxy: {
                    actionMethods: {read: "POST"},
                    type: "ajax",
                    url: void 0 === b.url ? "controller/json.action" : b.url,
                    extraParams: {actionName: "sys-org-treeload", postData: Ext.encode(c)},
                    reader: {type: "json"}
                },
                folderSort: !0,
                onProxyLoad: function (c) {
                    var d = function (c) {
                        c.checked = !0 == b.multiSelect ? !1 : null;
                        c.children && 0 != c.children.length && (Ext.Array.each(c.children, d, !0), a && (c.checked = null))
                    }, e = c.getRecords();
                    Ext.Array.each(e, function (b) {
                        b && (d(b.data), d(b.raw), a && (b.data.checked = null, b.raw.checked =
                            null))
                    });
                    this.self.prototype.onProxyLoad.call(this, c)
                },
                listeners: {
                    beforeload: function () {
                        return !0
                    }
                }
            }), d = [{
            xtype: "treecolumn",
            text: Scdp.I18N.ORGANIZATION_BAR_TITLE,
            flex: 2,
            width: 150,
            sortable: !0,
            dataIndex: b.descField ? b.descField : "text",
            style: {textAlign: "center"}
        }];
        !0 === b.showCodeColumn && d.push({
            text: Scdp.I18N.CODE,
            flex: 1,
            width: 90,
            dataIndex: b.codeField ? b.codeField : "code",
            sortable: !0,
            style: {textAlign: "center"}
        });
        var e = Ext.create("Ext.tree.Panel", {
            renderTo: Ext.getBody(),
            useArrows: !0,
            rootVisible: !1,
            store: c,
            singleExpand: void 0 == b.singleExpand ? !0 : b.singleExpand,
            columns: d,
            dockedItems: !0 == b.multiSelect ? [{
                xtype: "toolbar",
                dock: "bottom",
                ui: "footer",
                items: [{xtype: "component", flex: 1}, {
                    xtype: "button",
                    itemId: "okBtn",
                    width: 60,
                    text: "确定",
                    listeners: {
                        click: function () {
                            b.enterFn && b.enterFn(e.getChecked(), b.parent);
                            b.close()
                        }
                    }
                }]
            }] : [],
            plugins: [{ptype: "dvp_nodedisabled"}],
            listeners: {
                beforeload: function (a, c) {
                    if (b.loadAll || 0 == c.node.data.unid)return !0;
                    a.proxy.url = "controller/json.action";
                    return !0
                }, checkchange: function (a,
                                          c) {
                    void 0 != b.autocheck && b.autocheck && (0 == a.childNodes.length && "folder" == a.data.cls ? a.set("checked", !1) : (a.expand(), a.data.checked = c, a.eachChild(function (a) {
                        a.set("checked", c);
                        a.fireEvent("checkchange", a, c)
                    })))
                }, itemclick: function (a, b) {
                    if (b.get("disabled"))return !1
                }
            }
        });
        Ext.applyIf(b, {items: [e]});
        b.callParent(arguments)
    }
});
Array.prototype.indexOf || (Array.prototype.indexOf = function (a, b) {
    for (var c = b || 0, d = this.length; c < d; c++)if (this[c] === a)return c;
    return -1
});
Ext.define("Ext.ux.TreeCombo", {
    extend: "Ext.form.field.Picker",
    mixins: ["Scdp.form.IField"],
    alias: "widget.JTreeComboField",
    labelSeparator: "",
    tree: !1,
    records: [],
    recursiveRecords: [],
    ids: [],
    values: [],
    displayDesc: !0,
    adaptable: !0,
    selectChildren: !0,
    canSelectFolders: !0,
    editable: !1,
    multiselect: !1,
    displayField: "orgName",
    valueField: "uuid",
    treeWidth: 300,
    matchFieldWidth: !1,
    treeHeight: 400,
    afterLoadSetValue: !1,
    constructor: function (a) {
        this.addEvents({itemclick: !0});
        this.listeners = a.listeners;
        this.callParent(arguments)
    },
    initComponent: function () {
        var a = this;
        Ext.isString(a.store) && (a.store = Ext.create(a.store));
        a.tree = Ext.create("Ext.tree.Panel", {
            alias: "widget.assetstree",
            hidden: !0,
            minHeight: 300,
            rootVisible: "undefined" != typeof a.rootVisible ? a.rootVisible : !1,
            floating: !0,
            lines: !0,
            useArrows: !0,
            width: a.treeWidth,
            autoScroll: !0,
            height: a.treeHeight,
            store: a.store,
            listeners: {
                load: function () {
                    !1 != a.afterLoadSetValue && a.setValue(a.afterLoadSetValue)
                }, checkchange: function (b, c) {
                    b.set("checked", !c);
                    a.itemTreeClick(a.tree.getView(),
                        b, b, 1, null, null, a)
                }, itemclick: function (b, c, d, e, f, g) {
                    a.itemTreeClick(b, c, d, e, f, g, a)
                }, beforeshow: function (b) {
                    b.width = a.width - Scdp.Const.FORM_FIELD_LABEL_DEFAULT_WIDTH - 5
                }
            },
            plugins: [{ptype: "dvp_nodedisabled"}]
        });
        a.tree.getRootNode() && null != a.tree.getRootNode().get("checked") && (a.multiselect = !0);
        this.createPicker = function () {
            return this.tree
        };
        this.callParent(arguments);
        a.initObjEvents(a);
        a.ids = a.values = []
    },
    itemTreeClick: function (a, b, c, d, e, f, g) {
        var h = !b.get("checked");
        if (b.get("disabled"))return !1;
        !0 == g.multiselect &&
        b.set("checked", h);
        var l = g.tree.getRootNode().findChild(g.valueField, b.get(g.valueField), !0);
        if (null == l)if (g.tree.getRootNode().get(g.valueField) == b.get(g.valueField))l = g.tree.getRootNode(); else return !1;
        !1 == g.multiselect && (g.ids = [], g.values = []);
        if (!1 == g.canSelectFolders && !1 == b.get("leaf"))return g.setRecordsValue(a, b, c, d, e, f, g), !1;
        !0 == b.get("leaf") ? !0 == h ? g.addIds(b) : g.removeIds(b) : (g.recursiveRecords = [], !0 == h ? !1 == g.multiselect ? !0 == g.canSelectFolders && g.addIds(b) : !0 == g.canSelectFolders && g.recursivePush(l,
            !0) : !1 == g.multiselect ? !0 == g.canSelectFolders ? g.recursiveUnPush(l) : g.removeIds(b) : g.recursiveUnPush(l));
        !0 == g.canSelectFolders && !0 == g.multiselect && g.checkParentNodes(l.parentNode);
        g.setRecordsValue(a, b, c, d, e, f, g)
    },
    recursivePush: function (a, b) {
        var c = this;
        c.addRecRecord(a);
        b && c.addIds(a);
        a.eachChild(function (a) {
            !0 == a.hasChildNodes() ? c.recursivePush(a, b) : (c.addRecRecord(a), b && c.addIds(a))
        })
    },
    recursiveUnPush: function (a) {
        var b = this;
        b.removeIds(a);
        a.eachChild(function (a) {
            !0 == a.hasChildNodes() ? b.recursiveUnPush(a) :
                b.removeIds(a)
        })
    },
    addRecRecord: function (a) {
        for (var b = 0, c = this.recursiveRecords.length; b < c; b++) {
            var d = this.recursiveRecords[b];
            if (d && d.getId() == a.getId())return
        }
        this.recursiveRecords.push(a)
    },
    sotValue: function (a, b) {
        if (Scdp.ObjUtil.isEmpty(a))this.setRawValue(a), this.ids = this.values = []; else {
            var c = this, d = this.tree, e = Scdp.ObjUtil.isEmpty(a) ? [] : a.split(","), f = [], g = c.inputEl;
            d.store.isLoading() && (c.afterLoadSetValue = a);
            g && (c.emptyText && !Ext.isEmpty(e)) && g.removeCls(c.emptyCls);
            if (!1 == d)return !1;
            d = d.getRootNode();
            if (null == d)return !1;
            c.recursiveRecords = [];
            c.recursivePush(d, !1);
            c.records = [];
            Ext.each(c.recursiveRecords, function (a) {
                var b = a.get(c.valueField), b = e.indexOf("" + b);
                !0 == c.multiselect && a.set("checked", !1);
                -1 != b && (f.push(a.get(c.displayField)), !0 == c.multiselect && a.set("checked", !0), c.addRecord(a))
            });
            c.value = a;
            c.setRawValue(f.join(", "));
            c.ids = a.split(",");
            c.checkChange();
            c.applyEmptyText();
            c.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
            b || this.afterSotValue && this.afterSotValue(c);
            return c
        }
    },
    sotRawValue: function (a) {
        "undefined" != typeof a && (this.ids = a)
    },
    checkParentNodes: function (a) {
        if (null != a) {
            var b = this, c = !0;
            a.eachChild(function (a) {
                a = a.getId();
                -1 == b.ids.indexOf("" + a) && (c = !1)
            });
            !0 == c ? b.addIds(a) : b.removeIds(a);
            b.checkParentNodes(a.parentNode);
            b.sotValue(b.ids.join(","))
        }
    },
    addIds: function (a) {
        -1 == this.ids.indexOf("" + a.getId()) && (this.ids.push("" + a.get(this.valueField)), this.values.push("" + a.get(this.displayField)))
    },
    initValue: function () {
        this.ids = this.value ? this.value.split(",") : this.value;
        this.setValue(this.value);
        this.checkNodes(this.tree.getRootNode())
    },
    checkNodes: function (a) {
        if (!Scdp.ObjUtil.isEmpty(a))for (var b = 0; b < a.childNodes.length; b++) {
            var c = a.childNodes[b];
            c.isLeaf() ? this.checkParentNodes(c.parentNode) : this.checkNodes(c)
        }
    },
    gotDisplayValue: function () {
        return this.value
    },
    gotValue: function () {
        return this.ids.join(",")
    },
    removeIds: function (a) {
        a = this.ids.indexOf("" + a.getId());
        -1 != a && (this.ids.splice(a, 1), this.values.splice(a, 1))
    },
    addRecord: function (a) {
        for (var b = 0, c = this.records.length; b < c; b++) {
            var d = this.records[b];
            if (d && d.getId() == a.getId())return
        }
        this.records.push(a)
    },
    removeRecord: function (a) {
        for (var b = 0, c = this.records.length; b < c; b++) {
            var d = this.records[b];
            d && d.getId() == a.getId() && delete this.records[b]
        }
    },
    fixIds: function () {
        for (var a = this.ids.length; 0 <= a; a--)"NaN" == this.ids[a] && this.ids.splice(a, 1)
    },
    setRecordsValue: function (a, b, c, d, e, f, g) {
        g.fixIds();
        g.setValue(g.displayDesc ? g.values.join(",") : g.ids.join(","));
        g.fireEvent("itemclick", g, b, c, d, e, f, g.records, g.ids);
        if (!1 == g.multiselect)g.onTriggerClick()
    },
    sotEditable: function (a, b) {
        if (this.adaptable || b)this.setReadOnly(!a),
            this.clearInvalid(), this.validateOnBlur = a
    },
    reset: function () {
        this.ids = [];
        this.values = [];
        this.setRawValue("");
        this.callParent()
    }
});
Ext.define("Scdp.form.InfoBtnText", {
    extend: "Ext.form.FieldContainer",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JInfoBtnText"],
    labelSeparator: "",
    btnIconCls: "",
    btnText: "",
    btnAdaptable: !0,
    cids: "",
    layout: {align: "stretch", type: "hbox"},
    defaults: {hideLabel: !0},
    items: [],
    initComponent: function () {
        var a = this, b = a.cids.split("|"), c = Ext.create("Scdp.form.JText", {
            xtype: "JText",
            cid: b[0],
            belongFieldContainer: !0,
            flex: 1
        }), d = Ext.create("Scdp.form.JButton", {
            xtype: "JButton", cid: b[1], width: 22, margin: "0 0 0 2", iconCls: a.btnIconCls,
            text: a.btnText
        });
        c.addEvents("editablechange");
        c.on("editablechange", function (b, c) {
            a.btnAdaptable && d.setDisabled(!c)
        });
        a.items = [c, d];
        a.callParent(arguments)
    }
});
Ext.define("Scdp.form.JFormIDCombo", {
    extend: "Scdp.form.JCombo",
    alias: ["widget.JFormIDCombo"],
    comboType: "scdp_form_id",
    formType: "",
    schemeCode: "",
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        a.on("blur", function (b) {
            a.attach && (b = b.up("JForm").query("[cid\x3d" + a.attach + "]")[0], Scdp.ObjUtil.isEmpty(b) || (b.formType = a.formType, b.formCode = a.gotValue(), b.schemeCode = a.schemeCode, b.getData()))
        })
    },
    refreshStore: function () {
        this.filterMap = {formType: this.formType, schemeCode: this.schemeCode};
        this.callParent(arguments)
    },
    reload: function (a, b) {
        this.filterMap = {formType: this.formType, schemeCode: this.schemeCode};
        this.callParent(arguments)
    }
});
Ext.define("Scdp.form.JFormAttachCheckGroup", {
    extend: "Scdp.form.JCheckGroup",
    alias: ["widget.JFormAttachCheckGroup"],
    codeField: "formCode",
    descField: "formDesc",
    initComponent: function () {
        this.getData(!0);
        this.callParent(arguments)
    },
    getData: function (a) {
        var b = {
            key: "FormSetup_Attachment",
            formType: this.formType,
            formCode: this.formCode,
            schemeCode: this.schemeCode
        };
        if (!Scdp.ObjUtil.isEmpty(this.formType) && !Scdp.ObjUtil.isEmpty(this.formCode) && !Scdp.ObjUtil.isEmpty(this.schemeCode)) {
            var c = Scdp.StrUtil.getMd5(Ext.encode(b)),
                d = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, c);
            Scdp.ObjUtil.isEmpty(d) && Scdp.doAction("formsetup-get-attachement", b, function (a) {
                d = a.root;
                Scdp.CacheUtil.setPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, c, d)
            }, function () {
            }, !1, !1);
            this.data = d;
            !0 !== a && this.loadItems(this.data)
        }
    }
});
Ext.define("Scdp.form.JEmailText", {
    extend: "Scdp.form.JText",
    alias: ["widget.JEmailText"],
    hasMultiAddress: !0,
    initComponent: function () {
        this.vtype = this.hasMultiAddress ? "emails" : "email";
        this.callParent(arguments)
    },
    gotValue: function () {
        var a = this.superclass.gotValue.call(this);
        return this.hasMultiAddress ? Scdp.ObjUtil.isEmpty(a) ? [] : a.split(";") : a
    }
});
Ext.define("Scdp.form.JOptButton", {
    extend: "Scdp.form.JButton",
    alias: ["widget.JOptButton"],
    width: Scdp.Const.QUERY_CONDITION_OPTBTN_WIDTH,
    cls: "opt_button",
    opts: [],
    optFilter: "",
    defaultOpt: "",
    gotValue: function () {
        return this.text
    },
    sotValue: function (a) {
        this.setText(a)
    },
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        a.on("textchange", function (a, b, c) {
            a = this.getOptrDesc(c);
            Scdp.ObjUtil.isNotEmpty(a) && this.setTooltip(a)
        });
        var b = [], c = a.optFilter.split(",");
        a.opts = [];
        Ext.Array.each(Scdp.Const.QUERY_CONDITION_OPERATORS,
            function (d) {
                if (Scdp.ObjUtil.isEmpty(a.optFilter) || Ext.Array.contains(c, d.code))b.push({
                    text: a.getMenuItem(d.code, d.text),
                    code: d.code,
                    handler: function () {
                        this.up("button").sotValue(d.code)
                    }
                }), a.opts.push(d.code)
            });
        a.setMenu({plain: !0, bodyStyle: {background: "#fff"}, items: b});
        a.sotValue(Ext.Array.contains(a.opts, a.defaultOpt) ? a.defaultOpt : Ext.Array.contains(a.opts, Scdp.Const.QUERY_CONDITION_DEFAULT_OPT) ? Scdp.Const.QUERY_CONDITION_DEFAULT_OPT : a.opts[0])
    },
    getMenuItem: function (a, b) {
        return '\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd width\x3d"20px"\x3e' +
            a + "\x3c/td\x3e\x3ctd\x3e" + b + "\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"
    },
    getOptrDesc: function (a) {
        if (Scdp.ObjUtil.isEmpty(a))return "";
        var b = Ext.Array.findBy(Scdp.Const.QUERY_CONDITION_OPERATORS, function (b) {
            return a == b.code
        });
        return Scdp.ObjUtil.isNotEmpty(b) ? b.text : ""
    }
});
Ext.define("Scdp.form.VerifiedTextOpt", {
    extend: "Ext.form.FieldContainer",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JVTextOpt"],
    btnIconClsVerified: "verified_icon",
    btnIconClsNVerified: "unverified_icon",
    btnTextVerified: Scdp.I18N.VERIFY_VERIFIED,
    btnTextNVerified: Scdp.I18N.VERIFY_UNVERIFIED,
    verifyFunc: null,
    labelSeparator: "",
    vtype: "",
    CidSuffix: "Verified",
    layout: {align: "stretch", type: "hbox"},
    defaults: {hideLabel: !0},
    items: [],
    initComponent: function () {
        var a = this, b = Ext.create("Scdp.form.JText", {
            xtype: "JText",
            cid: a.cids, vtype: a.vtype, belongFieldContainer: !0, flex: 1
        }), c = Ext.create("Scdp.form.JButton", {
            xtype: "JButton",
            cid: a.cids + "Btn",
            width: 22,
            margin: "0 0 0 2",
            verifyFunc: a.verifyFunc,
            iconCls: a.btnIconClsNVerified,
            tooltip: a.btnTextNVerified,
            handler: function () {
                "function" == typeof this.verifyFunc && this.verifyFunc.call(a, b.gotValue())
            }
        }), d = Ext.create("Scdp.form.JHidden", {
            cid: a.cids + a.CidSuffix, sotValue: function (b) {
                this.superclass.setValue.call(this, b);
                c.setIconCls(1 == b ? a.btnIconClsVerified : a.btnIconClsNVerified);
                c.setTooltip(1 == b ? a.btnTextVerified : a.btnTextNVerified);
                (Scdp.ObjUtil.isEmpty(a.up("IView")) || a.up("IView").uistatus == Scdp.Const.UI_INFO_STATUS_NULL || a.up("IView").uistatus == Scdp.Const.UI_INFO_STATUS_VIEW) && c.setDisabled(0 !== b)
            }
        });
        b.verifyField = d;
        b.addEvents("editablechange");
        b.on("editablechange", function (e, f) {
            f ? c.setDisabled(!0) : b.isChanged() ? (c.setIconCls(a.btnIconClsNVerified), c.setTooltip(a.btnTextNVerified), c.setDisabled(!1)) : c.setDisabled(1 == d.gotValue())
        });
        a.items = [b, c, d];
        a.callParent(arguments)
    },
    disableBtn: function (a) {
        var b = this.down("JButton");
        !0 === a ? (b.setDisabled(!1), b.setTooltip("")) : (b.setDisabled(!0), b.setTooltip(a))
    }
});
Ext.define("Scdp.form.JScheme", {
    extend: "Scdp.form.JText",
    alias: ["widget.JScheme"],
    schemeType: "",
    subType: "",
    allowBlank: !1,
    initComponent: function () {
        this.callParent(arguments);
        this.value = this.getSchemeCode()
    },
    getSchemeCode: function () {
        var a = {};
        a.schemeType = this.schemeType;
        var b = this.up("JForm"), c = "";
        Scdp.ObjUtil.isNotEmpty(b) && Scdp.ObjUtil.isNotEmpty(this.subType) && (b = b.getCmp(this.subType), Scdp.ObjUtil.isNotEmpty(b) && (c = b.gotValue()));
        a.subtype = c;
        a.companyUuid = Scdp.CacheUtil.get(Scdp.Const.USER_COMPANY_UUID);
        a.orgCode = "";
        c = a.companyUuid + "@" + a.schemeType + "@" + a.subtype;
        if (Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_SCHEME, c))return Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_SCHEME, c);
        b = Scdp.doAction("sys-org-loadscheme", a, null, null, !1, !1);
        Scdp.DebugUtil.logInfo("SchemeType Type:" + a.schemeType + " Load Data from Server!");
        if (!b && !b.success)return Scdp.CacheUtil.setPage(Scdp.Const.CACHE_TYPE_SCHEME, c, ""), "";
        Scdp.CacheUtil.setPage(Scdp.Const.CACHE_TYPE_SCHEME, c, b.schemeCode);
        return b.schemeCode
    },
    reload: function () {
        this.sotValue(this.getSchemeCode())
    },
    sotValue: function (a, b, c) {
        a || this.up("IView").uistatus === Scdp.Const.UI_INFO_STATUS_NEW && (a = this.getSchemeCode());
        this.callParent(arguments)
    }
});
Ext.define("Scdp.form.JMsgAddr", {
    extend: "Scdp.form.JSearchField",
    alias: ["widget.JMsgAddr"],
    msgType: "",
    showName: !1,
    trigger2Cls: Ext.baseCSSPrefix + "form-dots-trigger",
    popupSearchWindow: function () {
        var a = this;
        a.isPopup = !0;
        if (a.isEditable() && !a.disabled) {
            var b = a.up("JForm");
            if (!Scdp.ObjUtil.isEmpty(a.msgType) || !Scdp.ObjUtil.isEmpty(b) && !Scdp.ObjUtil.isEmpty(b.getCmp("msgType")))if (Scdp.ObjUtil.isNotEmpty(b) && Scdp.ObjUtil.isNotEmpty(b.getCmp("msgType")) ? a.msgType = b.getCmp("msgType").gotValue() : Scdp.ObjUtil.isEmpty(a.msgType) &&
                (a.msgType = "IMSG"), !Scdp.ObjUtil.isEmpty(a.msgType)) {
                var c = Ext.create(a.controller), d = a.multiSelect ? "MULTI" : "SINGLE", e = !a.multiSelect, f = !a.multiSelect;
                c.actionParam = {};
                Scdp.ObjUtil.isNotEmpty(b) && (b.getCmp("userFilter") && (c.actionParam.userFilter = b.getCmp("userFilter").gotValue()), b.getCmp("roleFilter") && (c.actionParam.roleFilter = b.getCmp("roleFilter").gotValue()), b.getCmp("deptFilter") && (c.actionParam.deptFilter = b.getCmp("deptFilter").gotValue()), b.getCmp("userGroupFilter") && (c.actionParam.userGroupFilter =
                    b.getCmp("userGroupFilter").gotValue()), b.getCmp("processDeptCode") && (c.actionParam.processDeptCode = b.getCmp("processDeptCode").gotValue()), b.getCmp("businessKey") && (c.actionParam.businessKey = b.getCmp("businessKey").gotValue()), b.getCmp("workFlowDefinitionKey") && (c.actionParam.workFlowDefinitionKey = b.getCmp("workFlowDefinitionKey").gotValue()), b.additionalParam && (c.actionParam.additionalParam = b.additionalParam));
                c.menuCode = a.menuCode;
                a.assigneeDisplay && (c.assigneeDisplay = a.assigneeDisplay);
                c = Scdp.openNewWinByController(c,
                    function (c, d) {
                        a.isPopup = !1;
                        if (d)return a.focus(), a.oldValue = null, !0;
                        if ("function" == typeof a.callbackFn)return a.callbackFn(a, c);
                        var e = "", e = "SMS" == a.msgType ? "userMobile" : "EMAIL" == a.msgType ? "userMail" : "userId", f = {};
                        f.msgType = a.msgType;
                        var i = c.getCmp("user").getSelectedRecords();
                        0 < i.length && (f.userLst = [], Ext.Array.each(i, function (a) {
                            f.userLst.push(a.data)
                        }));
                        var n = c.getCmp("userGroup").getSelectedRecords();
                        0 < n.length && (f.userGroupLst = [], Ext.Array.each(n, function (a) {
                            f.userGroupLst.push(a.data)
                        }));
                        var o =
                            c.getCmp("role").getSelectedRecords();
                        0 < o.length && (f.roleLst = [], Ext.Array.each(o, function (a) {
                            f.roleLst.push(a.data)
                        }));
                        var p = c.getCmp("org").gotValue();
                        0 < p.length && (f.orgLst = p);
                        if (0 < i.length && 0 == n.length && 0 == o.length && 0 == p.length) {
                            var j = "", k = "", m = a.getValue();
                            a.showName && (Scdp.ObjUtil.isNotEmpty(b) && b.getCmp("assignToCode")) && (m = b.getCmp("assignToCode").gotValue());
                            b.additionalParam && !0 == b.additionalParam.assigneeSingleSelect && (m = "");
                            Ext.Array.each(i, function (a) {
                                var b = a.get("userId"), c = a.get("userName"),
                                    d = "", g = "";
                                "userId" == e ? d = b + ";" : (a = a.get(e), Scdp.ObjUtil.isNotEmpty(b) && (d = b + "\x3c" + Scdp.StrUtil.replaceNull(a, "") + "\x3e;"));
                                g = c + ";";
                                Scdp.ObjUtil.isNotEmpty(m) ? -1 == m.search("^" + d + "|;" + d) && (j += d, k += g) : (j += d, k += g)
                            });
                            Scdp.ObjUtil.isNotEmpty(m) && Ext.String.endsWith(m, ";") ? j = m + j : Scdp.ObjUtil.isNotEmpty(m) && !Ext.String.endsWith(m, ";") && (j = m + ";" + j);
                            a.showName && Scdp.ObjUtil.isNotEmpty(b) && b.getCmp("assignToCode") ? (i = b.getCmp("assignToCode").gotValue(), b.additionalParam && !0 == b.additionalParam.assigneeSingleSelect &&
                            (i = ""), Scdp.ObjUtil.isNotEmpty(i) && Ext.String.endsWith(i, ";") ? k = i + k : Scdp.ObjUtil.isNotEmpty(i) && !Ext.String.endsWith(i, ";") && (k = i + ";" + k), Scdp.ObjUtil.isEmpty(k) && (k = j), b.getCmp("assignToCode").sotValue(j), a.sotValue(k)) : a.sotValue(j);
                            a.focus();
                            return !0
                        }
                        if (0 == i.length && 0 == n.length && 0 == o.length && 0 == p.length)return !0;
                        Scdp.doAction("msgcenter-load-contact-Lst", f, function (c) {
                            if (Scdp.ObjUtil.isNotEmpty(c.contactLst)) {
                                var d = "", g = "", f = a.getValue();
                                a.showName && (Scdp.ObjUtil.isNotEmpty(b) && b.getCmp("assignToCode")) &&
                                (f = b.getCmp("assignToCode").gotValue());
                                b.additionalParam && !0 == b.additionalParam.assigneeSingleSelect && (f = "");
                                Ext.Array.each(c.contactLst, function (a) {
                                    var b = "", c = "", b = a + ";";
                                    "userId" == e && (c = a.userName, b = a.userId + ";", c += ";");
                                    Scdp.ObjUtil.isNotEmpty(f) ? -1 == f.search("^" + b + "|;" + b) && (d += b, g += c) : (d += b, g += c)
                                });
                                Scdp.ObjUtil.isNotEmpty(f) && Ext.String.endsWith(f, ";") ? d = f + d : Scdp.ObjUtil.isNotEmpty(f) && !Ext.String.endsWith(f, ";") && (d = f + ";" + d);
                                a.showName && Scdp.ObjUtil.isNotEmpty(b) && b.getCmp("assignToCode") ? (c =
                                    b.getCmp("assignToCode").gotValue(), b.additionalParam && !0 == b.additionalParam.assigneeSingleSelect && (c = ""), Scdp.ObjUtil.isNotEmpty(c) && Ext.String.endsWith(c, ";") ? g = c + g : Scdp.ObjUtil.isNotEmpty(c) && !Ext.String.endsWith(c, ";") && (g = c + ";" + g), Scdp.ObjUtil.isEmpty(g) && (g = d), b.getCmp("assignToCode").sotValue(d), a.sotValue(g)) : a.sotValue(d)
                            }
                        });
                        a.focus();
                        "function" == typeof a.afterCallbackFn && a.afterCallbackFn(c);
                        return !0
                    }, "user_icon_16", Scdp.I18N.MSG_CONTACT, Scdp.I18N.SELECT_BTN, !1, d, e, f, null, !1);
                "function" == typeof a.afterWinShowFn && a.afterWinShowFn(a, c)
            }
        }
    }
});
Ext.define("Scdp.form.JMsgTempNo", {
    extend: "Scdp.form.JCombo", alias: ["widget.JMsgTempNo"], refreshStore: function () {
        var a = {};
        a.comboType = Scdp.StrUtil.replaceNull(this.comboType);
        a.codeType = Scdp.StrUtil.replaceNull(this.codeType);
        a.menuCode = Scdp.StrUtil.replaceNull(this.menuCode);
        a.filterMap = this.filterMap || {};
        var b = Scdp.StrUtil.getMd5(Ext.encode(a)), c = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, b);
        if (Scdp.ObjUtil.isEmpty(c)) {
            c = Scdp.doAction("msgtemplate-load-templateno", a, null, null, !1, !1);
            Scdp.DebugUtil.logInfo("Combo Type:" + a.comboType + " Code Type:" + a.comboType + " Filter:" + Ext.encode(a.filterMap) + " Load Data from Server!");
            if (!c && !c.success)return;
            c = c.root;
            Scdp.CacheUtil.setPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, b, c)
        }
        this.store = Ext.StoreManager.lookup(b);
        Scdp.ObjUtil.isEmpty(this.store) ? (Scdp.DebugUtil.logInfo("Cache Key:" + b + " Store init!"), this.store = Ext.widget("JComboStore", {
            storeId: b,
            data: c
        })) : this.store.loadData(c)
    }, reload: function (a, b) {
        var c = this.filterMap || {};
        if (this.filterFields) {
            var d =
                this.filterFields.split(",");
            Ext.each(d, function (d) {
                d = d.split("|");
                var e = null, e = a instanceof Scdp.container.JForm ? a.getCmp(d[0]).gotValue() : b ? b.get(d[0]) : a.getCurRecord().get(d[0]), e = Scdp.StrUtil.replaceNull(e);
                Scdp.ObjUtil.isNotEmpty(d[1]) ? c[d[1]] = e : c[d[0]] = e
            });
            d = {};
            d.comboType = Scdp.StrUtil.replaceNull(this.comboType);
            d.codeType = Scdp.StrUtil.replaceNull(this.codeType);
            d.menuCode = Scdp.StrUtil.replaceNull(this.menuCode);
            d.filterMap = c || {};
            var e = Scdp.StrUtil.getMd5(Ext.encode(d)), f = Scdp.CacheUtil.getPage(Scdp.Const.CACHE_TYPE_COMBO_STORE,
                e);
            if (Scdp.ObjUtil.isEmpty(f)) {
                f = Scdp.doAction("msgtemplate-load-templateno", d, null, null, !1, !1);
                Scdp.DebugUtil.logInfo("Combo Type:" + d.comboType + " Code Type:" + d.comboType + " Filter:" + Ext.encode(d.filterMap) + " Load Data from Server!");
                if (!f && !f.success)return;
                f = f.root;
                Scdp.CacheUtil.setPage(Scdp.Const.CACHE_TYPE_COMBO_STORE, e, f)
            }
            this.store.loadData(f)
        }
    }
});
Ext.define("Scdp.form.JTreeField", {
    extend: "Ext.form.field.Trigger",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JTreeField"],
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    wHeight: 400,
    wWidth: 800,
    delimiter: "|",
    nodeSeparator: "/",
    multiSelect: !0,
    splitMultiValue: !0,
    beforeCallbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    rootVisible: !1,
    storeAction: "",
    actionParams: {},
    withSearchBar: !0,
    treeDisabled: !1,
    onlyLeafCheckable: !0,
    parentCheck: !0,
    expandOnDblClick: !1,
    treeConfig: null,
    displayDesc: !1,
    readOnlyAsEditable: !0,
    withQuickTips: !0,
    onlyLeafSelected: !0,
    showNodeFullPath: !1,
    codeField: "id",
    descField: "text",
    initComponent: function () {
        !0 == this.multiSelect ? (this.expandOnDblClick = !0, this.setEditable(!1), this.addCls("xxx-form-editable-false"), this.trigger1Cls = Ext.baseCSSPrefix + "form-clear-trigger", this.trigger2Cls = Ext.baseCSSPrefix + "form-search-trigger") : this.triggerCls = Ext.baseCSSPrefix + "form-search-trigger";
        this.setEditable(!1);
        this.addCls("xxx-form-editable-false");
        this.trigger1Cls = Ext.baseCSSPrefix + "form-clear-trigger";
        this.trigger2Cls =
            Ext.baseCSSPrefix + "form-search-trigger";
        this.callParent(arguments);
        this.initObjEvents(this)
    },
    sotCodeAndDesc: function (a, b) {
        if (this.isInForm()) {
            var c = this.getUpForm().getCmp(this.getDescCid());
            Scdp.ObjUtil.isNotEmpty(c) && c.sotValue(b);
            this.sotValue(a);
            this.oldValue = this.gotRawValue();
            this.focus()
        } else {
            var c = this.getUpGrid(), d = c.prepareEditContext.record;
            d.set(this.getDescCid(), b);
            d.set(c.prepareEditContext.field, a);
            c.startEditByPosition(c.prepareEditContext.rowIdx, c.prepareEditContext.colIdx);
            this.sotValue(a);
            this.oldValue = this.gotRawValue()
        }
    },
    sotValue: function (a, b) {
        this.codeValue = a;
        this.setValue(a);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        b || this.afterSotValue && this.afterSotValue(this)
    },
    putValue: function (a) {
        if (this.displayDesc) {
            var b = {
                isconfig: !0,
                getDesc: !0,
                code: a,
                codeField: this.codeField
            }, b = Ext.merge(b, this.actionParams);
            b.storeAction = this.storeAction;
            descValue = Scdp.doAction(this.storeAction, b, null, null, null, !1).codeDesc;
            this.sotCodeAndDesc(a, descValue)
        } else this.sotValue(a)
    },
    setValue: function (a) {
        this.codeValue =
            a;
        this.setRawValue(a);
        if (this.displayDesc && Scdp.ObjUtil.isNotEmpty(a))if (this.isInForm())a = this.getUpForm().getCmp(this.getDescCid()), Scdp.ObjUtil.isNotEmpty(a) && this.setRawValue(a.gotValue()); else if (this.isInGrid()) {
            a = this.getUpGrid();
            var b = a.prepareEditContext.record;
            this.dataIndex = a.prepareEditContext.field;
            this.setRawValue(b.get(a.prepareEditContext.field + "Desc"))
        }
        this.registerQuickTips()
    },
    gotValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() :
            a
    },
    getValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    onTrigger1Click: function () {
        this.sotCodeAndDesc(null, null)
    },
    onTrigger2Click: function () {
        this.isEditable() && this.popupSearchWindow()
    },
    popupSearchWindow: function () {
        var a = this, b = "Scdp.tree.JTree";
        a.multiSelect && (b = "Scdp.tree.JCheckTree");
        b = Ext.create(b, Ext.merge({
            rootVisible: a.rootVisible,
            storeAction: a.storeAction,
            actionParams: a.actionParams,
            withSearchBar: a.withSearchBar,
            onlyLeafCheckable: a.onlyLeafCheckable,
            parentCheck: a.parentCheck,
            expandOnDblClick: a.expandOnDblClick,
            treeDisabled: a.treeDisabled,
            width: a.wWidth,
            height: a.wHeight,
            useArrows: !1,
            lines: !0,
            onDblClick: function (a, b) {
                a.okFunction(a, b);
                a.up("window").close()
            }
        }, a.treeConfig));
        b.okFunction = function (b, d) {
            a.isPopup = !1;
            if ("function" == typeof a.beforeCallbackFn)return a.beforeCallbackFn(a, b);
            if (a.multiSelect) {
                var e = b.gotChecked(a.onlyLeafSelected);
                if (Scdp.ObjUtil.isEmpty(e)) {
                    Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT);
                    return
                }
                var f = "", g = "";
                Ext.each(e,
                    function (b) {
                        f = f + a.delimiter + b.raw[a.codeField];
                        g = a.showNodeFullPath ? g + a.delimiter + Scdp.getTreeNodeFullPath(b, a.nodeSeparator) : g + a.delimiter + b.raw[a.descField]
                    });
                f += a.delimiter;
                g += a.delimiter;
                a.sotCodeAndDesc(f, g)
            } else {
                if (Scdp.ObjUtil.isEmpty(d)) {
                    e = b.getSelectionModel().getSelection();
                    if (0 == e.length)return Scdp.MsgUtil.warn(Scdp.I18N.NO_RECORDS_SELECT), !1;
                    d = e[0]
                }
                a.sotCodeAndDesc(d.raw[a.codeField], d.raw[a.descField])
            }
            "function" == typeof a.afterCallbackFn && a.afterCallbackFn(b);
            return !0
        };
        Scdp.openNewWinByView0(b)
    }
});
Ext.define("Scdp.form.JGridField", {
    extend: "Ext.form.field.Picker",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JGridField"],
    enableKeyEvents: !0,
    matchFieldWidth: !1,
    gridWidth: 500,
    gridHeight: 200,
    pageSize: 10,
    queryDelay: Scdp.Const.FORM_GRID_FIELD_QUERY_DELAY,
    displayDesc: !1,
    readOnlyAsEditable: !0,
    queryAction: "common-crud-query",
    forceValidate: !0,
    autoResizeColumn: Scdp.Const.AUTO_RESIZE_JGRIDFIELD_COLUMN,
    splitMultiValue: !0,
    expand: function () {
        this.isEditable() && this.callParent(arguments)
    },
    initComponent: function () {
        var a =
            this;
        a.trigger1Cls = Ext.baseCSSPrefix + "form-clear-trigger";
        a.trigger2Cls = Ext.baseCSSPrefix + "form-down-trigger";
        a.callParent(arguments);
        a.initObjEvents(a);
        Scdp.ObjUtil.isNotEmpty(a.descField) && (a.displayDesc = !0);
        a.task = new Ext.util.DelayedTask(function () {
            a.isExpanded ? a.doQuery() : a.expand()
        });
        a.on("keyup", function (b, c) {
            c.getKey() == Ext.EventObject.BACKSPACE || !Ext.EventObject.isSpecialKey() ? a.task.delay(a.queryDelay) : c.getKey() == Ext.EventObject.DOWN && 0 < a.getPicker().getStore().getCount() ? a.getPicker().setCurRecord(0) :
            c.getKey() == Ext.EventObject.ENTER && !a.getPicker().hidden && (0 < a.getPicker().store.getCount() && a.getPicker().getCurRecord()) && a.doSelect()
        })
    },
    createPicker: function () {
        var a = this, b = {};
        b.modulePath = a.modulePath;
        b.layoutFile = a.layoutFile;
        b.langId = Scdp.getSysConfig("locale_id");
        var c = Ext.encode(b), d = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT, c, !1, !0);
        Scdp.DebugUtil.isProdMode() || (d = null);
        if (Scdp.ObjUtil.isEmpty(d)) {
            d = Scdp.doAction("common-query-layout-load", b, null, null, !1, !1);
            if (!d.success)return;
            Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_TYPE_INFO_LAYOUT, c, d, !1, !0)
        }
        var e = [], f = [];
        f.push({text: "", xtype: "rownumberer", width: 35});
        Ext.Array.each(d.results, function (a) {
            e.push(a.dataIndex.trim());
            a.menuDisabled = !0;
            f.push(a)
        });
        Ext.Array.contains(e, "uuid") || e.push("uuid");
        a.store = Ext.create("Ext.data.Store", {
            fields: e,
            autoLoad: !1,
            remoteSort: !0,
            pageSize: a.pageSize,
            proxy: {
                type: "ajax",
                url: Scdp.Const.JSON_ACTION,
                reader: {type: "json", root: "root", totalProperty: "totalProperty"}
            }
        });
        a.picker = Ext.widget("JQGrid",
            {
                store: a.store,
                columns: f,
                frame: !0,
                floating: !0,
                hidden: !0,
                width: a.gridWidth,
                maxHeight: a.gridHeight,
                columnLines: !0,
                focusOnToFront: !1,
                pageSizeComboHidden: !0,
                selMode: "SINGLE",
                enableKeyNav: !0,
                withSelMode: !1,
                defaultSelect: !1,
                loadMask: !0,
                enableColumnResize: !1,
                autoResizeColumn: a.autoResizeColumn,
                needShowContextMenu: !1
            });
        a.picker.on("itemclick", function () {
            a.doSelect()
        });
        a.picker.enterFn = function () {
            a.doSelect()
        };
        return a.picker
    },
    sotValue: function (a, b) {
        this.codeValue = a;
        this.setValue(a);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        b || this.afterSotValue && this.afterSotValue(this)
    },
    setValue: function (a) {
        this.codeValue = a;
        this.setRawValue(a);
        if (this.displayDesc && Scdp.ObjUtil.isNotEmpty(a))if (this.isInForm())a = this.getUpForm().getCmp(this.getDescCid()), Scdp.ObjUtil.isNotEmpty(a) && (a = a.gotValue(), (this.forceValidate || !this.forceValidate && Scdp.ObjUtil.isNotEmpty(a)) && this.setRawValue(a)); else if (this.isInGrid()) {
            a = this.getUpGrid();
            var b = a.prepareEditContext.record;
            this.dataIndex = a.prepareEditContext.field;
            a = b.get(a.prepareEditContext.field +
                "Desc");
            (this.forceValidate || !this.forceValidate && Scdp.ObjUtil.isNotEmpty(a)) && this.setRawValue(a)
        }
    },
    gotValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    getValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    sotCodeAndDesc: function (a, b, c, d) {
        var e = this;
        if (e.isInForm()) {
            var f = e.getUpForm();
            c = f.getCmp(e.getDescCid());
            Scdp.ObjUtil.isNotEmpty(c) && c.sotValue(b);
            e.sotValue(a);
            e.oldValue = e.gotRawValue();
            Scdp.ObjUtil.isEmpty(a) || Scdp.ObjUtil.isEmpty(d) ? Ext.Array.each(e.refer, function (a) {
                (a = f.getCmp(a.refField)) && a.sotValue(null)
            }) : Ext.Array.each(e.refer, function (a) {
                var b = f.getCmp(a.refField);
                b && (b.isXType("JQueryField") || b.isXType("JTreeField") || b.isXType("JGridField") || b.isXType("JComboTreeField")) ? b.putValue(e.mergeValues(d, a.valueField)) : b && b.sotValue(e.mergeValues(d, a.valueField))
            })
        } else {
            c = e.getUpGrid();
            var g = c.prepareEditContext.record;
            g.set(e.getDescCid(), b);
            g.set(c.prepareEditContext.field,
                a);
            if (Scdp.ObjUtil.isEmpty(a) || Scdp.ObjUtil.isEmpty(d)) {
                var h = c.getCurRecord();
                h.beginEdit();
                Ext.Array.each(e.refer, function (a) {
                    h.set(a.refField, null)
                })
            } else h = c.getCurRecord(), h.beginEdit(), Ext.Array.each(e.refer, function (a) {
                h.set(a.refField, e.mergeValues(d, a.valueField))
            });
            h.endEdit()
        }
    },
    putValue: function (a, b, c) {
        !1 !== c && (c = !0);
        void 0 === b && (b = !0);
        Scdp.ObjUtil.isEmpty(a) ? (this.sotCodeAndDesc(null, null), "function" == typeof this.afterCallbackFn && this.afterCallbackFn()) : (b = this.getMatchedRecord(a, b, c).matchedRecord,
            Scdp.ObjUtil.isNotEmpty(b) ? (a = b[0], this.sotCodeAndDesc(a[this.valueField], a[this.descField], !1, a), "function" == typeof this.afterCallbackFn && this.afterCallbackFn()) : this.forceValidate ? (this.sotCodeAndDesc(null, null), this.markInvalid(Scdp.I18N.COMBOX_DATA_EXIST_VALIDATE)) : this.sotCodeAndDesc(a, a))
    },
    getMatchedRecord: function (a, b, c) {
        var d = {}, e = {}, e = {}, f = this.replaceHiddenFlag(this.getFilterConditions());
        b ? (e[this.valueField] = a, e = {
            modulePath: this.modulePath, layoutFile: this.layoutFile, queryConditions: e,
            queryExtraParams: f, isAccurate: c, isUniqueQuery: !0, ignoreCase: !1
        }) : e = {
            modulePath: this.modulePath,
            layoutFile: this.layoutFile,
            queryConditions: {},
            queryExtraParams: f,
            quickQueryValue: this.getRawValue(),
            ignoreCase: !1
        };
        a = Scdp.doAction(this.queryAction, e, null, null, !0, !1);
        if (1 <= a.totalProperty)d.matchedRecord = a.root; else return !1;
        return d
    },
    triggerBlur: function () {
        this.callParent(arguments);
        this.collapse();
        this.isEditable() && this.isChanged() && (this.putValue(this.gotRawValue(), !1, !1), this.task.cancel())
    },
    doSelect: function () {
        var a =
            this.picker.getCurRecord();
        this.collapse();
        this.sotCodeAndDesc(a.get(this.valueField), a.get(this.descField), !0, a.raw);
        if (this.isInForm())this.focus(!1, 50); else {
            var a = this.getUpGrid(), b = a.prepareEditContext.rowIdx, c = a.prepareEditContext.colIdx;
            this.oldValue = this.gotRawValue();
            a.startEditByPosition(b, c);
            a.setCurRecord(a.getCurRecord());
            a.startEditByPosition(b, c)
        }
    },
    doQuery: function () {
        var a = this, b = a.getPicker();
        b.getStore();
        var c = a.replaceHiddenFlag(a.getFilterConditions());
        Scdp.doCommonQuery(a.queryAction,
            {}, !0, b, a.modulePath, a.layoutFile, null, function () {
                Scdp.ObjUtil.isEmpty(a.getRawValue()) && a.focus(!1, 50, function () {
                })
            }, !0, null, c, a.getRawValue())
    },
    onExpand: function () {
        this.doQuery()
    },
    onTrigger1Click: function () {
        this.sotCodeAndDesc(null, null)
    }
});
Ext.define("Scdp.form.JComboTreeField", {
    extend: "Ext.form.field.Picker",
    mixins: ["Scdp.form.IField"],
    alias: ["widget.JComboTreeField"],
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    enableKeyEvents: !0,
    matchFieldWidth: !1,
    treeWidth: 400,
    treeHeight: 300,
    delimiter: "|",
    nodeSeparator: "/",
    multiSelect: !0,
    splitMultiValue: !0,
    beforeCallbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    rootVisible: !1,
    storeAction: "",
    actionParams: {},
    withSearchBar: !0,
    showTools: !0,
    treeDisabled: !1,
    onlyLeafCheckable: !0,
    expandOnDblClick: !1,
    treeConfig: null,
    displayDesc: !1,
    readOnlyAsEditable: !0,
    withQuickTips: !0,
    onlyLeafSelected: !0,
    showNodeFullPath: !1,
    codeField: "id",
    descField: "text",
    autoExpand: !1,
    initComponent: function () {
        this.setEditable(!1);
        this.addCls("xxx-form-editable-false");
        this.trigger1Cls = Ext.baseCSSPrefix + "form-clear-trigger";
        this.trigger2Cls = Ext.baseCSSPrefix + "form-down-trigger";
        this.callParent(arguments);
        this.initObjEvents(this)
    },
    createPicker: function () {
        var a = this, b = "Scdp.tree.JTree";
        a.multiSelect && (b = "Scdp.tree.JCheckTree");
        a.picker = Ext.create(b,
            Ext.merge({
                rootVisible: a.rootVisible,
                storeAction: a.storeAction,
                actionParams: a.actionParams,
                withSearchBar: a.withSearchBar,
                showTools: a.showTools,
                onlyLeafCheckable: a.onlyLeafCheckable,
                expandOnDblClick: a.expandOnDblClick,
                treeDisabled: a.treeDisabled,
                width: a.treeWidth,
                height: a.treeHeight,
                useArrows: !1,
                lines: !0,
                floating: !0,
                onClick: function (b, d) {
                    !a.multiSelect && !d.raw.disabled && (b.okFunction(b, d), a.collapse(), a.focus(!1, 50))
                },
                onDblClick: function (b, d) {
                    a.multiSelect && (b.okFunction(b, d), a.collapse(), a.focus(!1,
                        50))
                }
            }, a.treeConfig));
        if (a.autoExpand)a.picker.store.on("datachanged", function () {
            var b = a.picker.getRootNode();
            b && b.childNodes && Ext.Array.each(b.childNodes, function (b) {
                a.picker.expandNode(b)
            })
        });
        a.picker.okFunction = function (b, d) {
            a.isPopup = !1;
            if ("function" == typeof a.beforeCallbackFn)return a.beforeCallbackFn(a, b);
            if (a.multiSelect) {
                var e = b.gotChecked(a.onlyLeafSelected);
                if (Scdp.ObjUtil.isEmpty(e)) {
                    a.onTrigger1Click();
                    return
                }
                var f = "", g = "";
                Ext.each(e, function (b) {
                    f = f + a.delimiter + b.raw[a.codeField];
                    g = a.showNodeFullPath ?
                    g + a.delimiter + Scdp.getTreeNodeFullPath(b, a.nodeSeparator) : g + a.delimiter + b.raw[a.descField]
                });
                f += a.delimiter;
                g += a.delimiter;
                a.sotCodeAndDesc(f, g)
            } else {
                if (Scdp.ObjUtil.isEmpty(d)) {
                    Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT);
                    return
                }
                a.sotCodeAndDesc(d.raw[a.codeField], d.raw[a.descField])
            }
            "function" == typeof a.afterCallbackFn && a.afterCallbackFn(b)
        };
        return a.picker
    },
    sotCodeAndDesc: function (a, b) {
        if (this.isInForm()) {
            var c = this.getUpForm().getCmp(this.getDescCid());
            Scdp.ObjUtil.isNotEmpty(c) && c.sotValue(b)
        } else {
            var c =
                this.getUpGrid(), d = c.prepareEditContext.record;
            d.set(this.getDescCid(), b);
            d.set(c.prepareEditContext.field, a);
            c.startEditByPosition(c.prepareEditContext.rowIdx, c.prepareEditContext.colIdx)
        }
        this.sotValue(a);
        this.oldValue = this.gotRawValue()
    },
    sotValue: function (a, b) {
        this.codeValue = a;
        this.setValue(a);
        this.cascadeLoad(!1, Scdp.ObjUtil.isEmpty(a));
        b || this.afterSotValue && this.afterSotValue(this)
    },
    putValue: function (a) {
        if (this.displayDesc) {
            var b = {isconfig: !0, getDesc: !0, code: a, codeField: this.codeField}, b = Ext.merge(b,
                this.actionParams);
            b.storeAction = this.storeAction;
            descValue = Scdp.doAction(this.storeAction, b, null, null, null, !1).codeDesc;
            this.sotCodeAndDesc(a, descValue)
        } else this.sotValue(a)
    },
    setValue: function (a) {
        this.codeValue = a;
        this.setRawValue(a);
        if (this.displayDesc && Scdp.ObjUtil.isNotEmpty(a))if (this.isInForm())a = this.getUpForm().getCmp(this.getDescCid()), Scdp.ObjUtil.isNotEmpty(a) && this.setRawValue(a.gotValue()); else if (this.isInGrid()) {
            a = this.getUpGrid();
            var b = a.prepareEditContext.record;
            this.dataIndex = a.prepareEditContext.field;
            this.setRawValue(b.get(a.prepareEditContext.field + "Desc"))
        }
        this.registerQuickTips()
    },
    gotValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    getValue: function () {
        var a = this.codeValue;
        return Scdp.ObjUtil.isNotEmpty(a) && this.upperCase ? a.toUpperCase() : a
    },
    sotEditable: function (a, b) {
        if (this.adaptable || b)this.setReadOnly(!a), this.clearInvalid(), this.validateOnBlur = a
    },
    onTrigger1Click: function () {
        this.sotCodeAndDesc(null, null)
    }
});
Ext.define("Scdp.form.JWorkFlowProQueryField", {
    extend: "Scdp.form.JQueryField",
    alias: ["widget.JWorkFlowProQueryField"],
    multiSelect: !1,
    callbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    delimiter: "|",
    defaultFields: "procDefKey|procDefName",
    menuCode: "",
    defaultSearchFields: "",
    isPopup: !1,
    displayDesc: !0,
    valueField: "procDefKey",
    descField: "procDefName",
    controller: "WorkFlowSetup.controller.WorkFlowProcQueryController",
    upperCase: !1
});
Ext.define("Scdp.form.JWorkFlowProWithoutVersionQueryField", {
    extend: "Scdp.form.JQueryField",
    alias: ["widget.JWorkFlowProWithoutVersionQueryField"],
    multiSelect: !1,
    callbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    delimiter: "|",
    defaultFields: "procDefKey|procDefName",
    menuCode: "",
    defaultSearchFields: "",
    isPopup: !1,
    displayDesc: !0,
    valueField: "procDefKey",
    descField: "procDefName",
    controller: "WorkFlowSetup.controller.WorkFlowProcWithoutVersionQueryController",
    upperCase: !1
});
Ext.define("Scdp.form.JUserQueryField", {
    extend: "Scdp.form.JQueryField",
    alias: ["widget.JUserQueryField"],
    multiSelect: !1,
    callbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    delimiter: "|",
    defaultFields: "userId|userName",
    menuCode: "",
    defaultSearchFields: "",
    isPopup: !1,
    displayDesc: !0,
    valueField: "userId",
    descField: "userName",
    controller: "SysUser.controller.ScdpUserSearchController",
    upperCase: !1
});
Ext.define("Scdp.form.JWorkFlowTaskNodeQueryField", {
    extend: "Scdp.form.JQueryField",
    alias: ["widget.JWorkFlowTaskNodeQueryField"],
    multiSelect: !1,
    callbackFn: null,
    afterCallbackFn: null,
    afterWinShowFn: null,
    delimiter: "|",
    defaultFields: "taskId|taskName",
    menuCode: "",
    defaultSearchFields: "",
    isPopup: !1,
    displayDesc: !0,
    valueField: "taskId",
    descField: "taskName",
    controller: "WorkFlowSetup.controller.WorkFlowTaskNodeQueryController",
    upperCase: !1
});
Ext.define("Scdp.grid.ICol", {alias: ["widget.ICol"], style: {textAlign: "center"}});
Ext.define("Scdp.grid.JGroupCol", {
    extend: "Ext.grid.column.Column",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JGroupCol"]
});
Ext.define("Scdp.grid.JRowNumCol", {
    extend: "Ext.grid.column.RowNumberer",
    mixins: ["Scdp.grid.ICol"],
    alias: ["widget.JRowNumCol"]
});
Ext.define("Scdp.grid.JTextCol", {
    extend: "Ext.grid.column.Column",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JTextCol"]
});
Ext.define("Scdp.grid.JIntCol", {
    extend: "Ext.grid.column.Number",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JIntCol"],
    format: "0",
    renderer: function (a, b) {
        return Scdp.ObjUtil.isNotEmpty(a) ? Ext.util.Format.number(a, b.column.format) : null
    }
});
Ext.define("Scdp.grid.JDecCol", {
    extend: "Ext.grid.column.Number",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JDecCol"],
    format: "0" + Scdp.Const.DECIMAL_SEPARATOR_PLACEHOLDER + "00",
    renderer: function (a, b) {
        var c = Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_DECIMAL_SEPARATOR), Ext.util.Format.decimalSeparator), c = Scdp.StrUtil.replaceAll(b.column.format, Scdp.Const.DECIMAL_SEPARATOR_PLACEHOLDER, c);
        return Scdp.ObjUtil.isNotEmpty(a) ? Ext.util.Format.number(a, c) : null
    }
});
Ext.define("Scdp.grid.JCurCol", {
    extend: "Ext.grid.column.Number",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JCurCol"],
    format: "0" + Scdp.Const.THOUSAND_SEPARATOR_PLACEHOLDER + "0" + Scdp.Const.DECIMAL_SEPARATOR_PLACEHOLDER + "00",
    renderer: function (a, b) {
        var c = Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_DECIMAL_SEPARATOR), Ext.util.Format.decimalSeparator), d = Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_THOUSAND_SEPARATOR), Ext.util.Format.thousandSeparator), c = Scdp.StrUtil.replaceAll(Scdp.StrUtil.replaceAll(b.column.format,
            Scdp.Const.DECIMAL_SEPARATOR_PLACEHOLDER, c), Scdp.Const.THOUSAND_SEPARATOR_PLACEHOLDER, d);
        return Scdp.ObjUtil.isNotEmpty(a) ? Ext.util.Format.number(a, c) : null
    }
});
Ext.define("Scdp.grid.JCheckCol", {
    extend: "Ext.grid.column.CheckColumn",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JCheckCol"],
    initComponent: function () {
        this.callParent(arguments);
        this.on("beforecheckchange", function () {
            var a = this.up("JEGrid");
            if (a && !a.editable)return !1
        })
    },
    renderer: function (a, b, c, d, e, f, g) {
        return this.callParent(arguments)
    }
});
Ext.define("Scdp.grid.JRCheckCol", {
    extend: "Scdp.grid.JCheckCol",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JRCheckCol"],
    initComponent: function () {
        this.callParent(arguments);
        this.on("beforecheckchange", function () {
            return !1
        })
    }
});
Ext.define("Scdp.grid.JDateCol", {
    extend: "Ext.grid.column.Date",
    mixins: ["Scdp.grid.ICol"],
    menuDisabled: !0,
    alias: ["widget.JDateCol"],
    needTz: !1,
    format: "Y-m-d",
    renderer: function (a, b, c, d, e, f) {
        return Scdp.ObjUtil.isNotEmpty(a) ? (c = null, Ext.isDate(a) ? c = a : (a = Scdp.StrUtil.replaceFirst(a, "T", " "), c = Scdp.DateUtil.parseDate(a)), Scdp.checkTimezoneforGrid(f, d, b) ? (b = c.getTime(), d = 6E4 * c.getTimezoneOffset(), Scdp.DateUtil.formatDate(new Date(b - d), Scdp.Const.SHORT_DATE_FORMAT)) : Scdp.DateUtil.formatDate(c, Scdp.Const.SHORT_DATE_FORMAT)) :
            null
    }
});
Ext.define("Scdp.grid.JDatetimeCol", {
    extend: "Ext.grid.column.Date",
    menuDisabled: !0,
    alias: ["widget.JDatetimeCol"],
    mixins: ["Scdp.grid.ICol"],
    needTz: !1,
    format: "Y-m-d G:i:s",
    withSeconds: null,
    renderer: function (a, b, c, d, e, f) {
        return Scdp.ObjUtil.isNotEmpty(a) ? (c = null, Ext.isDate(a) ? c = a : (a = Scdp.StrUtil.replaceFirst(a, "T", " "), c = Scdp.DateUtil.parseDate(a)), a = c, Scdp.checkTimezoneforGrid(f, d, b) && (d = c.getTime(), f = 6E4 * c.getTimezoneOffset(), a = new Date(d - f)), !0 === b.column.withSeconds || !1 === b.column.withSeconds ? Scdp.DateUtil.formatDate(a,
            b.column.withSeconds ? Scdp.Const.LONG_DATE_FORMAT : Scdp.Const.BUSINESS_DATE_FORMAT) : Ext.util.Format.date(a, b.column.format)) : null
    }
});
Ext.define("Scdp.grid.JComboCol", {
    extend: "Ext.grid.column.Column",
    menuDisabled: !0,
    alias: ["widget.JComboCol"],
    mixins: ["Scdp.grid.ICol"],
    renderer: function (a, b, c, d, e, f) {
        c = a;
        b = b.column.getEditor();
        if (!0 == b.displayDesc && (f = b.store, 0 >= f.data.items.length && (Scdp.ObjUtil.isNotEmpty(b.comboType) && Scdp.ObjUtil.isEmpty(b.filterFields)) && (d = {}, d.comboType = Scdp.StrUtil.replaceNull(b.comboType), d.codeType = Scdp.StrUtil.replaceNull(b.codeType), d.filterMap = b.filterMap || {}, d = Scdp.StrUtil.getMd5(Ext.encode(d)), f = Ext.StoreManager.lookup(d),
            Scdp.ObjUtil.isEmpty(f) && (f = Ext.widget("JComboStore", {
                storeId: d,
                data: []
            }))), Scdp.ObjUtil.isNotEmpty(c)))if (!0 == b.multiSelect) {
            var g = [];
            0 == c.indexOf(b.delimiter) && (c = Scdp.StrUtil.replaceFirst(c, b.delimiter, ""));
            c.lastIndexOf(b.delimiter) == c.length - 1 && (c = Scdp.StrUtil.replaceLast(c, b.delimiter, ""));
            c = c.split(b.delimiter);
            Ext.each(c, function (a) {
                a = f.findRecord("code", a);
                Scdp.ObjUtil.isNotEmpty(a) && g.push(a.data.codedesc)
            });
            c = g.join(b.delimiter)
        } else a = f.findRecord("code", a), Scdp.ObjUtil.isNotEmpty(a) &&
        (c = a.data.codedesc);
        c = Scdp.StrUtil.replaceNull(c);
        Ext.String.startsWith(c, b.delimiter) && (c = Scdp.StrUtil.replaceFirst(c, b.delimiter, ""));
        Ext.String.endsWith(c, b.delimiter) && (c = Scdp.StrUtil.replaceLast(c, b.delimiter, ""));
        return c
    }
});
Ext.define("Scdp.grid.JQueryFieldCol", {
    extend: "Ext.grid.column.Column",
    menuDisabled: !0,
    alias: ["widget.JQueryFieldCol"],
    mixins: ["Scdp.grid.ICol"],
    renderer: function (a, b, c) {
        return !0 == b.column.getEditor().displayDesc ? c.get(b.column.dataIndex + "Desc") : c.get(b.column.dataIndex)
    }
});
Ext.define("Scdp.grid.JTreeFieldCol", {
    extend: "Ext.grid.column.Column",
    menuDisabled: !0,
    alias: ["widget.JTreeFieldCol"],
    mixins: ["Scdp.grid.ICol"],
    renderer: function (a, b, c) {
        return !0 == b.column.getEditor().displayDesc ? c.get(b.column.dataIndex + "Desc") : c.get(b.column.dataIndex)
    }
});
Ext.define("Scdp.grid.JGridFieldCol", {
    extend: "Ext.grid.column.Column",
    menuDisabled: !0,
    alias: ["widget.JGridFieldCol"],
    mixins: ["Scdp.grid.ICol"],
    renderer: function (a, b, c) {
        a = b.column.getEditor();
        if (!0 == a.displayDesc) {
            var d = c.get(b.column.dataIndex + "Desc");
            return a.forceValidate || !a.forceValidate && Scdp.ObjUtil.isNotEmpty(d) ? d : c.get(b.column.dataIndex)
        }
        return c.get(b.column.dataIndex)
    }
});
Ext.define("Scdp.grid.JComboTreeFieldCol", {
    extend: "Ext.grid.column.Column",
    menuDisabled: !0,
    alias: ["widget.JComboTreeFieldCol"],
    mixins: ["Scdp.grid.ICol"],
    renderer: function (a, b, c) {
        return !0 == b.column.getEditor().displayDesc ? c.get(b.column.dataIndex + "Desc") : c.get(b.column.dataIndex)
    }
});
Ext.define("Scdp.grid.JActionCol", {
    extend: "Ext.grid.column.Action",
    menuDisabled: !0,
    alias: ["widget.JActionCol"],
    mixins: ["Scdp.grid.ICol"],
    width: 50
});
Ext.define("Scdp.grid.JBolCol", {
    extend: "Ext.grid.column.Column",
    alias: ["widget.JBolCol"],
    style: {textAlign: "center"},
    renderer: function (a) {
        return 1 == a ? Scdp.I18N.TRUE_TEXT : Scdp.I18N.FALSE_TEXT
    }
});
Ext.define("Scdp.grid.IGrid", {
    extend: "Ext.grid.Panel",
    mixins: ["Scdp.panel.LiveSearchPanel"],
    frame: !1,
    border: 1,
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    forceFit: !1,
    columns: [],
    store: [],
    editable: !0,
    columnLines: !0,
    prepareEditContext: null,
    showHeaderCheckbox: !0,
    exportDisable: !0,
    autoResizeColumn: Scdp.Const.AUTO_RESIZE_GRID_COLUMN,
    needShowContextMenu: !0,
    initComponent: function () {
        var a = this;
        Scdp.ObjUtil.isEmpty(a.viewConfig) && (a.viewConfig = {});
        Ext.apply(a.viewConfig, {
            stripeRows: !0, loadMask: a.loadMask, markDirty: !1,
            enableTextSelection: !0, getRowClass: function (b) {
                if (Scdp.ObjUtil.isNotEmpty(a.rowColorConfigFn))return a.rowColorConfigFn(b)
            }
        });
        a.callParent(arguments);
        a.withSearchBar && (a.textField = a.down("textfield[name\x3dsearchField]"), a.statusBar = a.down("statusbar[name\x3dsearchStatusBar]"));
        a.on("cellclick", function (b, c, d, e, f, g, h) {
            if (0 == d && "x-grid-cell-inner" == h.target.className.trim() && "x-grid-row-checker" == Scdp.StrUtil.replaceNull(h.target.firstChild.className).trim())return !1;
            if (0 == d && "x-grid-row-checker" ==
                h.target.className.trim() && "x-grid-cell-inner" == Scdp.StrUtil.replaceNull(h.target.parentElement.className).trim())return !0;
            Scdp.DebugUtil.isProdMode() || h.altKey && Scdp.MsgUtil.info("dataIndex:" + b.up().getColumnByIndex(d).dataIndex);
            if (a.needLoadItem)if (c = a.up("IView"), Scdp.ObjUtil.isNotEmpty(c) && "1" == c.viewType) {
                var i = c.controller;
                d = e.raw[c.uuidMapping];
                h = a.getCurRecord() ? a.getCurRecord().raw[c.uuidMapping] : null;
                if (Scdp.ObjUtil.isNotEmpty(i) && Scdp.ObjUtil.isNotEmpty(d) && i.loadItem && d !== h) {
                    if (c.uistatus ==
                        Scdp.Const.UI_INFO_STATUS_NEW || c.uistatus == Scdp.Const.UI_INFO_STATUS_MODIFY)return Scdp.MsgUtil.confirm(Scdp.I18N.DATA_NOT_SAVED, function (c) {
                        "yes" == c && (i.doPreLoad(a, e, f, g), a.setCurRecord(g))
                    }), !1;
                    i.doPreLoad(a, e, f, g)
                }
            } else Scdp.ObjUtil.isNotEmpty(c) && "2" == c.viewType && (i = c.controller, i.doPreLoad(a, e, f, g));
            return !a.validateCurrentRowBindForm || a.validateCurrentRowBindForm() ? (b.focusRow(g), "JEGrid" == a.xtype && (a.beforeSelect && a.beforeSelect(e, g), a.triggerBindComp(e), a.afterSelect && a.afterSelect(e, g)),
                !0) : !1
        });
        a.on("celldblclick", function (b, c, d, e, f, g, h) {
            if (0 == d && "x-grid-cell-inner" == h.target.className.trim() && "x-grid-row-checker" == Scdp.StrUtil.replaceNull(h.target.firstChild.className).trim())return !1;
            if (0 == d && "x-grid-row-checker" == h.target.className.trim() && "x-grid-cell-inner" == Scdp.StrUtil.replaceNull(h.target.parentElement.className).trim())return !0;
            if (a.needLoadItem)if (b = a.up("IView"), Scdp.ObjUtil.isNotEmpty(b) && "2" == b.viewType) {
                var i = b.controller;
                c = e.raw[b.uuidMapping];
                if (Scdp.ObjUtil.isNotEmpty(i) &&
                    Scdp.ObjUtil.isNotEmpty(c) && i.loadItem) {
                    if (b.uistatus == Scdp.Const.UI_INFO_STATUS_NEW || b.uistatus == Scdp.Const.UI_INFO_STATUS_MODIFY)return Scdp.MsgUtil.confirm(Scdp.I18N.DATA_NOT_SAVED, function (c) {
                        "yes" == c && (i.doLoad(a, e, f, g), a.setCurRecord(g))
                    }), !1;
                    i.doLoad(a, e, f, g)
                }
            } else Scdp.ObjUtil.isNotEmpty(b) && "1" == b.viewType && (i = b.controller, i.doLoad(a, e, f, g))
        });
        a.on("cellcontextmenu", function (b, c, d, e, f, g, h) {
            if (0 == d && "x-grid-cell-inner" == h.target.className.trim() && "x-grid-row-checker" == Scdp.StrUtil.replaceNull(h.target.firstChild.className).trim())return !1;
            if (0 == d && "x-grid-row-checker" == h.target.className.trim() && "x-grid-cell-inner" == Scdp.StrUtil.replaceNull(h.target.parentElement.className).trim())return !0;
            if (a.needShowContextMenu) {
                h.preventDefault();
                var i = Scdp.StrUtil.getUUID(), j = Scdp.StrUtil.getUUID();
                g = Scdp.StrUtil.getUUID();
                e = Scdp.StrUtil.getUUID();
                b = Scdp.StrUtil.getUUID();
                d = Scdp.StrUtil.getUUID();
                a.recordContextMenu = Ext.create("Ext.menu.Menu", {
                    id: d, items: [{xtype: "JSysMenuItem", id: i, text: Scdp.I18N.GRID_COPY_CELL_VALUE, iconCls: ""}, {
                        xtype: "JSysMenuItem",
                        id: j, text: Scdp.I18N.GRID_COPY_ROW_VALUE, iconCls: ""
                    }, {
                        xtype: "JSysMenuItem",
                        id: g,
                        text: Scdp.I18N.GRID_EXPORT_TO_EXCEL,
                        iconCls: ""
                    }, {
                        xtype: "JSysMenuItem",
                        id: e,
                        text: Scdp.I18N.GRID_RESIZE_COLUMN_WIDTH,
                        iconCls: ""
                    }, {xtype: "JSysMenuItem", id: b, text: Scdp.I18N.GRID_RESTORE_COLUMN_WIDTH, iconCls: ""}]
                });
                a.recordContextMenu.showAt(h.xy[0], h.xy[1]);
                c = Scdp.StrUtil.replaceNull(c.innerText);
                c = Scdp.StrUtil.replaceAll(c, " ", "");
                c.endsWith("\n") && (c = c.substr(0, c.length - 1));
                h = new ZeroClipboard.Client;
                h.setHandCursor(!0);
                h.setText(c);
                h.glue(i, d);
                h.addEventListener("mouseup", function () {
                    a.recordContextMenu.hide()
                });
                f = Scdp.StrUtil.replaceAll(f.innerText, "\n", "\t");
                f = Scdp.StrUtil.replaceAll(f, " ", "");
                f.endsWith("\t") && (f = f.substr(0, f.length - 1));
                c = new ZeroClipboard.Client;
                c.setText(f);
                c.glue(j, d);
                c.addEventListener("mouseup", function () {
                    a.recordContextMenu.hide()
                });
                f = new ZeroClipboard.Client;
                f.setText("");
                f.glue(g, d);
                f.addEventListener("mouseup", function () {
                    a.recordContextMenu.hide();
                    a.downloadExcelXml(!1)
                });
                f = new ZeroClipboard.Client;
                f.setText("");
                f.glue(e, d);
                f.addEventListener("mouseup", function () {
                    a.recordContextMenu.hide();
                    a.resizeColumnWidth()
                });
                f = new ZeroClipboard.Client;
                f.setText("");
                f.glue(b, d);
                f.addEventListener("mouseup", function () {
                    a.recordContextMenu.hide();
                    a.restoreDefaultColumnWidth()
                })
            }
        });
        a.store.on("datachanged", function () {
            a.getSelectionModel().setLastFocused(null)
        })
    },
    findRecod: function (a, b) {
        return this.getStore().findRecord(a, b, 0, !1, !0, !0)
    },
    getColumnByIndex: function (a) {
        return this.withSelMode ? this.columns[a - 1] : this.columns[a]
    },
    getColumnBydataIndex: function (a) {
        var b = null;
        Ext.each(this.columns, function (c) {
            if (c.dataIndex == a)return b = c, !1
        });
        return b
    },
    getRecordByRowIndex: function (a) {
        return this.getStore().getAt(a)
    },
    getSelectedRecords: function () {
        return this.getSelectionModel().getSelection()
    },
    getCurRecord: function () {
        return this.getSelectionModel().getLastFocused()
    },
    setCurRecord: function (a) {
        0 == this.store.getCount() && this.getSelectionModel().setLastFocused(null);
        this.getSelectionModel().deselect(a);
        this.getSelectionModel().select(a);
        this.getView().focusRow(a);
        a = Ext.isNumber(a) ? this.getRecordByRowIndex(a) : a;
        Scdp.ObjUtil.isNotEmpty(a) && Scdp.ObjUtil.isNotEmpty(this.triggerBindComp) && this.triggerBindComp(a);
        return a
    },
    resizeColumnWidth: function () {
        0 >= this.store.getCount() || Ext.each(this.columns, function (a) {
            a.autoSize && (!a.hidden && "rownumberer" != a.xtype) && (a.autoSize(), a.setWidth(a.getWidth() + 20))
        })
    },
    restoreDefaultColumnWidth: function () {
        Ext.each(this.columns, function (a) {
            if (a.isGroupHeader) {
                a = a.query("gridcolumn:not([hidden]):not([isGroupHeader])");
                for (var b = 0; b < a.length; b++) {
                    var c = a[b];
                    c.setWidth && (!c.hidden && c.initWidth) && c.setWidth(c.initWidth)
                }
            } else a.setWidth && (!a.hidden && a.initWidth) && a.setWidth(a.initWidth)
        })
    },
    downloadExcelXml: function (a, b) {
        b || (b = this.title || "sheet1");
        var c = this.getExcelXml(a, b), d = "data:application/vnd.ms-excel;base64," + Base64.encode(c);
        Ext.isChrome ? (c = this.getEl(), c = Ext.DomHelper.append(c, {
            tag: "a",
            download: Scdp.getSysConfig("PRODUCT_CODE") + "_" + Ext.Date.format(new Date, "YmdHisu") + ".xls",
            href: d
        }), c.click(), Ext.fly(c).destroy()) :
            ((d = Ext.get("frmDummy")) || (d = Ext.DomHelper.append(Ext.getBody(), {
                tag: "form",
                method: "post",
                id: "frmDummy",
                action: Scdp.getSysConfig("BASE_PATH") + "framework/jsp/generate_excel.jsp",
                target: "reportframe",
                name: "frmDummy",
                cls: "x-hidden",
                cn: [{tag: "input", name: "exportXlsContentDummy", id: "exportXlsContentDummy", type: "hidden"}]
            }, !0)), d.child("#exportXlsContentDummy").set({value: c}), d.dom.submit())
    },
    mergeCellsByCol: function (a) {
        var b = document.getElementById(this.getId() + "-body").firstChild.firstChild.lastChild.getElementsByTagName("tr"),
            c = b.length, d, e, f = function (a, c) {
                0 != a.rowspan && (d = b[a.tr].getElementsByTagName("td"), e = d[a.td - 1], e.rowSpan = a.rowspan, e.vAlign = "middle", Ext.each(c, function (a) {
                    d = b[a.tr].getElementsByTagName("td");
                    d[a.td - 1].style.display = "none"
                }))
            }, g = {}, h = [], i;
        Ext.each(a, function (e) {
            for (var k = null, l = 0; l < c; l++)if (d = b[l].getElementsByTagName("td"), i = e + 0, k) {
                var m = d[i - 1].innerHTML, m = $(m).text(), n = function () {
                    g.rowspan += 1;
                    h.push({tr: l, td: i});
                    l == c - 1 && f(g, h)
                }, o = function () {
                    f(g, h);
                    k = m;
                    g = {tr: l, td: i, rowspan: 1};
                    h = []
                };
                m == k ? e != a[0] ?
                    "none" == d[i - 2].style.display ? n() : o() : n() : o()
            } else k = d[i - 1].innerHTML, k = $(k).text(), g = {tr: l, td: i, rowspan: 1}
        })
    },
    span: function (a, b, c, d) {
        switch (c) {
            case "row":
                c = Ext.get(this.view.getNode(a)).query("td");
                Ext.get(c[b]).set({rowspan: d});
                Ext.get(Ext.get(c[b])).setStyle({"vertical-align": "middle"});
                for (c = a + 1; c < a + d; c++)Ext.get(Ext.get(this.view.getNode(c)).query("td")[b]).destroy();
                break;
            case "col":
                c = Ext.get(this.view.lockedView.getNode(a)).query("td"), Ext.get(c[b]).set({colspan: d})
        }
    }
});
Ext.define("Scdp.grid.JQGrid", {
    extend: "Scdp.grid.IGrid",
    loadMask: !1,
    alias: ["widget.JQGrid"],
    ignoreCaseDisable: !0,
    multiSortDisable: !0,
    addNewDisable: !0,
    batchDelDisable: !0,
    withPagingToolbar: !0,
    needSplitPage: !0,
    viewClassName: "",
    selMode: "MULTI",
    withSelMode: !0,
    enableKeyNav: !1,
    enableKeyEvents: !0,
    defaultSelect: !1,
    hideLiveSearchBtn: !1,
    mergeCols: [],
    initComponent: function () {
        var a = this;
        a.withSelMode && (a.selModel = Ext.create("Ext.selection.CheckboxModel", {
            mode: a.selMode, enableKeyNav: a.enableKeyNav, ignoreRightMouseSelection: !0,
            showHeaderCheckbox: a.showHeaderCheckbox
        }));
        var b = Scdp.CacheUtil.get(Scdp.Const.COMMON_QUERY_IGNORE_CASE_CACHE);
        Scdp.ObjUtil.isEmpty(b) && (b = Scdp.Const.COMMON_QUERY_IGNORECASE_DEFAULT);
        var c = Scdp.CacheUtil.get(Scdp.Const.COMMON_QUERY_MULTI_SORT_CACHE);
        Scdp.ObjUtil.isEmpty(c) && (c = Scdp.Const.COMMON_QUERY_MULTISORT_DEFAULT);
        var d = Scdp.CacheUtil.get(Scdp.Const.COMMON_QUERY_PAGE_SIZE_CACHE);
        Scdp.ObjUtil.isEmpty(d) && (d = Scdp.Const.GRID_EVERY_PAGE_SHOW_RECORDS_DEFAULT);
        a.setSearchBar();
        a.withPagingToolbar &&
        (a.dockedItems = [{
            xtype: "pagingtoolbar",
            store: [],
            padding: "0 0 0 0",
            margin: "0 0 0 0",
            displayInfo: !0,
            beforePageText: "",
            afterPageText: " / {0}",
            displayMsg: "\x26lt;{2} " + Scdp.I18N.SCDP_RECORDS + "\x26gt;",
            height: 23,
            dock: "bottom",
            items: [{
                xtype: "JCombo",
                cid: "pageSize",
                hideLabel: !0,
                store: "JPageSizeComboStore",
                width: 50,
                displayDesc: !0,
                value: d,
                hidden: a.pageSizeComboHidden ? a.pageSizeComboHidden : !a.needSplitPage,
                editable: !1
            }, {xtype: "JTbSpacer"}, {
                xtype: "JCheck", cid: "ignoreCase", hidden: a.ignoreCaseDisable, boxLabel: Scdp.I18N.IGNORE_CASE,
                checked: b
            }, {xtype: "JTbSpacer"}, {
                xtype: "JCheck",
                cid: "multiSort",
                hidden: a.multiSortDisable,
                boxLabel: Scdp.I18N.MULTI_SORT,
                checked: c
            }, {xtype: "JTbSpacer"}, {
                xtype: "JButton",
                cid: "addNew1Btn",
                hidden: a.addNewDisable,
                border: 1,
                text: Scdp.I18N.ADD_BTN,
                iconCls: "add_btn"
            }, {xtype: "JTbSpacer"}, {
                xtype: "JButton",
                cid: "batchDelBtn",
                hidden: a.batchDelDisable || Scdp.Const.HIDE_BATCH_DEL_BTN_IN_QUERY_PANEL,
                border: 1,
                text: Scdp.I18N.BATCH_DELETE_BTN,
                iconCls: "delete_btn"
            }, "-", {xtype: "JToolBar", border: 0, cid: "queryToolbar", items: []},
                "-"]
        }], a.dockedItems[0].store = a.store);
        a.callParent(arguments);
        if (!a.needSplitPage) {
            d = a.down("pagingtoolbar").down();
            b = [d];
            for (c = 0; 10 > c; c++)d = d.next(), b.push(d);
            Ext.each(b, function (a) {
                a.setVisible(!1)
            })
        }
        a.store.on("load", function () {
            a.autoResizeColumn && a.resizeColumnWidth();
            a.mergeCols instanceof Array && 0 < a.mergeCols.length && a.mergeCellsByCol(a.mergeCols);
            a.defaultSelect && a.setCurRecord(0)
        });
        a.on("columnresize", function (a, c, b) {
            a = this.viewClassName;
            if (Scdp.ObjUtil.isNotEmpty(a)) {
                var d = this.cid;
                Ext.each(this.resultColumns,
                    function (a) {
                        Scdp.ObjUtil.isNotEmpty(a.dataIndex) && a.dataIndex == c.dataIndex && (a.width = b)
                    });
                Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_JQGRID_COLUMN_DEF, a + "_" + d, this.resultColumns)
            }
        });
        a.on("columnmove", function (a, c, b, d) {
            a = this.viewClassName;
            if (Scdp.ObjUtil.isNotEmpty(a)) {
                c = [];
                var i = this.cid, j = 0;
                if (b < d) {
                    for (j = 0; j < b - 1; j++)c.push(this.resultColumns[j]);
                    for (j = b; j < d - 1; j++)c.push(this.resultColumns[j]);
                    c.push(this.resultColumns[b - 1]);
                    j = d - 1
                } else {
                    for (j = 0; j < d - 1; j++)c.push(this.resultColumns[j]);
                    c.push(this.resultColumns[b -
                    1]);
                    for (j = d - 1; j < b - 1; j++)c.push(this.resultColumns[j]);
                    j = b
                }
                for (; j < this.resultColumns.length; j++)c.push(this.resultColumns[j]);
                this.resultColumns = c;
                Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_JQGRID_COLUMN_DEF, a + "_" + i, c)
            }
        });
        a.on("itemkeydown", function (a, c, b, d, i) {
            i.getKey() == Ext.EventObject.ENTER && this.enterFn && this.enterFn()
        });
        a.on("renderer", function (a) {
            return a
        })
    }
});
Ext.define("Scdp.grid.JEGrid", {
    extend: "Scdp.grid.IGrid",
    alias: ["widget.JEGrid"],
    mixins: ["Scdp.container.IContainer"],
    columnLines: !0,
    header: !0,
    hideHeaders: !1,
    sortableColumns: !1,
    sealedColumns: !0,
    enableColumnHide: !1,
    enableColumnMove: !1,
    enableColumnResize: !0,
    hideCopyAdd: !1,
    withToolbar: !0,
    toolbarAtBottom: !1,
    withSelMode: !1,
    selMode: "MULTI",
    rowAddFn: null,
    rowDelFn: null,
    afterSotValue: null,
    readOnlyColumns: [],
    adaptable: !0,
    forceSelectWhenValidateFail: !0,
    setbindCompEditableAfterSelect: null,
    firstColumnFocus: !0,
    copyRowToCurrentBelow: !1,
    initComponent: function () {
        var a = this;
        Scdp.ObjUtil.isEmpty(a.title) && (a.header = !1);
        a.withSelMode && (a.selModel = Ext.create("Ext.selection.CheckboxModel", {
            mode: a.selMode,
            enableKeyNav: !1,
            ignoreRightMouseSelection: !0,
            showHeaderCheckbox: a.showHeaderCheckbox
        }));
        a.columns = Ext.Array.union([{xtype: "rownumberer", width: 35}], a.columns);
        a.setSearchBar();
        if (a.withToolbar) {
            var b = [];
            a.toolbarAtBottom && b.push("-\x3e");
            b.push({
                xtype: "button", tooltip: Scdp.I18N.ADD_GRID_ROW, cid: "addRowBtn", iconCls: "grid_row_add",
                listeners: {
                    click: function (c) {
                        Scdp.ObjUtil.isNotEmpty(a.rowAddFn) ? a.rowAddFn(c) : this.up("JEGrid").doAddRow(c)
                    }
                }
            });
            a.hideCopyAdd || b.push({
                xtype: "button",
                tooltip: Scdp.I18N.COPY_ADD_GRID_ROW,
                cid: "copyAddRowBtn",
                iconCls: "grid_row_copy",
                listeners: {
                    click: function (c) {
                        Scdp.ObjUtil.isNotEmpty(a.rowAddFn) ? a.rowAddFn(c) : this.up("JEGrid").doCopyAddRow(c)
                    }
                }
            });
            b.push({
                xtype: "button",
                tooltip: Scdp.I18N.DEL_GRID_ROW,
                cid: "delRowBtn",
                iconCls: "grid_row_delete",
                handler: function (c) {
                    Scdp.ObjUtil.isNotEmpty(a.rowDelFn) ? a.rowDelFn(c) :
                        this.up("JEGrid").doDeleteRow(c)
                }
            });
            b.push({
                xtype: "button",
                tooltip: Scdp.I18N.MOVE_GRID_ROW_TOP,
                cid: "rowMoveTopBtn",
                iconCls: "grid_row_move_top",
                handler: a.rowDelFn || function (a) {
                    this.up("JEGrid").doMoveTopRow(a)
                }
            });
            b.push({
                xtype: "button",
                tooltip: Scdp.I18N.MOVE_GRID_ROW_UP,
                cid: "rowMoveUpBtn",
                iconCls: "grid_row_move_up",
                handler: function (a) {
                    this.up("JEGrid").doMoveUpRow(a)
                }
            });
            b.push({
                xtype: "button",
                tooltip: Scdp.I18N.MOVE_GRID_ROW_DOWN,
                cid: "rowMoveDownBtn",
                iconCls: "grid_row_move_down",
                handler: function (a) {
                    this.up("JEGrid").doMoveDownRow(a)
                }
            });
            b.push({
                xtype: "button",
                tooltip: Scdp.I18N.MOVE_GRID_ROW_BOTTOM,
                cid: "rowMoveBottomBtn",
                iconCls: "grid_row_move_bottom",
                handler: function (a) {
                    this.up("JEGrid").doMoveBottomRow(a)
                }
            });
            a.toolbarAtBottom ? a.bbar = {
                padding: "0 0 0 0",
                margin: "2 0 0 0",
                ui: "footer",
                cid: "toolbar",
                items: b
            } : a.rbar = {padding: "0 0 0 0", margin: "0 0 0 2", ui: "footer", cid: "toolbar", items: b}
        }
        a.cellEditing = Ext.create("Ext.grid.plugin.CellEditing", {clicksToEdit: 1, editable: !0, uniformMode: !0});
        a.plugins = [a.cellEditing];
        a.isBind && (b = function () {
            var c =
                a.up("IView").getCmp(Scdp.StrUtil.replaceLast(a.bcid, ".bind", "")).getCurRecord();
            a.dataChangeFlag || Scdp.ObjUtil.isNotEmpty(c) && (Scdp.ObjUtil.isEmpty(c.get("uuid")) ? c.set(a.cid, a.gotValue(!1)) : c.set(a.cid + "_c", a.gotValue(!0)))
        }, a.store.on("update", b), a.store.on("datachanged", b));
        a.callParent(arguments);
        a.on("edit", function (a, b) {
            if (!this.beforeEditGrid || this.beforeEditGrid(b)) {
                var e = this.getView(), f = this.getStore(), g = b.column.getEditor();
                g.rowIndex = b.rowIdx;
                null != g && Scdp.validateEditor(e, g, b.column,
                    f.getAt(b.rowIdx));
                e = !0;
                g.isXType("datefield") && 0 == Scdp.DateUtil.dateDiff(b.originalValue, b.value) ? e = !1 : b.originalValue == b.value && (e = !1);
                g.isEditable() && g.isChanged() && g.isValid() && g.cascadeLoad && g.cascadeLoad(!0);
                this.afterEditGrid && this.afterEditGrid(b, e);
                return !1
            }
        });
        a.on("beforeedit", function (c, b) {
            if (a.beforeBeforeEditGrid && !a.beforeBeforeEditGrid(a, c, b))return !1;
            var e = a.editable;
            a.prepareEditContext = b;
            a.setCurRecord(b.rowIdx);
            return e
        });
        a.afterInit && a.afterInit(a)
    },
    validateCurrentRowBindForm: function () {
        if (!Scdp.ObjUtil.isEmpty(this.up("IView"))) {
            var a =
                this.up("IView").getCmp(this.cid + ".bind", !0);
            return !(this.forceSelectWhenValidateFail && Scdp.ObjUtil.isNotEmpty(a) && Scdp.ObjUtil.isNotEmpty(a[0]) && a[0].canEdit && !a[0].validate())
        }
    },
    triggerBindComp: function (a) {
        var b = this.up("IView");
        if (!Scdp.ObjUtil.isEmpty(b)) {
            var c = b.getCmp(this.cid + ".bind", !0);
            if (Scdp.ObjUtil.isNotEmpty(c))for (var d = 0; d < c.length; d++) {
                var e = c[d];
                if (Scdp.ObjUtil.isNotEmpty(e)) {
                    if ("JForm" === e.xtype)e.sotValue(a.getData(), !0); else if ("JEGrid" === e.xtype) {
                        var f = e.cid, g = a.get(f), f = a.get(f +
                            "_c");
                        e.sotValue(g, !0);
                        e.clearDirty();
                        g = e.getStore();
                        if (Scdp.ObjUtil.isNotEmpty(f))for (var h = 0; h < f.length; h++) {
                            var i = f[h], j = i.uuid;
                            switch (i.editflag) {
                                case "":
                                case "+":
                                    g.add(i);
                                    break;
                                case "*":
                                    var k = g.findRecord("uuid", j, 0, !1, !0, !0);
                                    null !== k && Ext.Object.each(i, function (a, b) {
                                        k.set(a, b)
                                    });
                                    break;
                                case "-":
                                    i = g.findRecord("uuid", j, 0, !1, !0, !0), null !== i && g.remove(i)
                            }
                        }
                        e.setCurRecord(0)
                    }
                    this.setbindCompEditableAfterSelect && "function" == typeof this.setbindCompEditableAfterSelect && !0 === this.setbindCompEditableAfterSelect(this,
                        a, e, b.uistatus) || e.sotEditable(b.uistatus === Scdp.Const.UI_INFO_STATUS_NEW || b.uistatus === Scdp.Const.UI_INFO_STATUS_MODIFY, !0)
                }
            }
        }
    },
    getMergeBindData: function (a, b) {
        var c = Ext.clone(a.get(b)), d = a.get(b + "_c");
        return Scdp.getMergedData(c, d)
    },
    setAdaptable: function (a) {
        this.adaptable = a
    },
    gotValue: function (a) {
        var b = this.getStore(), c = [];
        if (!0 == a) {
            a = b.getNewRecords();
            var d = b.getUpdatedRecords(), b = b.getRemovedRecords();
            Ext.Array.each(a, function (a) {
                a = Ext.clone(a.data);
                a.editflag = "+";
                c.push(a)
            });
            Ext.Array.each(b, function (a) {
                var b =
                {editflag: "-"};
                b.uuid = a.data.uuid;
                c.push(b)
            });
            Ext.Array.each(d, function (a) {
                var b = a.data;
                a = a.getChanges();
                a.editflag = "*";
                a.uuid = b.uuid;
                c.push(a)
            })
        } else b = b.getRange(0, b.getCount() - 1), Ext.Array.each(b, function (a) {
            a = Ext.clone(a.data);
            Scdp.ObjUtil.isEmpty(a.editflag) && (a.editflag = "+");
            c.push(a)
        });
        return c
    },
    sotValue: function (a, b, c) {
        c && Scdp.wrapDataForRemoveSystemFields(a);
        var d = this.getStore();
        this.dataChangeFlag = !0;
        Scdp.ObjUtil.isNotEmpty(a) ? (Ext.each(a, function (a) {
            a.hasOwnProperty("seqNo") && Scdp.ObjUtil.isEmpty(a.seqNo) &&
            (a.seqNo = Scdp.getMaxSnoInStore(d) + 1)
        }), d.loadRawData(a)) : d.loadRawData([]);
        a = this.up("IView").getCmp(this.cid + ".bind", !0);
        if (Scdp.ObjUtil.isNotEmpty(a))for (c = 0; c < a.length; c++) {
            var e = a[c];
            Scdp.ObjUtil.isNotEmpty(e) && (e.clearData(), e.sotEditable(!1))
        }
        this.getSelectionModel().setLastFocused(null);
        b || this.setCurRecord(0);
        this.dataChangeFlag = !1;
        this.autoResizeColumn && this.resizeColumnWidth();
        "function" == typeof this.afterSotValue && this.afterSotValue.call(this)
    },
    getCellValue: function (a, b) {
        var c = this.getStore(),
            d = this.columns;
        return null != c && 0 < c.getCount() ? c.getAt(a).get(d[b].dataIndex) : null
    },
    startEditByPosition: function (a, b) {
        if (this.firstColumnFocus) {
            var c = this.cellEditing;
            Scdp.ObjUtil.isNotEmpty(c) && c.startEditByPosition({row: a, column: b})
        }
    },
    reset: function () {
        this.getStore().rejectChanges();
        var a = this.up("IView").getCmp(this.cid + ".bind", !0);
        if (Scdp.ObjUtil.isNotEmpty(a))for (var b = 0; b < a.length; b++) {
            var c = a[b];
            Scdp.ObjUtil.isNotEmpty(c) && (c.reset(), c.sotEditable(!1))
        }
    },
    sotEditable: function (a, b) {
        var c = this.getEditToolbar();
        c && (c = c.query("[xtype\x3dbutton]"), Ext.each(c, function (b) {
            a ? b.enable() : b.disable()
        }), this.forceComponentLayout());
        this.adaptable && (this.editable = a);
        if (!0 !== b && (c = this.up("IView").getCmp(this.cid + ".bind", !0), Scdp.ObjUtil.isNotEmpty(c)))for (var d = 0; d < c.length; d++) {
            var e = c[d];
            Scdp.ObjUtil.isNotEmpty(e) && (!1 == a || "JForm" !== e.xtype) && e.sotEditable(a, !0)
        }
    },
    validate: function () {
        var a = !0, b = this.getView(), c = this.getStore();
        if (0 == c.getCount())a = !0; else for (var d = this.columns, e = 0; e < c.getCount(); e++)for (var f =
            0; f < d.length; f++) {
            var g = d[f].getEditor ? d[f].getEditor() : null;
            Scdp.ObjUtil.isEmpty(g) || (g.rowIndex = e, Scdp.validateEditor(b, g, d[f], c.getAt(e)) || (a = !1))
        }
        b = this.up("IView").getCmp(this.cid + ".bind", !0);
        return Scdp.ObjUtil.isNotEmpty(b) && Scdp.ObjUtil.isNotEmpty(b[0]) && b[0].canEdit ? a && b[0].validate() : a
    },
    clearData: function () {
        var a = this, b = this.up("IView").getCmp(this.cid + ".bind", !0), c = this.store.getRange(0, this.store.getCount());
        Ext.Array.each(c, function (b) {
            a.store.remove(b)
        });
        if (Scdp.ObjUtil.isNotEmpty(b))for (c =
                                                0; c < b.length; c++) {
            var d = b[c];
            Scdp.ObjUtil.isNotEmpty(d) && (d.clearData(), d.sotEditable(!1))
        }
        this.getSelectionModel().setLastFocused(null)
    },
    clearDirty: function () {
        this.getStore().sync();
        this.setCurRecord(0)
    },
    isDirty: function () {
        var a = !1, b = this.getStore(), c = b.getNewRecords(), d = b.getUpdatedRecords(), b = b.getRemovedRecords();
        Scdp.ObjUtil.isNotEmpty(c) && (a = !0);
        Scdp.ObjUtil.isNotEmpty(d) && (a = !0);
        Scdp.ObjUtil.isNotEmpty(b) && (a = !0);
        return a
    },
    setReadOnlyCss: function () {
    },
    doAddRow: function (a) {
        if (this.validateCurrentRowBindForm()) {
            a =
                a.ownerCt.ownerCt;
            var b = {};
            a.beforeAddRow && a.beforeAddRow(b);
            a.addRow(b)
        }
    },
    addRow: function (a) {
        a || (a = {});
        this.addRowItem(a, !1);
        this.setReadOnlyCss(this);
        a = this.store.getCount() - 1;
        var b = 1;
        this.withSelMode && (b = 2);
        this.setCurRecord(a);
        this.startEditByPosition(a, b);
        a = this.up("IView").getCmp(this.cid + ".bind", !0);
        if (Scdp.ObjUtil.isNotEmpty(a))for (b = 0; b < a.length; b++) {
            var c = a[b];
            if (Scdp.ObjUtil.isNotEmpty(c) && c.isXType("JForm")) {
                c.getFirstEditableField().focus();
                break
            }
        }
        this.afterAddRow && this.afterAddRow()
    },
    doCopyAddRow: function (a) {
        if (this.validateCurrentRowBindForm()) {
            a = a.ownerCt.ownerCt;
            var b = a.getCurRecord();
            Scdp.ObjUtil.isEmpty(b) ? Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT) : (b = Ext.clone(b.data), Scdp.wrapDataForMerge(b), Scdp.wrapDataForRemoveSystemFields(b), a.beforeCopyAddRow && !1 === a.beforeCopyAddRow(b) || a.copyAddRow(b))
        }
    },
    copyAddRow: function (a) {
        this.addRowItem(a, !1, this.copyRowToCurrentBelow);
        this.setReadOnlyCss(this);
        a = this.store.indexOf(this.getCurRecord());
        var b = 1;
        this.withSelMode && (b = 2);
        this.setCurRecord(a);
        this.startEditByPosition(a, b);
        a = this.up("IView").getCmp(this.cid + ".bind", !0);
        if (Scdp.ObjUtil.isNotEmpty(a))for (b = 0; b < a.length; b++) {
            var c = a[b];
            if (Scdp.ObjUtil.isNotEmpty(c) && c.isXType("JForm")) {
                c.getFirstEditableField().focus();
                break
            }
        }
        this.afterCopyAddRow && this.afterCopyAddRow()
    },
    doDeleteRow: function (a) {
        var b = a.ownerCt.ownerCt;
        a = b.getSelectionModel().getSelection();
        if (0 == a.length)Scdp.MsgUtil.warn(Scdp.I18N.NO_RECORDS_SELECT); else {
            if (b.beforeDeleteRow) {
                if (!1 === b.beforeDeleteRow(a))return
            } else if (!0 ===
                Scdp.Const.CONFIRM_BEFORE_REMOVE_IN_JEGRID) {
                Scdp.MsgUtil.confirm(Scdp.I18N.DELETE_CONFIRM, function (a) {
                    "yes" == a && b.deleteRow()
                });
                return
            }
            b.deleteRow()
        }
    },
    deleteRow: function () {
        var a = this.getStore(), b = this.getSelectionModel().getSelection(), c = a.indexOf(b[0]);
        a.remove(b);
        0 < c ? this.setCurRecord(c - 1) : this.setCurRecord(0);
        if (0 === a.getCount() && (a = this.up("IView").getCmp(this.cid + ".bind", !0), Scdp.ObjUtil.isNotEmpty(a)))for (b = 0; b < a.length; b++)c = a[b], Scdp.ObjUtil.isNotEmpty(c) && (c.clearData(), c.sotEditable(!1));
        this.setReadOnlyCss(this);
        this.afterDeleteRow && this.afterDeleteRow()
    },
    doMoveUpRow: function (a) {
        a = a.ownerCt.ownerCt;
        var b = a.getStore(), c = a.getCurRecord();
        c ? a.beforeMoveUpRow && !1 === a.beforeMoveUpRow(c) || (0 == b.indexOf(c) ? Scdp.MsgUtil.warn(Scdp.I18N.ALREADY_FIRST_ROW) : a.moveUpRow()) : Scdp.MsgUtil.warn(Scdp.I18N.NO_RECORDS_SELECT)
    },
    moveUpRow: function () {
        var a = this.getStore(), b = this.getCurRecord(), b = a.indexOf(b), c = a.getAt(b), d = c.get("seqNo"), e = a.getAt(b - 1), f = e.get("seqNo");
        c.set("seqNo", f);
        e.set("seqNo", d);
        Scdp.sortBy(a, "seqNo");
        this.setCurRecord(b - 1);
        this.setReadOnlyCss(this);
        this.afterMoveUpRow && this.afterMoveUpRow()
    },
    doMoveDownRow: function (a) {
        a = a.ownerCt.ownerCt;
        var b = a.getStore(), c = a.getCurRecord();
        c || Scdp.MsgUtil.warn(Scdp.I18N.NO_RECORDS_SELECT);
        a.beforeMoveDownRow && !1 === a.beforeMoveDownRow(c) || (c = b.indexOf(c), b = b.getCount(), c == b - 1 ? Scdp.MsgUtil.warn(Scdp.I18N.ALREADY_LAST_ROW) : a.moveDownRow())
    },
    moveDownRow: function () {
        var a = this.getStore(), b = this.getCurRecord(), b = a.indexOf(b), c = a.getAt(b), d = c.get("seqNo"),
            e = a.getAt(b + 1), f = e.get("seqNo");
        c.set("seqNo", f);
        e.set("seqNo", d);
        Scdp.sortBy(a, "seqNo");
        this.setCurRecord(b + 1);
        this.setReadOnlyCss(this);
        this.afterMoveDownRow && this.afterMoveDownRow()
    },
    doMoveTopRow: function (a) {
        a = a.ownerCt.ownerCt;
        var b = a.getStore(), c = a.getCurRecord();
        c || Scdp.MsgUtil.warn(Scdp.I18N.NO_RECORDS_SELECT);
        a.beforeMoveTopRow && !1 === a.beforeMoveTopRow(c) || (0 == b.indexOf(c) ? Scdp.MsgUtil.warn(Scdp.I18N.ALREADY_FIRST_ROW) : a.moveTopRow())
    },
    moveTopRow: function () {
        for (var a = this.getStore(), b = this.getCurRecord(),
                 c = b = a.indexOf(b); 0 < c; c--) {
            var d = a.getAt(b), e = d.get("seqNo"), f = a.getAt(c - 1), g = f.get("seqNo");
            d.set("seqNo", g);
            f.set("seqNo", e)
        }
        Scdp.sortBy(a, "seqNo");
        this.setCurRecord(0);
        this.setReadOnlyCss(this);
        this.afterMoveTopRow && this.afterMoveTopRow()
    },
    doMoveBottomRow: function (a) {
        a = a.ownerCt.ownerCt;
        var b = a.getStore(), c = a.getCurRecord();
        c || Scdp.MsgUtil.warn(Scdp.I18N.NO_RECORDS_SELECT);
        a.beforeMoveBottomRow && !1 === a.beforeMoveBottomRow(c) || (c = b.indexOf(c), b = b.getCount(), c == b - 1 ? Scdp.MsgUtil.warn(Scdp.I18N.ALREADY_LAST_ROW) :
            a.moveBottomRow())
    },
    moveBottomRow: function () {
        for (var a = this.getStore(), b = this.getCurRecord(), b = a.indexOf(b), c = a.getCount(), d = b; d < c - 1; d++) {
            var e = a.getAt(b), f = e.get("seqNo"), g = a.getAt(d + 1), h = g.get("seqNo");
            e.set("seqNo", h);
            g.set("seqNo", f)
        }
        Scdp.sortBy(a, "seqNo");
        this.setCurRecord(c - 1);
        this.setReadOnlyCss(this);
        this.afterMoveBottomRow && this.afterMoveBottomRow()
    },
    addRowItem: function (a, b, c) {
        var d = this.getStore(), e = Ext.ModelManager.create({}, this.store.model.modelName);
        if (Scdp.ObjUtil.isNotEmpty(a)) {
            var f =
                Scdp.ObjUtil.getKeys(a);
            Ext.each(f, function (b) {
                e.beginEdit();
                e.set(b, a[b]);
                e.endEdit()
            })
        }
        var f = d.getCount(), g = this.getCurRecord();
        if (c && g) {
            var f = d.indexOf(g) + 1, h = g.get("seqNo");
            Scdp.ObjUtil.isNotEmpty(h) && (e.set("seqNo", ++h), Ext.Array.each(d.getRange(f, d.getCount()), function (a) {
                a.set("seqNo", ++h)
            }))
        } else e.set("seqNo", Scdp.getMaxSnoInStore(d) + 1);
        b && this.clearData();
        this.store.insert(f, e);
        this.setCurRecord(f)
    },
    addRowItems: function (a, b) {
        var c = this.getStore();
        if (Scdp.ObjUtil.isNotEmpty(a)) {
            b && this.clearData();
            for (var d = 0; d < a.length; d++) {
                var e = a[d], f = Ext.ModelManager.create({}, this.store.model.modelName);
                if (Scdp.ObjUtil.isNotEmpty(e)) {
                    var g = Scdp.ObjUtil.getKeys(e);
                    Ext.each(g, function (a) {
                        f.set(a, e[a])
                    })
                }
                f.set("seqNo", Scdp.getMaxSnoInStore(c) + 1);
                this.store.insert(c.getCount(), f)
            }
        }
        this.setCurRecord(c.getCount() - 1)
    },
    getEditToolbar: function () {
        return this.withToolbar ? this.getCmp("toolbar") : void 0
    }
});
Scdp.checkTimezoneforGrid = function (a, b, c) {
    return c.column.needTz || ("createTime" == c.column.dataIndex || "updateTime" == c.column.dataIndex) && ("undefined" != typeof a.getAt(b).raw.locTimezone && a.getAt(b).raw.locTimezone != Scdp.getSysConfig("server_tz") || "undefined" == typeof a.getAt(b).raw.locTimezone && !0 === Scdp.getSysConfig("using_utc"))
};
Ext.define("Scdp.tree.JTree", {
    extend: "Ext.tree.Panel",
    mixins: ["Scdp.panel.LiveSearchPanel"],
    alias: ["widget.JTree"],
    frame: !1,
    fields: ["id", "text", "leaf", "expanded", "iconCls", {name: "disabled", type: "bool", defaultValue: !1}],
    border: 0,
    frameHeader: !0,
    useArrows: !0,
    rootVisible: !1,
    padding: "0 0 0 0",
    margin: "0 0 0 0",
    lines: !0,
    singleExpand: !1,
    allowDragDrop: !1,
    storeAction: "",
    actionParams: {},
    treeDisabled: !1,
    onlyLeafCheckable: !1,
    expandOnDblClick: !0,
    showTools: !0,
    plugins: [{ptype: "dvp_nodedisabled"}],
    onClick: function () {
    },
    onDblClick: function () {
    },
    initComponent: function () {
        var a = this;
        a.showTools && (a.tools = [{
            type: "refresh", handler: function (a, c, d) {
                d.up("JTree").refresh()
            }
        }]);
        a.allowDragDrop && (a.viewConfig = {cid: "treeDragDrop", plugins: {ptype: "treeviewdragdrop"}});
        a.setSearchBar();
        a.callParent(arguments);
        a.withSearchBar && (a.textField = a.down("textfield[name\x3dsearchField]"), a.statusBar = a.down("statusbar[name\x3dsearchStatusBar]"));
        a.on("itemdblclick", function (a, c) {
            if (!this.expandOnDblClick)this.onDblClick(this, c);
            return !0
        });
        a.on("cellclick", function () {
        });
        a.on("itemclick", function (a, c, d, e) {
            var f = this;
            if (f.needLoadItem && (a = f.up("IView"), Scdp.ObjUtil.isNotEmpty(a) && "3" == a.viewType)) {
                var g = a.controller, h = c.raw[a.uuidMapping], i = f.getCurRecord() ? f.getCurRecord().raw[a.uuidMapping] : null;
                if (Scdp.ObjUtil.isNotEmpty(g) && Scdp.ObjUtil.isNotEmpty(h) && g.loadItem && h !== i) {
                    if (a.uistatus == Scdp.Const.UI_INFO_STATUS_NEW || a.uistatus == Scdp.Const.UI_INFO_STATUS_MODIFY)return Scdp.MsgUtil.confirm(Scdp.I18N.DATA_NOT_SAVED, function (a) {
                        "yes" ==
                        a && (g.doPreLoad(f, c, d, e), f.setCurRecord(e))
                    }), !1;
                    g.doPreLoad(f, c, d, e)
                }
            }
            if (!f.expandOnDblClick)f.onClick(f, c);
            return !0
        });
        a.getView().on("refresh", function () {
            a.afterRefresh && a.afterRefresh()
        });
        Scdp.ObjUtil.isNotEmpty(a.data) ? a.store.setRootNode(a.data) : a.refresh(!1);
        a.sotEditable(!a.treeDisabled)
    },
    refresh: function (a) {
        var b = this, c = {isconfig: !0}, c = Ext.merge(c, b.actionParams);
        c.storeAction = b.storeAction;
        var d = function (a) {
            a.checked = !0 == ("JCheckTree" === b.xtype) ? !1 : null;
            a.children && 0 != a.children.length &&
            (Ext.Array.each(a.children, d, !0), b.onlyLeafCheckable && (a.checked = null))
        };
        if (Scdp.ObjUtil.isNotEmpty(b.storeAction))if (b.initStatusBar(), a) {
            var e = Ext.encode(c);
            a = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_CRUD_TREE_ACTION, e, !0, !0);
            Scdp.ObjUtil.isEmpty(a) ? Scdp.doAction(b.storeAction, c, function (a) {
                Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_CRUD_TREE_ACTION, e, a, !0, !0);
                d(a);
                b.store.setRootNode(a);
                b.loadStatusBar()
            }) : (b.store.setRootNode(a), b.loadStatusBar())
        } else Scdp.doAction(b.storeAction, c, function (a) {
            d(a);
            b.store.setRootNode(a);
            b.loadStatusBar()
        }, null, !1); else b.loadStatusBar()
    },
    getSelectedNode: function () {
        var a = this.getSelectionModel().getSelection();
        if (0 == a.length)return null;
        var b = this.getRootNode();
        return b.raw.id == a[0].raw.id ? b : this.getRootNode().findChild("id", a[0].raw.id, !0)
    },
    appendChild: function (a) {
        var b = this.getSelectedNode();
        Scdp.ObjUtil.isEmpty(b) ? Scdp.MsgUtil.warn(Scdp.I18N.PLS_SELECT_NODE) : (b.appendChild(a), b.expand())
    },
    removeSelectedNode: function () {
        var a = this.getSelectedNode();
        if (Scdp.ObjUtil.isEmpty(a))Scdp.MsgUtil.warn(Scdp.I18N.PLS_SELECT_NODE);
        else {
            var b = a.parentNode, c = a.previousSibling, d = a.nextSibling;
            Scdp.ObjUtil.isNotEmpty(b) && (b.removeChild(a), Scdp.ObjUtil.isNotEmpty(c) ? this.getSelectionModel().select(c) : Scdp.ObjUtil.isNotEmpty(d) ? this.getSelectionModel().select(d) : this.selectNode(b))
        }
    },
    selectNode: function (a) {
        this.getSelectionModel().select(a);
        for (a = a.parentNode; Scdp.ObjUtil.isNotEmpty(a);)a.expand(), a = a.parentNode
    },
    sotEditable: function (a) {
        this.treeDisabled = !a;
        a ? this.removeBodyCls("tree-mask") : this.addBodyCls("tree-mask")
    },
    getCurRecord: function () {
        var a =
            null;
        0 < this.getSelectionModel().getCount() && (a = this.getSelectionModel().getLastFocused());
        return a
    },
    setCurRecord: function (a) {
        this.getSelectionModel().deselect(a);
        this.getSelectionModel().select(a);
        this.getSelectionModel().setLastFocused(null);
        this.getView().focusRow(a)
    },
    initStatusBar: function () {
        this.statusBar && this.statusBar.setText(Scdp.I18N.LIVESEARCH_LOADING)
    },
    loadStatusBar: function () {
        if (this.statusBar) {
            var a = -1;
            this.store.getRootNode().cascadeBy(function () {
                a++
            });
            0 < a ? this.statusBar.setText(a + " " +
                Scdp.I18N.LIVESEARCH_MATCH) : this.statusBar.setText(Scdp.I18N.LIVESEARCH_DEFAULTSTATUS)
        }
    }
});
Ext.define("Scdp.tree.JCheckTree", {
    extend: "Scdp.tree.JTree",
    alias: ["widget.JCheckTree"],
    bindingid: "resUuid",
    parentCheck: !0,
    childrenCheck: !0,
    initComponent: function () {
        this.callParent(arguments);
        this.on("checkchange", function (a, b) {
            this.treeDisabled ? a.set({checked: !b}) : (this.processDirty(a, !1), this.childrenCheck && this.setChildChecked(a, b, !1), this.parentCheck && this.setParentChecked(a, b, !1))
        })
    },
    clearData: function () {
        this.store.getRootNode().cascadeBy(function () {
            this.set({checked: !1})
        });
        this.dirtyNodes = []
    },
    clearDirty: function () {
        this.getStore().sync()
    },
    validate: function () {
        return !0
    },
    reset: function () {
        this.clearData();
        this.sotValue(this.oriData)
    },
    isDirty: function () {
        return Scdp.ObjUtil.isNotEmpty(this.dirtyNodes) && 0 < this.dirtyNodes.length
    },
    gotChecked: function (a) {
        var b = this.getChecked(), c = [];
        return a ? (Ext.Array.each(b, function (a) {
            Scdp.ObjUtil.isEmpty(a.child()) && c.push(a)
        }), c) : b
    },
    gotValue: function (a) {
        var b = this, c = [], d = a ? this.dirtyNodes : b.getChecked();
        Ext.Array.each(d, function (e) {
            if (e != b.getRootNode()) {
                var d =
                    e.raw;
                if (a) {
                    var g = e.data.checked;
                    d.editflag = g ? "+" : "-";
                    g ? (d[b.bindingid] = e.data.id, d.uuid = null) : d.uuid = e.raw.dataUuid
                } else d[b.bindingid] = e.raw.uuid, d.uuid = null, d.editflag = "+";
                c.push(d)
            }
        });
        return c
    },
    sotValue: function (a) {
        var b = this, c = this.store.getRootNode();
        b.setChildChecked(c, !1, !0);
        b.resetAllNode(c, !1);
        Scdp.ObjUtil.isNotEmpty(a) && 0 < a.length && Ext.each(a, function (a) {
            var e = c.findChild("id", a[b.bindingid], !0);
            Scdp.ObjUtil.isNotEmpty(e) && (e.raw.checked = !0, e.raw.dataUuid = a.uuid, e.raw.functionDto = a.functionDto ||
                [])
        });
        this.dirtyNodes = [];
        this.oriData = a
    },
    setChildChecked: function (a, b, c) {
        var d = this;
        a.expand();
        a.set({checked: b});
        d.processDirty(a, c);
        a.cascadeBy(function () {
            this.raw.disabled || (this.set({checked: b}), d.processDirty(this, c))
        })
    },
    resetAllNode: function (a, b) {
        a.expand();
        a.raw.checked = b;
        a.cascadeBy(function () {
            this.raw.checked = b
        })
    },
    setParentChecked: function (a, b, c) {
        a.set({checked: b});
        this.processDirty(a, c);
        if (!this.onlyLeafCheckable && (a = a.parentNode, null != a && null !== a.data.checked && !0 !== a.raw.disabled)) {
            var d =
                !1;
            a.eachChild(function (a) {
                !0 == a.data.checked && (d = !0)
            });
            !1 == b ? d || this.setParentChecked(a, b, c) : d && this.setParentChecked(a, b, c)
        }
    },
    processDirty: function (a, b) {
        if (!(a == this.getRootNode() || !0 === b))if (Scdp.ObjUtil.isEmpty(this.dirtyNodes) && a.raw.checked != a.data.checked)this.dirtyNodes = [], this.dirtyNodes.push(a); else {
            var c = Ext.Array.findBy(this.dirtyNodes, function (b) {
                return b.id == a.id
            });
            Scdp.ObjUtil.isEmpty(c) && a.raw.checked != a.data.checked ? this.dirtyNodes.push(a) : Scdp.ObjUtil.isNotEmpty(c) && c.raw.checked ==
            a.data.checked && Ext.Array.remove(this.dirtyNodes, a)
        }
    }
});
Ext.define("Scdp.tree.JMenuCheckTree", {
    extend: "Scdp.tree.JCheckTree", alias: ["widget.JMenuCheckTree"], bindingid: "resUuid", gotValue: function (a) {
        var b = this, c = [], d = a ? this.dirtyNodes : b.getChecked();
        Ext.Array.each(d, function (d) {
            if (d != b.getRootNode()) {
                var f = d.raw;
                if (a) {
                    var g = d.data.checked;
                    f.editflag = g ? "+" : "-";
                    g ? (f[b.bindingid] = d.data.id, f.uuid = null) : f.uuid = d.raw.dataUuid
                } else f[b.bindingid] = d.raw.id, f.uuid = null, f.checked = d.data.checked, f.editflag = "+";
                c.push(f)
            }
        });
        return c
    }, sotValue: function (a) {
        var b = this,
            c = this.store.getRootNode();
        b.setChildChecked(c, !1, !0);
        b.resetAllNode(c, !1);
        Scdp.ObjUtil.isNotEmpty(a) && 0 < a.length && Ext.each(a, function (a) {
            var e = c.findChild("id", a[b.bindingid], !0);
            Scdp.ObjUtil.isNotEmpty(e) && (b.onlyLeafCheckable ? e.set({checked: !0}) : b.setParentChecked(e, !0, !0), e.raw.checked = !0, e.raw.dataUuid = a.uuid, e.raw.functionDto = a.functionDto || [])
        });
        this.dirtyNodes = [];
        this.oriData = a
    }
});
Ext.define("Scdp.menu.JSysMenuItem", {
    extend: "Ext.menu.Item", alias: ["widget.JSysMenuItem"], handler: function (a) {
        var b = this.menuAction, c = this.menuType;
        Scdp.ObjUtil.isNotEmpty(b) && Scdp.openNewModule(b.trim(), this.actionParams, a, c)
    }
});
Ext.define("Scdp.menu.JCompMenuItem", {
    extend: "Ext.menu.Item", alias: ["widget.JCompMenuItem"], handler: function (a) {
        a = Ext.apply({}, window.COMPONENT_NODES[a.text]);
        a.id = Scdp.StrUtil.getUUID();
        a.text = a.cid ? a.xtype + " - " + a.cid : a.xtype + " - ";
        Ext.getCmp("layoutTree").appendChild(a)
    }
});
Ext.define("Scdp.menu.JQueryTemplateItem", {
    extend: "Ext.menu.Item", alias: ["widget.JQueryTemplateItem"], listeners: {
        afterrender: function (a) {
            var b = a.up("IView");
            a.getEl().on("contextmenu", function (c) {
                c.preventDefault();
                (new Ext.menu.Menu({
                    floating: !0, items: [{
                        text: Scdp.I18N.DELETE_BTN, iconCls: "delete_btn", handler: function () {
                            Scdp.doAction("sys-remove-query-template", {
                                menuCode: b.menuCode,
                                templateName: a.text
                            }, function (a) {
                                a = a.userQueryTemplate;
                                var c = b.getCmp("loadQueryBtn").menu;
                                Scdp.reloadQueryTemplate(c,
                                    a)
                            })
                        }
                    }]
                })).showAt(a.getEl().getX() + 24, a.getEl().getY() + 24)
            })
        }
    }, handler: function (a) {
        var b = a.up("IView");
        b.getConditionPanel().sotValue(Ext.decode(a.content));
        b.queryTemplateName = a.text
    }
});
Ext.define("Scdp.toolbar.JToolBar", {
    extend: "Ext.toolbar.Toolbar",
    alias: ["widget.JToolBar"],
    height: 25,
    vertical: !1,
    frame: !1,
    region: "center",
    margin: "0 0 0 0",
    padding: "0 0 0 0"
});
Ext.define("Scdp.toolbar.JTbSeparator", {extend: "Ext.toolbar.Separator", alias: ["widget.JTbSeparator"]});
Ext.define("Scdp.toolbar.JTbFill", {extend: "Ext.toolbar.Fill", alias: ["widget.JTbFill"]});
Ext.define("Scdp.toolbar.JTbSpacer", {extend: "Ext.toolbar.Spacer", alias: ["widget.JTbSpacer"]});
Ext.define("Scdp.mvc.IView", {
    extend: "Scdp.container.JPanel",
    alias: ["widget.IView"],
    uuidMapping: "uuid",
    closable: Scdp.getSysConfig("tree_menu") || !1,
    viewClosable: !0,
    createBy: null,
    createTime: null,
    updateBy: null,
    updateTime: null,
    nullObject: !1,
    listeners: {}
});
Ext.define("Scdp.mvc.AbstractController", {
    init: function (a, b, d, c, e) {
        a = {hideScroll: a, controller: this};
        Scdp.ObjUtil.isNotEmpty(d) && (a.selMode = d);
        c && (a.enableKeyNav = c);
        e && (a.defaultSelect = e);
        a.menuCode = this.menuCode;
        d = Date.now();
        this.view = Ext.create(this.viewClass, a);
        !1 === b ? Scdp.getSysConfig("tree_menu") ? this.view.closable = !1 : this.view.viewClosable = !1 : Scdp.getSysConfig("tree_menu") && !1 !== this.view.closable && (this.view.closable = this.view.viewClosable);
        b = Date.now();
        Scdp.DebugUtil.logInfo("Module " + this.menuCode +
            " init cost: " + (b - d) + " ms.");
        this.view.menuCode = this.menuCode;
        b = this.view.getCmp("loadQueryBtn");
        Scdp.ObjUtil.isNotEmpty(b) && Scdp.loadQueryTemplate(b.menu, this.menuCode)
    }, registerEvents: function () {
        var a = this, b = Ext.Array.merge(a.events || [], a.extraEvents || []) || [];
        Ext.Array.each(b, function (b) {
            var c = b.name, e = a[b.fn];
            b = a.view.getCmp(b.cid);
            if (Scdp.ObjUtil.isNotEmpty(b))b.on(c, e, a)
        })
    }
});
function refreshWorkFlowBarStatus(a, b) {
    b.workFlowFormData = a.wf_formdata ? a.wf_formdata : [];
    a.wf_cancancel && -1 == b.workFlowFormData.indexOf("wf_disable_cancel\x3d1") ? b.view.getCmp("editPanel-\x3eworkFlowCancelBtn").setDisabled(!1) : b.view.getCmp("editPanel-\x3eworkFlowCancelBtn").setDisabled(!0);
    if (a.wf_canmodify)b.view.getCmp("editPanel-\x3eworkFlowViewLogBtn").setDisabled(!1), b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!1), b.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!1),
        b.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!1), null != b.workFlowFormData && -1 == b.workFlowFormData.indexOf("wf_enable_all_function\x3d1") && b.view.getCmp("editPanel-\x3emodifyBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3edeleteBtn").setDisabled(!0); else if (a.wf_fixed && a.wf_restart && (b.getWfFixedExt ? !b.getWfFixedExt() : 1))b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!1), b.view.getCmp("editPanel-\x3emodifyBtn").setDisabled(!1), b.view.getCmp("editPanel-\x3edeleteBtn").setDisabled(!1),
        b.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3eworkFlowViewLogBtn").setDisabled(!1); else if (a.wf_fixed || b.getWfFixedExt && b.getWfFixedExt())-1 == b.workFlowFormData.indexOf("wf_modify_after_fixed\x3d1") ? (b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3emodifyBtn").setDisabled(!0)) : (b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!1),
        b.view.getCmp("editPanel-\x3emodifyBtn").setDisabled(!1)), b.view.getCmp("editPanel-\x3edeleteBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3eworkFlowViewLogBtn").setDisabled(!1); else if (a.wf_existing) {
        if (b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!0),
                b.view.getCmp("editPanel-\x3eworkFlowViewLogBtn").setDisabled(!1), b.view.uistatus == Scdp.Const.UI_INFO_STATUS_VIEW || b.view.uistatus == Scdp.Const.UI_INFO_STATUS_NULL)b.view.getCmp("editPanel-\x3emodifyBtn").setDisabled(!0), b.view.getCmp("editPanel-\x3edeleteBtn").setDisabled(!0)
    } else b.view.uistatus == Scdp.Const.UI_INFO_STATUS_NEW || b.view.uistatus == Scdp.Const.UI_INFO_STATUS_MODIFY || b.view.uistatus == Scdp.Const.UI_INFO_STATUS_NULL ? b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!0) : b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!1);
    -1 != b.workFlowFormData.indexOf("wf_disable_assign\x3d1") && b.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!0);
    -1 != b.workFlowFormData.indexOf("wf_disable_reject\x3d1") && b.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!0);
    -1 != b.workFlowFormData.indexOf("wf_disable_commit\x3d1") && b.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!0);
    customizeWorkFlowToolbarText(b);
    b.workFlowTaskId = a.taskId ? a.taskId : null;
    b.refreshUIStatusBasedOnWorkFlow(a)
}
function customizeWorkFlowToolbarText(a) {
    -1 != a.workFlowFormData.indexOf("wf_toolbar_text_customized\x3d1") ? (a.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setText(Scdp.I18N.WF_CUSTOMIZED_SUBMIT_TEXT), a.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setText(Scdp.I18N.WF_CUSTOMIZED_ROLLBACK_TEXT), a.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setText(Scdp.I18N.WF_CUSTOMIZED_ASSIGN_TEXT), a.view.getCmp("editPanel-\x3eworkFlowCancelBtn").setText(Scdp.I18N.WF_CUSTOMIZED_CANCEL_TEXT), a.view.getCmp("editPanel-\x3eworkFlowViewLogBtn").setText(Scdp.I18N.WF_CUSTOMIZED_VIEW_LOG_TEXT),
        Ext.Array.forEach(a.workFlowFormData, function (b) {
            -1 < b.indexOf("wf_toolbar_submit_text\x3d") || -1 < b.indexOf("wf_goto_end\x3d1") ? a.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setText(b.replace("wf_toolbar_submit_text\x3d", "")) : -1 < b.indexOf("wf_toolbar_reject_text\x3d") ? a.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setText(b.replace("wf_toolbar_reject_text\x3d", "")) : -1 < b.indexOf("wf_toolbar_assign_text\x3d") ? a.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setText(b.replace("wf_toolbar_assign_text\x3d",
                "")) : -1 < b.indexOf("wf_toolbar_view_text\x3d") ? a.view.getCmp("editPanel-\x3eworkFlowViewLogBtn").setText(b.replace("wf_toolbar_view_text\x3d", "")) : -1 < b.indexOf("wf_toolbar_cancel_text\x3d") && a.view.getCmp("editPanel-\x3eworkFlowCancelBtn").setText(b.replace("wf_toolbar_cancel_text\x3d", ""))
        })) : -1 != a.workFlowFormData.indexOf("wf_goto_end\x3d1") ? a.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setText(Scdp.I18N.WF_CUSTOMIZED_SUBMIT_TEXT) : (a.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setText(Scdp.I18N.WROKFLOW_COMMIT_BTN),
        a.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setText(Scdp.I18N.WROKFLOW_ROLLBACK_BTN), a.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setText(Scdp.I18N.WROKFLOW_ASSIGN_BTN), a.view.getCmp("editPanel-\x3eworkFlowViewLogBtn").setText(Scdp.I18N.WROKFLOW_VIEW_LOG_BTN), a.view.getCmp("editPanel-\x3eworkFlowCancelBtn").setText(Scdp.I18N.WROKFLOW_CANCEL_BTN))
}
function disableWorkFlowBar(a) {
    a.view.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!0);
    a.view.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!0);
    a.view.getCmp("editPanel-\x3eworkFlowCancelBtn").setDisabled(!0);
    a.view.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!0)
}
Ext.define("Scdp.mvc.AbstractCrudController", {
    extend: "Scdp.mvc.AbstractController",
    events: [{cid: "ignoreCase", name: "change", fn: "ignoreCaseChange"}, {
        cid: "multiSort",
        name: "change",
        fn: "multiSortChange"
    }, {cid: "pageSize", name: "change", fn: "pageSizeChange"}, {
        cid: "queryPanel-\x3equeryBtn",
        name: "click",
        fn: "doQuery"
    }, {cid: "queryPanel-\x3equickQueryBtn", name: "click", fn: "doQuickQuery"}, {
        cid: "queryPanel-\x3eresetBtn",
        name: "click",
        fn: "doReset"
    }, {cid: "queryPanel-\x3ebatchDelBtn", name: "click", fn: "doBatchDel"}, {
        cid: "queryPanel-\x3eexportBtn",
        name: "click", fn: "doExport"
    }, {cid: "queryPanel-\x3eaddNew1Btn", name: "click", fn: "doAdd"}, {
        cid: "editPanel-\x3eaddNew2Btn",
        name: "click",
        fn: "doAdd"
    }, {cid: "editPanel-\x3ecopyAddBtn", name: "click", fn: "doCopyAdd"}, {
        cid: "editPanel-\x3esaveBtn",
        name: "click",
        fn: "doSave"
    }, {cid: "editPanel-\x3emodifyBtn", name: "click", fn: "doModify"}, {
        cid: "editPanel-\x3edeleteBtn",
        name: "click",
        fn: "doDelete"
    }, {cid: "editPanel-\x3ecancelBtn", name: "click", fn: "doCancel"}, {
        cid: "editPanel-\x3eworkFlowCommitBtn",
        name: "click",
        fn: "completeTask"
    },
        {
            cid: "editPanel-\x3eworkFlowRollBackBtn",
            name: "click",
            fn: "rejectTask"
        }, {
            cid: "editPanel-\x3eworkFlowAssignBtn",
            name: "click",
            fn: "assignTask"
        }, {
            cid: "editPanel-\x3eworkFlowCancelBtn",
            name: "click",
            fn: "cancelTask"
        }, {cid: "editPanel-\x3eworkFlowViewLogBtn", name: "click", fn: "viewWorkFlowImg"}],
    extraEvents: [],
    workFlowFormData: [],
    workFlowTaskId: "",
    clearEditPanelAfterQuery: !0,
    ignoreCaseChange: function (a) {
        a = a.getValue();
        Scdp.CacheUtil.set(Scdp.Const.COMMON_QUERY_IGNORE_CASE_CACHE, a)
    },
    multiSortChange: function (a) {
        a =
            a.getValue();
        Scdp.CacheUtil.set(Scdp.Const.COMMON_QUERY_MULTI_SORT_CACHE, a)
    },
    pageSizeChange: function (a) {
        a = a.gotValue();
        Scdp.CacheUtil.set(Scdp.Const.COMMON_QUERY_PAGE_SIZE_CACHE, a);
        this.view.getResultPanel().getStore().pageSize = a
    },
    doQuery: function () {
        var a = this.view.getCmp("queryPanel-\x3equickQueryTxt");
        if (Scdp.ObjUtil.isNotEmpty(a.gotValue()) && (1 != arguments.length || "simpleQuery" != arguments[0]))this.doQuickQuery(); else if (!this.beforeQuery || this.beforeQuery()) {
            var b = this.view.getConditionPanel();
            if (!b.validate())return Scdp.MsgUtil.warn(Scdp.I18N.QUERY_VALIDATE_ERROR), !1;
            var d = this.view.getResultPanel(), c = b.gotValue(!1, !0), e = b.queryExtraParams, f = this.view.getIgnoreCaseValue();
            Ext.Object.each(c, function (a, d) {
                var e = a + Scdp.getSysConfig("QUERY_OPERATOR_SUFFIX");
                Scdp.ObjUtil.isNotEmpty(d) && b.getCmp(e) && (c[e] = b.getCmp(e).gotValue())
            });
            this.view.allowNullConditions || b.hasConditions() ? (Scdp.doCommonQuery(this.queryAction, c, f, d, this.view.modulePath, this.view.queryLayoutFile, this.view.menuCode, this.afterQuery,
                !1, this, e), a.reset()) : Scdp.MsgUtil.info(Scdp.I18N.PLEASE_INPUT_QUERY_CONDITIONS, function () {
                var a = b.getFirstEditableField();
                Scdp.ObjUtil.isNotEmpty(a) && a.focus()
            });
            this.clearEditPanelAfterQuery && this.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL)
        }
    },
    doQuickQuery: function () {
        var a = this.view;
        if (!this.beforeQuickQuery || this.beforeQuickQuery())if (a = a.getCmp("queryPanel-\x3equickQueryTxt").gotValue(), !Scdp.ObjUtil.isEmpty(a)) {
            var b = this.view.getConditionPanel();
            b.up("JQueryView");
            var d = this.view.getResultPanel(),
                c = b.gotValue(), e = b.queryExtraParams, f = this.view.getIgnoreCaseValue();
            Ext.Object.each(c, function (a, d) {
                var e = a + Scdp.getSysConfig("QUERY_OPERATOR_SUFFIX");
                Scdp.ObjUtil.isNotEmpty(d) && b.getCmp(e) && (c[e] = b.getCmp(e).gotValue())
            });
            Scdp.doCommonQuery(this.queryAction, c, f, d, this.view.modulePath, this.view.queryLayoutFile, this.view.menuCode, this.afterQuery, !1, this, e, a);
            b.reset();
            this.clearEditPanelAfterQuery && this.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL)
        }
    },
    doReset: function () {
        this.view.getConditionPanel().getForm().reset();
        var a = this.view.getCmp("queryPanel-\x3equickQueryTxt");
        a && a.reset()
    },
    doExport: function () {
        if (!this.beforeExport || this.beforeExport()) {
            var a = this.view.getConditionPanel();
            if (!a.validate())return Scdp.MsgUtil.warn(Scdp.I18N.QUERY_VALIDATE_ERROR), !1;
            var b = this.view.getResultPanel(), d = a.gotValue(), c = a.queryExtraParams, e = this.view.getIgnoreCaseValue();
            if (this.view.allowNullConditions || a.hasConditions()) {
                var f = this.view.menuText, f = "function" == typeof this.view.getExportFileName ? Scdp.StrUtil.replaceNull(this.view.getExportFileName.call(this.view,
                    this.view.menuText), this.view.menuText) : Scdp.getExportFileName(this.view.menuText, Scdp.StrUtil.replaceNull(this.view.exportFileNamePatten, Scdp.Const.EXPORT_EXCEL_FILE_NAME_PATTEN));
                Scdp.ObjUtil.isNotEmpty(this.exportXlsAction) && (b = {
                    modulePath: this.view.modulePath,
                    layoutFile: this.view.queryLayoutFile,
                    queryConditions: d,
                    queryExtraParams: c,
                    exportFileName: f,
                    ignoreCase: e,
                    preSortList: Ext.encode(b.preSort)
                }, Scdp.doPost(this.exportXlsAction, b), this.afterExport && this.afterExport())
            } else Scdp.MsgUtil.info(Scdp.I18N.PLEASE_INPUT_QUERY_CONDITIONS,
                function () {
                    var b = a.getFirstEditableField();
                    Scdp.ObjUtil.isNotEmpty(b) && b.focus()
                })
        }
    },
    loadItem: function (a, b, d) {
        var c = this;
        "modify" !== b && c.beforeLoadItem && !c.beforeLoadItem.call(this, a) || c.view.canEdit && Scdp.loadDataByUuid(a, c.loadAction, c.dtoClass, function (a) {
            if (a.success) {
                2 == c.view.viewType && c.view.getCmp("query\x26edit").setActiveTab(c.view.getEditPanel());
                switch (b) {
                    case "add":
                        c.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_NEW);
                        break;
                    case "modify":
                        c.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_MODIFY);
                        break;
                    default:
                        c.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_VIEW)
                }
                Ext.batchLayouts(function () {
                    "add" === b && Scdp.wrapDataForRemoveSystemFields(a);
                    c.view.sotValue(a)
                });
                if (Scdp.ObjUtil.isNotEmpty(c.view.bindings)) {
                    var f = a[c.view.bindings[0]];
                    if (Scdp.ObjUtil.isNotEmpty(f)) {
                        c.view.createBy = Scdp.StrUtil.replaceNull(f.createBy);
                        c.view.createTime = "";
                        var g = Scdp.StrUtil.replaceFirst(f.createTime, "T", " ");
                        if (Scdp.ObjUtil.isNotEmpty(g)) {
                            var h = Scdp.DateUtil.parseDate(g), g = h.getTime(), h = 6E4 * h.getTimezoneOffset(),
                                h = new Date(g - h);
                            c.view.createTime = Scdp.DateUtil.formatDate(h, Scdp.Const.LONG_DATE_FORMAT)
                        }
                        c.view.updateBy = Scdp.StrUtil.replaceNull(f.updateBy);
                        c.view.updateTime = "";
                        f = Scdp.StrUtil.replaceFirst(f.updateTime, "T", " ");
                        Scdp.ObjUtil.isNotEmpty(f) && (f = Scdp.DateUtil.parseDate(f), g = f.getTime(), h = 6E4 * f.getTimezoneOffset(), f = new Date(g - h), c.view.updateTime = Scdp.DateUtil.formatDate(f, Scdp.Const.LONG_DATE_FORMAT))
                    }
                    Ext.getCmp("createBy").setValue(c.view.createTime + " " + c.view.createBy);
                    Ext.getCmp("updateBy").setValue(c.view.updateTime +
                        " " + c.view.updateBy)
                }
                "modify" !== b && c.afterLoadItem && c.afterLoadItem(arguments);
                "function" == typeof d && d.call(c, arguments)
            }
        })
    },
    doPreLoad: function (a, b, d, c) {
        "1" == this.view.viewType ? this.doLoad(a, b, d, c) : "3" == this.view.viewType && this.loadItem(b.raw[this.view.uuidMapping])
    },
    doLoad: function (a, b) {
        var d = null;
        "3" != this.view.viewType && (d = b.get(this.view.uuidMapping), this.loadItem(d))
    },
    doAdd: function () {
        disableWorkFlowBar(this);
        if (!this.beforeAdd || this.beforeAdd()) {
            this.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_NEW);
            if ("3" == this.view.viewType) {
                var a = this.view.getQueryPanel(), b = a.getView().getSelectionModel().getSelection();
                Scdp.ObjUtil.isEmpty(b) ? (this.view.getHeader().getCmp("puuid").sotValue("*"), a = a.getRootNode(), a = Scdp.getMaxSnoInTreeNode(a)) : (this.view.getHeader().getCmp("puuid").sotValue(b[0].raw.uuid), a = Scdp.getMaxSnoInTreeNode(b[0]));
                this.view.getHeader().getCmp("seqNo").sotValue(a)
            }
            2 == this.view.viewType && this.view.getCmp("query\x26edit").setActiveTab(this.view.getEditPanel());
            this.afterAdd && this.afterAdd()
        }
    },
    doCopyAdd: function () {
        disableWorkFlowBar(this);
        if (!this.beforeCopyAdd || this.beforeCopyAdd()) {
            var a = this.view.getHeader().getCmp("uuid").gotValue();
            this.loadItem(a, "add", this.afterCopyAdd)
        }
    },
    doCancel: function () {
        var a = this;
        if (!a.beforeCancel || a.beforeCancel())if (a.view.uistatus == Scdp.Const.UI_INFO_STATUS_NEW ? Scdp.MsgUtil.confirm(Scdp.I18N.CANCEL_NEW_EDIT_CONFIRM, function (b) {
                "yes" == b && (a.view.reset(), a.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL), a.afterCancel && a.afterCancel())
            }) : a.view.uistatus ==
            Scdp.Const.UI_INFO_STATUS_MODIFY && Scdp.MsgUtil.confirm(Scdp.I18N.CANCEL_MODIFY_EDIT_CONFIRM, function (b) {
                "yes" == b && (a.view.reset(), a.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_VIEW), a.afterCancel && a.afterCancel())
            }), "3" == this.view.viewType) {
            var b = this.view.getQueryPanel();
            b.getView().getSelectionModel().getSelection();
            b.setDisabled(!1)
        }
    },
    afterCancel: function () {
        Scdp.ObjUtil.isNotEmpty(this.gotPrimaryKey()) && this.refreshWorkFlowStatus()
    },
    doModify: function () {
        disableWorkFlowBar(this);
        if (!this.beforeModify ||
            this.beforeModify()) {
            var a = this.view.getHeader().getCmp("uuid").gotValue();
            this.loadItem(a, "modify", this.afterModify)
        }
    },
    doSave: function (a, b, d) {
        var c = this;
        if (!c.beforeSave || c.beforeSave()) {
            if (c.view.uistatus == Scdp.Const.UI_INFO_STATUS_MODIFY && !c.view.isDirty())return c.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_VIEW), Scdp.MsgUtil.info(Scdp.I18N.DATA_NOT_CHANGE, function () {
                c.refreshWorkFlowStatus();
                d && d(c, a)
            }), !1;
            if (!c.view.validate())return !1;
            b = {};
            var e = "";
            Scdp.Const.UI_INFO_STATUS_NEW == this.view.uistatus ?
                (b = this.view.gotValue(!1), e = this.addAction) : (b = this.view.gotValue(!0), e = this.modifyAction);
            var f = this.view.uistatus;
            Scdp.saveData(b, e, f, this.dtoClass, this.view.modulePath, this.uniqueValidateFields, function (b) {
                if (b.success) {
                    f == Scdp.Const.UI_INFO_STATUS_NEW ? (c.view.getHeader().getCmp("uuid").sotValue(b.uuid), Scdp.MsgUtil.info(Scdp.I18N.ADD_NEW_SUCCESS), c.view.createTime = Scdp.DateUtil.formatDate(new Date, Scdp.Const.LONG_DATE_FORMAT), c.view.createBy = Scdp.getCurrentUserId(), Ext.getCmp("createBy").setValue(c.view.createTime +
                        " " + Scdp.getCurrentUserId()), c.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_VIEW)) : f == Scdp.Const.UI_INFO_STATUS_MODIFY && (Scdp.MsgUtil.info(Scdp.I18N.MODIFY_SUCCESS), c.view.updateTime = Scdp.DateUtil.formatDate(new Date, Scdp.Const.LONG_DATE_FORMAT), c.view.updateBy = Scdp.getCurrentUserId(), Ext.getCmp("updateBy").setValue(c.view.updateTime + " " + Scdp.getCurrentUserId()), c.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_VIEW));
                    if (!c.view.notRefresh && "3" == c.view.viewType) {
                        var e = c.view.getQueryPanel();
                        e.refresh();
                        var i = e.getSelectionModel().getSelection();
                        0 < i.length && e.fireEvent("itemClick", e, i[0])
                    }
                    c.afterSave && c.afterSave(b);
                    d && d(c, a)
                }
            })
        }
    },
    getDeleteObj: function (a) {
        var b = [];
        a ? (a = this.view.getResultPanel().getSelectionModel().getSelection(), Ext.Array.each(a, function (a) {
            b.push(a.get("uuid"))
        })) : (a = this.view.getHeader().getCmp("uuid").gotValue(), b.push(a));
        return b
    },
    doDelete: function () {
        var a = this;
        if (!a.beforeDelete || a.beforeDelete()) {
            var b = !0, d = a.deleteAction;
            Scdp.ObjUtil.isNotEmpty(d) ? b = !1 : d = a.voidAction;
            Scdp.MsgUtil.confirm(Scdp.I18N.DELETE_CONFIRM,
                function (c) {
                    if ("yes" == c) {
                        var e = a.view.getHeader().getCmp("uuid").gotValue();
                        c = a.getDeleteObj();
                        Scdp.ObjUtil.isNotEmpty(c) && Scdp.deleteDataByUnids(c, d, a.dtoClass, b, function (b) {
                            b.success && (a.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL), Scdp.MsgUtil.info(Scdp.I18N.DELETE_SUCCESS, function () {
                                if (!a.view.notRefresh && "3" == a.view.viewType) {
                                    var b = a.view.getQueryPanel(), c = b.getRootNode().findChild("id", e, !0), d = c.previousSibling || c.nextSibling || c.parentNode;
                                    c.parentNode.removeChild(c);
                                    b.getSelectionModel().select(d);
                                    b.fireEvent("itemClick", b, d)
                                } else"2" == a.view.viewType && a.view.getCmp("query\x26edit").setActiveTab(a.view.getQueryPanel()), a.doQuery();
                                a.afterDelete && a.afterDelete()
                            }))
                        })
                    }
                })
        }
    },
    doBatchDel: function () {
        var a = this;
        if (!a.beforeBatchDel || a.beforeBatchDel())if (0 < this.view.getResultPanel().getSelectionModel().getSelection().length) {
            var b = !0, d = a.deleteAction;
            Scdp.ObjUtil.isNotEmpty(d) ? b = !1 : d = a.voidAction;
            Scdp.MsgUtil.confirm(Scdp.I18N.DELETE_CONFIRM, function (c) {
                "yes" == c && (c = a.getDeleteObj(!0), Scdp.ObjUtil.isNotEmpty(c) &&
                Scdp.deleteDataByUnids(c, d, a.dtoClass, b, function (b) {
                    b.success && (a.view.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL), "3" == a.view.viewType ? a.view.getQueryPanel().refresh() : a.doQuery(), a.afterBatchDel ? a.afterBatchDel() : Scdp.MsgUtil.info(Scdp.I18N.DELETE_SUCCESS))
                }))
            })
        } else Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT)
    },
    popupWorkFlowImgDialog: function (a, b) {
        var d = {};
        d.businessKey = a;
        d.workFlowDefinitionKey = b;
        d.taskId = this.workFlowTaskId;
        var c = Ext.create("WorkFlow.controller.WorkFlowDiagramController");
        c.postData = d;
        var e = Scdp.openNewWinByController(c, function () {
            e.close()
        }, "temp_icon_16", Scdp.I18N.WORK_FLOW_PROCESS_TITLE, Scdp.I18N.OK_BTN)
    },
    completeTask: function () {
        if (!this.beforeWorkFlowCommit())return !1;
        this.executeTask()
    },
    executeTask: function () {
        var a = this, b = {};
        b.businessKey = a.gotPrimaryKey();
        b.workFlowDefinitionKey = a.view.workFlowDefinitionKey;
        b.dto = a.dtoClass;
        b.menuCode = this.loadWorkflowMenuCode();
        b.taskId = a.workFlowTaskId;
        b.processDeptCode = a.loadWorkFlowProcessDeptCode();
        var d = a.collectMoreWorkFlowParamOnComplete();
        Scdp.ObjUtil.isNotEmpty(d) && (b.variable = d);
        d = function (c, d, f, g) {
            b.assignee = c;
            b.comment = d;
            b.userFilter = f;
            b.priority = g;
            Scdp.doAction("workflow-complete-action", b, function (b) {
                refreshWorkFlowBarStatus(b, a);
                a.afterCompelteTask(b);
                b.success && Scdp.MsgUtil.info(Scdp.I18N.MSG_WORKFLOW_COMPLETE_SUCCESS)
            }, function () {
            }, !0, !1)
        };
        -1 != a.workFlowFormData.indexOf("wf_skip_popup_dialog\x3d1") ? d(null, null, null) : a.chooseAssignee(d, !0, !1, !1, a)
    },
    loadWorkflowMenuCode: function () {
        return Scdp.getActiveModule().menuCode
    },
    loadWorkFlowProcessDeptCode: function () {
        return ""
    },
    afterCompelteTask: function () {
    },
    beforeWorkFlowCommit: function () {
        return !0
    },
    rejectTask: function () {
        var a = this, b = {wf_reject: 1};
        b.businessKey = a.gotPrimaryKey();
        b.dto = a.dtoClass;
        b.workFlowDefinitionKey = a.view.workFlowDefinitionKey;
        b.taskId = a.workFlowTaskId;
        b.processDeptCode = a.loadWorkFlowProcessDeptCode();
        var d = a.collectMoreWorkFlowParamOnReject();
        Scdp.ObjUtil.isNotEmpty(d) && (b.variable = d);
        d = a.workFlowFormData;
        if (-1 == d.indexOf("wf_rollback_to_start\x3d1") && -1 == d.indexOf("wf_rollback_one_step\x3d1")) {
            var d =
                function (c) {
                    var d = c.getCmp("taskCommentsDto").getSelectionModel().getSelection(), e = d[0].get("deleteReason");
                    e && ("REJECTED" == e || "CANCELLED" == e) ? Scdp.MsgUtil.warn("无法退回到已经退回或者撤销的节点！") : (d = d[0].get("taskId"), b.comment = c.getCmp("comment").gotValue(), b.priority = c.getCmp("priority").gotValue(), b.rollbackTaskId = d, Scdp.doAction("workflow-reject-action", b, function (b) {
                            refreshWorkFlowBarStatus(b, a);
                            a.afterRejectTask(b);
                            b.success && Scdp.MsgUtil.info(Scdp.I18N.MSG_WORKFLOW_REJECT_SUCCESS);
                            f.close()
                        }, function () {
                        },
                        !0, !1))
                }, c = {};
            c.businessKey = a.gotPrimaryKey();
            c.workFlowDefinitionKey = a.view.workFlowDefinitionKey;
            var e = Ext.create("WorkFlow.controller.WorkFlowChooseRejectNodeController");
            e.postdata = c;
            var f = Scdp.openNewWinByController(e, d, "temp_icon_16", Scdp.I18N.WROKFLOW_ROLLBACK_BTN, Scdp.I18N.OK_BTN)
        } else d = function (c, d, e, f) {
            b.assignee = c;
            b.comment = d;
            b.userFilter = e;
            b.priority = f;
            Scdp.doAction("workflow-reject-action", b, function (b) {
                    refreshWorkFlowBarStatus(b, a);
                    a.afterRejectTask(b);
                    b.success && Scdp.MsgUtil.info(Scdp.I18N.MSG_WORKFLOW_REJECT_SUCCESS)
                },
                function () {
                }, !0, !1)
        }, a.chooseAssignee(d, !1, !1, !0, a)
    },
    afterRejectTask: function () {
    },
    cancelTask: function () {
        if (!this.beforeWorkFlowCancel())return !1;
        this.executeWFCancel()
    },
    beforeWorkFlowCancel: function () {
        return !0
    },
    executeWFCancel: function () {
        var a = this, b = {};
        b.businessKey = a.gotPrimaryKey();
        b.dto = a.dtoClass;
        b.workFlowDefinitionKey = a.view.workFlowDefinitionKey;
        b.taskId = a.workFlowTaskId;
        b.processDeptCode = a.loadWorkFlowProcessDeptCode();
        var d = a.collectMoreWorkFlowParamOnReject();
        Scdp.ObjUtil.isNotEmpty(d) &&
        (b.variable = d);
        Scdp.doAction("workflow-cancel-action", b, function (b) {
            refreshWorkFlowBarStatus(b, a);
            a.afterCancelTask(b);
            b.success && Scdp.MsgUtil.info(Scdp.I18N.MSG_WORKFLOW_CANCEL_SUCCESS)
        }, function () {
        }, !0, !1)
    },
    afterCancelTask: function () {
    },
    assignTask: function () {
        var a = this, b = {};
        b.businessKey = a.gotPrimaryKey();
        b.dto = a.dtoClass;
        b.workFlowDefinitionKey = a.view.workFlowDefinitionKey;
        b.taskId = a.workFlowTaskId;
        b.processDeptCode = a.loadWorkFlowProcessDeptCode();
        var d = a.collectMoreWorkFlowParamOnAssign();
        Scdp.ObjUtil.isNotEmpty(d) &&
        (b.variable = d);
        a.chooseAssignee(function (c, d, f, g, h) {
            b.assignee = c;
            b.comment = d;
            b.userfilter = f;
            b.priority = g;
            b.assigneeDesc = h;
            Scdp.doAction("workflow-assign-action", b, function (b) {
                refreshWorkFlowBarStatus(b, a);
                b.success && Scdp.MsgUtil.info(Scdp.I18N.MSG_WORKFLOW_ASSIGN_SUCCESS)
            }, function () {
            }, !0, !1)
        }, !0, !0, !1, a)
    },
    chooseAssignee: function (a, b, d, c, e) {
        var f = this.workFlowFormData, g = e.gotPrimaryKey(), h = e.view.workFlowDefinitionKey, i = "";
        e && (i = e.loadWorkFlowProcessDeptCode());
        (e = e.collectMoreWorkFlowParamOnLoadAssignee()) ||
        (e = {});
        d && (e.assignProcess = d);
        var j = this.chooseAssigneePopupConstructor(i, f, d, e, g, h);
        this.preLoadAssignee(b, d, f, c, j, e, g, h, i);
        var k = Scdp.openNewWinByView(j, function (c) {
            var d = c.getCmp("assignTo").gotValue();
            if (b && -1 == f.indexOf("wf_disable_assignee_choose\x3d1") && Scdp.ObjUtil.isEmpty(d) && -1 == f.indexOf("wf_ignore_single_assignee\x3d1") && -1 == f.indexOf("wf_goto_end\x3d1"))return j.getCmp("assignTo").markInvalid(Scdp.I18N.MSG_WORKFLOW_CHOOSE_ASSIGNEE), !1;
            var e = c.getCmp("assignToCode").gotValue(), g = c.getCmp("priority").gotValue();
            a(e, c.getCmp("comment").gotValue(), c.getCmp("userFilter").gotValue(), g, d);
            k.close();
            return !0
        }, "temp_icon_16", Scdp.I18N.WROKFLOW_COMMENT_ASSIGNEE_TITLE, Scdp.I18N.OK_BTN)
    },
    preLoadAssignee: function (a, b, d, c, e, f, g, h, i) {
        var j = !0;
        if (!1 == a || !b && (-1 != d.indexOf("wf_disable_assignee_choose\x3d1") || -1 != d.indexOf("wf_goto_end\x3d1")) || c)e.getCmp("assignTo").setDisabled(!0), j = !1, !c && (!b && -1 != d.indexOf("wf_disable_assignee_choose\x3d1") && -1 != d.join(",").indexOf("userFilter") && -1 == d.indexOf("wf_goto_end\x3d1")) &&
        (j = !0);
        j && (a = {type: 1}, a.userFilter = e.getCmp("userFilter").gotValue(), a.userGroupFilter = e.getCmp("userGroupFilter").gotValue(), a.roleFilter = e.getCmp("roleFilter").gotValue(), a.deptFilter = e.getCmp("deptFilter").gotValue(), a.additionalParam = f, f.customizedLoadUser && (Scdp.ObjUtil.isNotEmpty(g) && (a.businessKey = g), Scdp.ObjUtil.isNotEmpty(h) && (a.workFlowDefinitionKey = h)), Scdp.ObjUtil.isNotEmpty(i) && (a.processDeptCode = i), f = {}, f.queryConditions = a, Scdp.doAction("msgcenter-load-user", f, function (a) {
            a && 1 == a.totalProperty &&
            (a = a.root, e.getCmp("assignTo").sotValue(a[0].userName), e.getCmp("assignToCode").sotValue(a[0].userId))
        }, function () {
        }, !0, !1))
    },
    chooseAssigneePopupConstructor: function (a, b, d, c, e, f) {
        var g = Scdp.getSysConfig("wf_assignee_display");
        g || (g = "user");
        var h = Ext.widget("JForm", {
            height: 225,
            fieldLabel: "Assignee",
            width: 600,
            layout: "form",
            bodyPadding: "10 10 10 10",
            additionalParam: {},
            items: [{
                xtype: "JTextArea",
                fieldLabel: Scdp.I18N.WROKFLOW_COMMENT,
                cid: "comment",
                wrap: !0,
                width: 300,
                height: 150
            }, {
                xtype: "JMsgAddr",
                controller: "Msgcenter.controller.MsgAddrController",
                fieldLabel: Scdp.I18N.WROKFLOW_ASSIGNEE,
                cid: "assignTo",
                multiSelect_b: "false",
                msgType: "IMSG",
                assigneeDisplay: g,
                showName: !0
            }, {
                xtype: "JCombo",
                cid: "priority",
                fieldLabel: Scdp.I18N.WORKFLOW_PRIORITY,
                value: "50",
                displayDesc: !0,
                comboType: "scdp_fmcode",
                codeType: "WF_PRIORITY"
            }, {xtype: "JText", cid: "assignToCode", hidden: !0}, {
                xtype: "JText",
                cid: "userFilter",
                hidden: !0
            }, {xtype: "JText", cid: "roleFilter", hidden: !0}, {
                xtype: "JText",
                cid: "userGroupFilter",
                hidden: !0
            }, {xtype: "JText", cid: "deptFilter", hidden: !0}, {
                xtype: "JText",
                cid: "processDeptCode", hidden: !0
            }, {xtype: "JText", cid: "businessKey", hidden: !0}, {
                xtype: "JText",
                cid: "workFlowDefinitionKey",
                hidden: !0
            }]
        });
        h.getCmp("assignTo").setEditable(!1);
        h.getCmp("processDeptCode").sotValue(a);
        if (Scdp.ObjUtil.isNotEmpty(b)) {
            var i = !1;
            Ext.Array.forEach(b, function (a) {
                d ? (-1 < a.indexOf("assignUserFilter\x3d") && h.getCmp("userFilter").sotValue(a.replace("assignUserFilter\x3d", "")), -1 < a.indexOf("assignUserGroupFilter\x3d") && h.getCmp("userGroupFilter").sotValue(a.replace("assignUserGroupFilter\x3d",
                    "")), -1 < a.indexOf("assignDeptFilter\x3d") && h.getCmp("deptFilter").sotValue(a.replace("assignDeptFilter\x3d", "")), -1 < a.indexOf("assignRoleFilter\x3d") && h.getCmp("roleFilter").sotValue(a.replace("assignRoleFilter\x3d", ""))) : (-1 < a.indexOf("userFilter\x3d") && h.getCmp("userFilter").sotValue(a.replace("userFilter\x3d", "")), -1 < a.indexOf("userGroupFilter\x3d") && h.getCmp("userGroupFilter").sotValue(a.replace("userGroupFilter\x3d", "")), -1 < a.indexOf("deptFilter\x3d") && h.getCmp("deptFilter").sotValue(a.replace("deptFilter\x3d",
                    "")), -1 < a.indexOf("roleFilter\x3d") && h.getCmp("roleFilter").sotValue(a.replace("roleFilter\x3d", "")));
                -1 < a.indexOf("customized-load-user\x3d1") && (i = !0, c.customizedLoadUser = !0);
                -1 < a.indexOf("workflow_assignee_single_select\x3d1") && (c.assigneeSingleSelect = !0)
            });
            i && (Scdp.ObjUtil.isNotEmpty(e) && h.getCmp("businessKey").sotValue(e), Scdp.ObjUtil.isNotEmpty(f) && h.getCmp("workFlowDefinitionKey").sotValue(f))
        }
        h.additionalParam = c;
        return h
    },
    gotPrimaryKey: function () {
        var a = this.view.getCmp("uuid").gotValue();
        Scdp.ObjUtil.isEmpty(a) &&
        (a = this.view.getCmp("editPanel-\x3euuid").gotValue());
        return a
    },
    viewWorkFlowImg: function () {
        var a = this.gotPrimaryKey();
        this.popupWorkFlowImgDialog(a, this.view.workFlowDefinitionKey)
    },
    refreshWorkFlowStatus: function () {
        var a = this;
        if (Scdp.ObjUtil.isNotEmpty(a.view.workFlowDefinitionKey)) {
            a.workFlowFormData = [];
            var b = {};
            b.businessKey = a.gotPrimaryKey();
            b.workFlowDefinitionKey = a.view.workFlowDefinitionKey;
            b.dto = a.dtoClass;
            Scdp.doAction("workflow-init-query-action", b, function (b) {
                refreshWorkFlowBarStatus(b,
                    a)
            }, null, !1, !1)
        }
    },
    refreshUIStatusBasedOnWorkFlow: function () {
    },
    afterLoadItem: function () {
        this.refreshWorkFlowStatus()
    },
    collectMoreWorkFlowParamOnComplete: function () {
        return {}
    },
    collectMoreWorkFlowParamOnReject: function () {
        return {}
    },
    collectMoreWorkFlowParamOnAssign: function () {
        return {}
    },
    collectMoreWorkFlowParamOnLoadAssignee: function () {
        return {}
    },
    afterInit: function () {
        if (this.view.workFlowDefinitionKey && Scdp.ObjUtil.isNotEmpty(this.actionParams)) {
            var a = this.actionParams.wf_businessKey;
            Scdp.ObjUtil.isNotEmpty(a) &&
            this.loadItem(a, "view")
        }
    },
    afterSave: function () {
        this.refreshWorkFlowStatus()
    }
});
Ext.define("Scdp.mvc.AbstractView", {
    extend: "Scdp.mvc.IView", isPopup: !1, layout: {type: "border"}, items: [], initComponent: function () {
        var a = this, b = Scdp.getLayoutAspects(a.aWidth, a.aHeight, a.hideScroll), d = b.cWidth, c = b.cHeight;
        Scdp.ObjUtil.isNotEmpty(b.overflowX) && (a.overflowX = b.overflowX);
        Scdp.ObjUtil.isNotEmpty(b.overflowY) && (a.overflowY = b.overflowY);
        a.callParent(arguments);
        var b = Scdp.getLayoutRet(a, "common-infolayout-load").layout, e = {
            layout: "absolute",
            region: "center",
            closable: !1,
            width: d,
            height: c,
            items: []
        };
        Scdp.buildInfoLayout(e, b, d, c);
        d = Ext.widget("JPanel", e);
        a.add(d);
        a.on("afterrender", function () {
            Ext.getCmp("editStatus").setValue("");
            Ext.getCmp("createBy").setValue("");
            Ext.getCmp("updateBy").setValue("");
            a.controller && a.controller.afterInit && a.controller.afterInit();
            a.afterInit && a.afterInit();
            a.controller && a.controller.registerEvents && a.controller.registerEvents()
        });
        a.on("activate", function () {
            Scdp.ObjUtil.isNotEmpty(a.oldWidth) && a.oldWidth != a.width && Scdp.autoResizeView(a)
        })
    }
});
Ext.define("Scdp.mvc.AbstractCrudView", {
    extend: "Scdp.mvc.IView",
    canEdit: !0,
    UIStatusChanged: null,
    withSelMode: !0,
    showHeaderCheckbox: !0,
    needSplitPage: !0,
    workFlowDefinitionKey: null,
    getHeader: function () {
        var a = this.bindings;
        if (a)return this.getCmp(a[0])
    },
    getQueryPanel: function () {
        return this.getCmp("queryPanel")
    },
    getConditionPanel: function () {
        return this.getQueryPanel().getCmp("conditionPanel")
    },
    getResultPanel: function () {
        return this.getQueryPanel().getCmp("resultPanel")
    },
    getQueryToolbar: function () {
        return this.getQueryPanel().getCmp("queryToolbar")
    },
    getIgnoreCaseValue: function () {
        return this.getCmp("ignoreCase").getValue()
    },
    getMultiSortValue: function () {
        return this.getCmp("multiSort").getValue()
    },
    getEditPanel: function () {
        return this.getCmp("editPanel")
    },
    getExtraPanel: function () {
        return this.getCmp("extraPanel")
    },
    getEditToolbar: function () {
        return this.getEditPanel().getCmp("editToolbar")
    },
    gotValue: function (a) {
        var b = this, d = {}, c = b.bindings;
        c && Ext.Array.each(c, function (c) {
            var f = Scdp.StrUtil.getLastSplit(c, "."), g = b.getCmp(f);
            if (Scdp.ObjUtil.isNotEmpty(g))if (c =
                    c.split("."), 1 == c.length) {
                for (var h = g.gotValue(a), i = 0; 5 > i; i++) {
                    var j = b.getCmp(f + ".append" + (0 == i ? "" : i));
                    if (Scdp.ObjUtil.isNotEmpty(j))Ext.apply(h, j.gotValue(a)); else break
                }
                d[c[0]] = h
            } else if (2 == c.length)if (g.isXType("JForm")) {
                if (!a || a && g.isDirty()) {
                    h = g.gotValue(a);
                    for (i = 0; 5 > i; i++)if (j = b.getCmp(f + ".append" + (0 == i ? "" : i)), Scdp.ObjUtil.isNotEmpty(j))Ext.apply(h, j.gotValue(a)); else break;
                    d[c[0]][c[1]] = g.toList ? [h] : h
                }
            } else d[c[0]][c[1]] = g.gotValue(a), a && Scdp.wrapDataForChange(d)
        });
        return d
    },
    sotValue: function (a,
                        b) {
        var d = this;
        b && Scdp.wrapDataForRemoveSystemFields(a);
        var c = d.bindings;
        c && Ext.Array.each(c, function (b) {
            var c = Scdp.StrUtil.getLastSplit(b, "."), g = d.getCmp(c);
            if (Scdp.ObjUtil.isNotEmpty(g))if (b = b.split("."), 1 == b.length) {
                g.sotValue(a[b[0]], !0);
                for (g = 0; 5 > g; g++) {
                    var h = d.getCmp(c + ".append" + (0 == g ? "" : g));
                    if (Scdp.ObjUtil.isNotEmpty(h))h.sotValue(a[b[0]], !0); else break
                }
            } else if (2 == b.length)if (Scdp.ObjUtil.isNotEmpty(a[b[0]]))if (b = a[b[0]][b[1]] ? a[b[0]][b[1]] : [], g.isXType("JForm")) {
                g.sotValue(g.toList ? b[0] : b,
                    !0);
                for (g = 0; 5 > g; g++)if (h = d.getCmp(c + ".append" + (0 == g ? "" : g)), Scdp.ObjUtil.isNotEmpty(h))h.sotValue(b[0], !0); else break
            } else g.sotValue(b); else g.sotValue(null)
        })
    },
    getUIStatus: function () {
        return this.uistatus
    },
    setUIStatus: function (a, b) {
        this.uistatus = a;
        Ext.suspendLayouts();
        if (this.canEdit)if (Scdp.ObjUtil.isNotEmpty(this.workFlowDefinitionKey) && (this.getCmp("editPanel-\x3eworkFlowAssignBtn").setVisible(!0), this.getCmp("editPanel-\x3eworkFlowCommitBtn").setVisible(!0), this.getCmp("editPanel-\x3eworkFlowRollBackBtn").setVisible(!0),
                this.getCmp("editPanel-\x3eworkFlowCancelBtn").setVisible(!0), this.getCmp("editPanel-\x3eworkFlowViewLogBtn").setVisible(!0), this.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!0), this.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!0), this.getCmp("editPanel-\x3eworkFlowCancelBtn").setDisabled(!0), this.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!0)), Scdp.Const.UI_INFO_STATUS_NEW == a) {
            if (this.sotEditable(!0), b || this.clearData(), this.clearDirty(), 3 != this.viewType && (this.getCmp("queryPanel-\x3eaddNew1Btn").setDisabled(!0),
                    this.getCmp("queryPanel-\x3ebatchDelBtn").setDisabled(!0)), this.getCmp("editPanel-\x3eaddNew2Btn").setDisabled(!0), this.getCmp("editPanel-\x3ecopyAddBtn").setDisabled(!0), this.getCmp("editPanel-\x3emodifyBtn").setDisabled(!0), this.getCmp("editPanel-\x3edeleteBtn").setDisabled(!0), this.getCmp("editPanel-\x3ecancelBtn").setDisabled(!1), this.getCmp("editPanel-\x3esaveBtn").setDisabled(!1), this.getCmp("editPanel-\x3eworkFlowAssignBtn").setDisabled(!0), this.getCmp("editPanel-\x3eworkFlowCommitBtn").setDisabled(!0),
                    this.getCmp("editPanel-\x3eworkFlowCancelBtn").setDisabled(!0), this.getCmp("editPanel-\x3eworkFlowRollBackBtn").setDisabled(!0), this.getHeader() && "function" == typeof this.getHeader().getFirstEditableField) {
                var d = this.getHeader().getFirstEditableField();
                Scdp.ObjUtil.isNotEmpty(d) && d.focus()
            }
        } else Scdp.Const.UI_INFO_STATUS_MODIFY == a ? (this.sotEditable(!0), this.clearDirty(), 3 != this.viewType && (this.getCmp("queryPanel-\x3eaddNew1Btn").setDisabled(!0), this.getCmp("queryPanel-\x3ebatchDelBtn").setDisabled(!0)),
            this.getCmp("editPanel-\x3eaddNew2Btn").setDisabled(!0), this.getCmp("editPanel-\x3ecopyAddBtn").setDisabled(!0), this.getCmp("editPanel-\x3emodifyBtn").setDisabled(!0), this.getCmp("editPanel-\x3edeleteBtn").setDisabled(!0), this.getCmp("editPanel-\x3ecancelBtn").setDisabled(!1), this.getCmp("editPanel-\x3esaveBtn").setDisabled(!1)) : Scdp.Const.UI_INFO_STATUS_VIEW == a ? (this.sotEditable(!1), this.clearDirty(), 3 != this.viewType && (this.getCmp("queryPanel-\x3eaddNew1Btn").setDisabled(!1), this.getCmp("queryPanel-\x3ebatchDelBtn").setDisabled(!1)),
            this.getCmp("editPanel-\x3eaddNew2Btn").setDisabled(!1), this.getCmp("editPanel-\x3ecopyAddBtn").setDisabled(!1), this.getCmp("editPanel-\x3emodifyBtn").setDisabled(!1), this.getCmp("editPanel-\x3edeleteBtn").setDisabled(!1), this.getCmp("editPanel-\x3ecancelBtn").setDisabled(!0), this.getCmp("editPanel-\x3esaveBtn").setDisabled(!0)) : Scdp.Const.UI_INFO_STATUS_NULL == a && (this.sotEditable(!1), this.clearData(), this.clearDirty(), 3 != this.viewType && (this.getCmp("queryPanel-\x3eaddNew1Btn").setDisabled(!1), this.getCmp("queryPanel-\x3ebatchDelBtn").setDisabled(!1)),
            this.getCmp("editPanel-\x3eaddNew2Btn").setDisabled(!1), this.getCmp("editPanel-\x3ecopyAddBtn").setDisabled(!0), this.getCmp("editPanel-\x3emodifyBtn").setDisabled(!0), this.getCmp("editPanel-\x3edeleteBtn").setDisabled(!0), this.getCmp("editPanel-\x3ecancelBtn").setDisabled(!0), this.getCmp("editPanel-\x3esaveBtn").setDisabled(!0));
        this.UIStatusChanged && this.UIStatusChanged(this, a);
        this.uistatus === Scdp.Const.UI_INFO_STATUS_NEW ? (Ext.getCmp("editStatus").setValue(Scdp.I18N.ADD_STATUS), Ext.getCmp("createBy").setValue(""),
            Ext.getCmp("updateBy").setValue("")) : this.uistatus === Scdp.Const.UI_INFO_STATUS_MODIFY ? Ext.getCmp("editStatus").setValue(Scdp.I18N.MODIFY_STATUS) : this.uistatus === Scdp.Const.UI_INFO_STATUS_VIEW ? Ext.getCmp("editStatus").setValue(Scdp.I18N.VIEW_STATUS) : (Ext.getCmp("editStatus").setValue(""), this.updateBy = this.createBy = "");
        Ext.resumeLayouts(!0)
    },
    sotEditable: function (a) {
        var b = this, d = b.bindings;
        d && Ext.Array.each(d, function (c) {
            c = Scdp.StrUtil.getLastSplit(c, ".");
            var d = b.getCmp(c);
            Scdp.ObjUtil.isNotEmpty(d) &&
            d.sotEditable(a);
            for (d = 0; 5 > d; d++) {
                var f = b.getCmp(c + ".append" + (0 == d ? "" : d));
                if (Scdp.ObjUtil.isNotEmpty(f))f.sotEditable(a); else break
            }
        })
    },
    validate: function () {
        var a = !0, b = this, d = b.bindings;
        d && Ext.Array.each(d, function (c) {
            c = Scdp.StrUtil.getLastSplit(c, ".");
            var d = b.getCmp(c);
            Scdp.ObjUtil.isNotEmpty(d) && (d.validate() || (a = !1));
            for (d = 0; 5 > d; d++) {
                var f = b.getCmp(c + ".append" + (0 == d ? "" : d));
                if (Scdp.ObjUtil.isNotEmpty(f))if (f.validate())break; else a = !1
            }
        });
        a || Scdp.MsgUtil.warn(Scdp.I18N.COMMIT_VALIDATE_ERROR);
        return a
    },
    isDirty: function () {
        var a = this, b = !1, d = a.bindings;
        d && Ext.Array.each(d, function (c) {
            c = Scdp.StrUtil.getLastSplit(c, ".");
            var d = a.getCmp(c);
            if (Scdp.ObjUtil.isNotEmpty(d) && (b = d.isDirty()))return !1;
            for (d = 0; 5 > d; d++) {
                var f = a.getCmp(c + ".append" + (0 == d ? "" : d));
                if (Scdp.ObjUtil.isNotEmpty(f)) {
                    if (b = f.isDirty())return !1
                } else break
            }
        });
        return b
    },
    clearDirty: function () {
        var a = this, b = a.bindings;
        b && Ext.Array.each(b, function (b) {
            b = Scdp.StrUtil.getLastSplit(b, ".");
            var c = a.getCmp(b);
            Scdp.ObjUtil.isNotEmpty(c) && c.clearDirty();
            for (c = 0; 5 > c; c++) {
                var e = a.getCmp(b + ".append" + (0 == c ? "" : c));
                if (Scdp.ObjUtil.isNotEmpty(e))e.clearDirty(); else break
            }
        })
    },
    reset: function () {
        var a = this, b = a.bindings;
        b && Ext.Array.each(b, function (b) {
            b = Scdp.StrUtil.getLastSplit(b, ".");
            var c = a.getCmp(b);
            Scdp.ObjUtil.isNotEmpty(c) && c.reset();
            for (c = 0; 5 > c; c++) {
                var e = a.getCmp(b + ".append" + (0 == c ? "" : c));
                if (Scdp.ObjUtil.isNotEmpty(e))e.reset(); else break
            }
        })
    },
    clearData: function () {
        var a = this, b = a.bindings;
        b && Ext.Array.each(b, function (b) {
            b = Scdp.StrUtil.getLastSplit(b, ".");
            var c = a.getCmp(b);
            Scdp.ObjUtil.isNotEmpty(c) && c.clearData();
            for (c = 0; 5 > c; c++) {
                var e = a.getCmp(b + ".append" + (0 == c ? "" : c));
                if (Scdp.ObjUtil.isNotEmpty(e))e.clearData(); else break
            }
        })
    }
});
Ext.define("Scdp.mvc.AbstractCrudView_1", {
    extend: "Scdp.mvc.AbstractCrudView",
    enableColumnMove: !0,
    viewType: 1,
    selMode: "MULTI",
    enableKeyNav: !1,
    isPopup: !1,
    xpHeight: 0,
    editToolbarDockedWay: null,
    mergeCols: [],
    layout: {type: "border"},
    initComponent: function () {
        var a = this;
        if (!a.nullObject) {
            var b = Scdp.getLayoutAspects(a.aWidth, a.aHeight, a.hideScroll), d = b.cWidth, c = b.cHeight;
            Scdp.ObjUtil.isNotEmpty(b.overflowX) && (a.overflowX = b.overflowX);
            Scdp.ObjUtil.isNotEmpty(b.overflowY) && (a.overflowY = b.overflowY);
            Scdp.DebugUtil.isProdMode() &&
            Scdp.CacheUtil.get(Scdp.Const.EDIT_PANEL_DEFAUL_HEIGHT + "_" + a.menuCode) && (a.epHeight = Scdp.CacheUtil.get(Scdp.Const.EDIT_PANEL_DEFAUL_HEIGHT + "_" + a.menuCode));
            a.items = [{xtype: "JPanel", cid: "queryPanel", border: 0, width: d, region: "center"}, {
                xtype: "JFieldSet",
                collapsible: !0,
                title: Scdp.I18N.EDIT_PANEL_TITLE,
                border: 1,
                region: "south",
                split: !0,
                height: a.epHeight ? a.epHeight + 22 : 0,
                layout: "fit",
                items: [{
                    xtype: "JPanel",
                    cid: "editPanel",
                    layout: "auto",
                    width: d,
                    overflowX: "hidden",
                    overflowY: a.epiHeight ? "scroll" : "hidden",
                    listeners: {
                        resize: function (b,
                                          c, d, e, f) {
                            Scdp.resizeEditPanelHeight(b, d, f);
                            Scdp.CacheUtil.set(Scdp.Const.EDIT_PANEL_DEFAUL_HEIGHT + "_" + a.menuCode, d + 1)
                        }
                    }
                }]
            }];
            a.callParent(arguments);
            var b = Scdp.getLayoutRet(a, "common-crudlayout-load"), e = a.getQueryPanel(), f = a.getEditPanel();
            if (!Scdp.ObjUtil.isEmpty(b)) {
                var g = b.queryLayout;
                Scdp.ObjUtil.isNotEmpty(g) && (c = Ext.widget("JQueryView", {
                    isPopup: a.isPopup,
                    cid: "queryView",
                    layoutContent: g,
                    rowColorConfigFn: a.rowColorConfigFn,
                    uuidMapping: a.uuidMapping,
                    withSelMode: a.withSelMode,
                    selMode: a.selMode,
                    showHeaderCheckbox: a.showHeaderCheckbox,
                    enableKeyNav: a.enableKeyNav,
                    defaultSelect: a.defaultSelect,
                    width: d,
                    height: c - a.epHeight,
                    cpHeight: a.cpHeight,
                    xpHeight: a.xpHeight,
                    labelWidth: g.labelWidth ? parseInt(g.labelWidth) : 100,
                    columns: g.columns ? parseInt(g.columns) : 4,
                    viewClassName: a.$className,
                    enableColumnMove: a.enableColumnMove,
                    needSplitPage: a.needSplitPage,
                    mergeCols: a.mergeCols,
                    extraPanelCollapsible: a.extraPanelCollapsible,
                    extraPanelTitle: "undefined" == typeof a.extraPanelTitle ? Scdp.I18N.EXTRA_PANEL_TITLE : a.extraPanelTitle
                }), e.add(c));
                c = b.editLayout;
                Scdp.ObjUtil.isNotEmpty(c) && (c = Ext.widget("JEditView", {
                    layoutContent: c,
                    dockedWay: a.getEditToolbarDockedWay(),
                    withToolbar: a.canEdit,
                    cid: "editView",
                    width: a.epiHeight ? d - 20 : d,
                    height: a.epiHeight || a.epHeight
                }), f.add(c));
                f = a.getCmp("extraPanel");
                b = b.extraLayout;
                Scdp.ObjUtil.isNotEmpty(b) && (d = Ext.widget("JEditView", {
                    layoutContent: b,
                    withToolbar: !1,
                    cid: "extraView",
                    width: d,
                    height: a.xpHeight
                }), f.add(d));
                a.on("afterrender", function () {
                    if (a.canEdit)a.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL); else {
                        var b = a.getCmp("batchDelBtn");
                        Scdp.ObjUtil.isNotEmpty(b) && b.setVisible(!1)
                    }
                    a.controller && a.controller.afterInit && a.controller.afterInit();
                    a.afterInit && a.afterInit();
                    a.controller && a.controller.registerEvents && a.controller.registerEvents();
                    a.on("activate", function () {
                        Scdp.ObjUtil.isNotEmpty(a.oldWidth) && a.oldWidth != a.width && Scdp.autoResizeView(a)
                    })
                });
                a.on("activate", function () {
                    Scdp.ObjUtil.isNotEmpty(a.oldWidth) && a.oldWidth != a.width && Scdp.autoResizeView(a)
                })
            }
        }
    },
    getEditToolbarDockedWay: function () {
        return Scdp.ObjUtil.isNotEmpty(this.editToolbarDockedWay) ?
            this.editToolbarDockedWay : Scdp.Const.ABSTRACT_CRUD_VIEW_1_EDITTOOLBAR_DOCKWAY
    }
});
Ext.define("Scdp.mvc.AbstractCrudView_2", {
    extend: "Scdp.mvc.AbstractCrudView",
    isPopup: !1,
    viewType: 2,
    enableColumnMove: !0,
    selMode: "MULTI",
    enableKeyNav: !1,
    xpHeight: 0,
    editToolbarDockedWay: null,
    mergeCols: [],
    layout: {type: "vbox"},
    initComponent: function () {
        var a = this;
        if (!a.nullObject) {
            var b = Scdp.getLayoutAspects(a.aWidth, a.aHeight, a.hideScroll), d = b.cWidth, c = b.cHeight;
            Scdp.ObjUtil.isNotEmpty(b.overflowX) && (a.overflowX = b.overflowX);
            Scdp.ObjUtil.isNotEmpty(b.overflowY) && (a.overflowY = b.overflowY);
            a.items = [{
                xtype: "JTab",
                border: 1,
                frame: !1,
                flex: 1,
                margin: "0 0 0 1",
                cid: "query\x26edit",
                width: d,
                height: c,
                items: [{
                    xtype: "JPanel",
                    title: "",
                    iconCls: "query_panel_btn",
                    tooltip: Scdp.I18N.QUERY_PANEL_TITLE,
                    cid: "queryPanel",
                    border: 0
                }, {
                    xtype: "JPanel",
                    title: "",
                    iconCls: "edit_panel_btn",
                    tooltip: Scdp.I18N.EDIT_PANEL_TITLE,
                    cid: "editPanel",
                    layout: "auto",
                    border: 0,
                    width: d,
                    height: c - 22,
                    overflowX: "hidden",
                    overflowY: a.epiHeight ? "scroll" : "hidden"
                }],
                tabPosition: "left",
                tabBar: {frame: !0, width: 23, border: 0, style: {backgroundColor: "#f8f8f8", backgroundImage: "none"}}
            }];
            a.callParent(arguments);
            var b = Scdp.getLayoutRet(a, "common-crudlayout-load"), e = a.getQueryPanel(), f = a.getEditPanel(), g = b.queryLayout, h = b.editLayout, g = Ext.widget("JQueryView", {
                cid: "queryView",
                isPopup: a.isPopup,
                layoutContent: g,
                uuidMapping: a.uuidMapping,
                rowColorConfigFn: a.rowColorConfigFn,
                width: d - 28,
                height: c,
                cpHeight: a.cpHeight,
                xpHeight: a.xpHeight,
                labelWidth: g.labelWidth ? parseInt(g.labelWidth) : 100,
                columns: g.columns ? parseInt(g.columns) : 4,
                viewClassName: a.$className,
                enableColumnMove: a.enableColumnMove,
                selMode: a.selMode,
                withSelMode: a.withSelMode,
                showHeaderCheckbox: a.showHeaderCheckbox,
                enableKeyNav: a.enableKeyNav,
                defaultSelect: a.defaultSelect,
                needSplitPage: a.needSplitPage,
                mergeCols: a.mergeCols,
                extraPanelCollapsible: a.extraPanelCollapsible,
                extraPanelTitle: "undefined" == typeof a.extraPanelTitle ? Scdp.I18N.EXTRA_PANEL_TITLE : a.extraPanelTitle
            }), c = Ext.widget("JEditView", {
                layoutContent: h,
                dockedWay: a.getEditToolbarDockedWay(),
                cid: "editView",
                width: a.epiHeight ? d - 48 : d - 28,
                height: "bottom" == a.getEditToolbarDockedWay() ? a.epiHeight ||
                c + 4 : a.epiHeight || c + 8
            });
            e.add(g);
            f.add(c);
            e = a.getCmp("extraPanel");
            b = b.extraLayout;
            Scdp.ObjUtil.isNotEmpty(b) && (d = Ext.widget("JEditView", {
                layoutContent: b,
                cid: "extraView",
                withToolbar: !1,
                width: d,
                height: a.xpHeight
            }), e.add(d));
            a.on("afterrender", function () {
                if (a.canEdit)a.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL); else {
                    var b = a.getCmp("batchDelBtn");
                    Scdp.ObjUtil.isNotEmpty(b) && b.setVisible(!1)
                }
                a.getCmp("queryPanel-\x3eaddNew1Btn").setVisible(!0);
                a.controller && a.controller.afterInit && a.controller.afterInit();
                a.afterInit && a.afterInit();
                a.controller && a.controller.registerEvents && a.controller.registerEvents()
            });
            a.on("activate", function () {
                Scdp.ObjUtil.isNotEmpty(a.oldWidth) && a.oldWidth != a.width && Scdp.autoResizeView(a)
            });
            c.on("afterlayout", function (a) {
                a.withToolbar && "bottom" == a.dockedWay && a.getCmp("editToolbar").setMargin("-6 0 0 0")
            })
        }
    },
    getEditToolbarDockedWay: function () {
        return Scdp.ObjUtil.isNotEmpty(this.editToolbarDockedWay) ? this.editToolbarDockedWay : Scdp.Const.ABSTRACT_CRUD_VIEW_2_EDITTOOLBAR_DOCKWAY
    }
});
Ext.define("Scdp.mvc.AbstractCrudView_3", {
    extend: "Scdp.mvc.AbstractCrudView",
    treePanelTitle: "",
    rootVisible: !1,
    viewType: 3,
    layout: {type: "hbox"},
    withSearchBar: !0,
    treeTools: null,
    editToolbarDockedWay: null,
    initComponent: function () {
        var a = this, b = Scdp.getLayoutAspects(a.aWidth, a.aHeight, a.hideScroll), d = b.cWidth, c = b.cHeight;
        Scdp.ObjUtil.isNotEmpty(b.overflowX) && (a.overflowX = b.overflowX);
        Scdp.ObjUtil.isNotEmpty(b.overflowY) && (a.overflowY = b.overflowY);
        b = {
            xtype: "JTree",
            cid: "queryPanel",
            border: 1,
            iconCls: "menu_header",
            rootVisible: a.rootVisible,
            title: a.treePanelTitle,
            padding: "0 2 0 0",
            width: a.cpWidth,
            height: c,
            storeAction: a.controller.queryAction,
            withSearchBar: a.withSearchBar,
            needLoadItem: !0,
            afterRefresh: function () {
                if (!Scdp.ObjUtil.isEmpty(this.getRootNode())) {
                    var b = a.getHeader().getCmp("uuid").gotValue(), b = this.getRootNode().findChild("id", b, !0);
                    if (!Scdp.ObjUtil.isEmpty(b)) {
                        for (var c = b.parentNode; Scdp.ObjUtil.isNotEmpty(c);)c.expand(), c = c.parentNode;
                        this.getSelectionModel().select(b)
                    }
                }
            }
        };
        a.treeTools && (b.tools = a.treeTools);
        a.items = [b, {
            xtype: "JPanel",
            cid: "editPanel",
            border: 1,
            width: d - a.cpWidth,
            height: c,
            overflowX: "hidden",
            overflowY: a.epiHeight ? "scroll" : "hidden"
        }];
        a.callParent(arguments);
        var e = Scdp.getLayoutRet(a, "common-infolayout-load").layout, b = a.getEditPanel(), d = Ext.widget("JEditView", {
            layoutContent: e,
            cid: "editView",
            dockedWay: a.getEditToolbarDockedWay(),
            width: a.epiHeight ? d - a.cpWidth - 20 : d - a.cpWidth,
            height: (a.getEditToolbarDockedWay(), a.epiHeight || c)
        });
        b.add(d);
        a.on("afterrender", function () {
            a.canEdit && a.setUIStatus(Scdp.Const.UI_INFO_STATUS_NULL);
            a.controller && a.controller.afterInit && a.controller.afterInit();
            a.afterInit && a.afterInit();
            a.controller && a.controller.registerEvents && a.controller.registerEvents()
        });
        a.on("activate", function () {
            Scdp.ObjUtil.isNotEmpty(a.oldWidth) && a.oldWidth != a.width && Scdp.autoResizeView(a)
        })
    },
    getEditToolbarDockedWay: function () {
        return Scdp.ObjUtil.isNotEmpty(this.editToolbarDockedWay) ? this.editToolbarDockedWay : Scdp.Const.ABSTRACT_CRUD_VIEW_3_EDITTOOLBAR_DOCKWAY
    }
});
Ext.define("Scdp.mvc.AbstractReportView", {
    extend: "Scdp.mvc.AbstractCrudView",
    canEdit: !1,
    frameId: "",
    queryLayout: null,
    xpHeight: 0,
    layout: {type: "vbox"},
    initComponent: function () {
        var a = this, b = Scdp.getLayoutAspects(a.aWidth, a.aHeight, a.hideScroll), d = b.cWidth, c = b.cHeight;
        Scdp.ObjUtil.isNotEmpty(b.overflowX) && (a.overflowX = b.overflowX);
        Scdp.ObjUtil.isNotEmpty(b.overflowY) && (a.overflowY = b.overflowY);
        a.items = {xtype: "JPanel", title: "", tooltip: Scdp.I18N.QUERY_PANEL_TITLE, cid: "queryPanel", border: 0};
        a.callParent(arguments);
        var b = Scdp.getLayoutRet(a, "common-reportlayout-load"), e = a.getQueryPanel(), f = b.queryLayout, c = Ext.widget("JQueryView", {
            cid: "queryView",
            isPopup: a.isPopup,
            layoutContent: f,
            isReport: !0,
            width: d,
            height: c,
            cpHeight: a.cpHeight,
            xpHeight: a.xpHeight,
            labelWidth: f.labelWidth ? parseInt(f.labelWidth) : 100,
            columns: f.columns ? parseInt(f.columns) : 4,
            viewClassName: a.$className,
            enableColumnMove: a.enableColumnMove,
            selMode: a.selMode,
            enableKeyNav: a.enableKeyNav,
            defaultSelect: a.defaultSelect,
            needSplitPage: a.needSplitPage,
            extraPanelCollapsible: a.extraPanelCollapsible,
            extraPanelTitle: "undefined" == typeof a.extraPanelTitle ? Scdp.I18N.EXTRA_PANEL_TITLE : a.extraPanelTitle
        });
        e.suspendLayout = !0;
        if ("L" == f.REPORT_TYPE) {
            var g = c.getCmp("conditionToolbar");
            g.remove(g.items.last());
            g.add({text: Scdp.I18N.PRINT, cid: "printReportBtn", iconCls: "printer_icon_16"});
            g.add({text: Scdp.I18N.EMAIL, cid: "emailReportBtn", iconCls: "mail_icon_16"})
        }
        e.add(c);
        e.suspendLayout = !1;
        e.doLayout();
        e = a.getCmp("extraPanel");
        b = b.extraLayout;
        Scdp.ObjUtil.isNotEmpty(b) && (d = Ext.widget("JEditView", {
            layoutContent: b,
            cid: "extraView", withToolbar: !1, width: d, height: a.xpHeight
        }), e.suspendLayout = !0, e.add(d), e.suspendLayout = !1, e.doLayout());
        a.frameId = c.reportFrameId;
        a.queryLayout = f;
        a.on("afterrender", function () {
            a.controller && a.controller.afterInit && a.controller.afterInit();
            a.afterInit && a.afterInit();
            "L" == f.REPORT_TYPE && (a.controller && a.controller.registerReportEvents) && a.controller.registerReportEvents();
            a.controller && a.controller.registerEvents && a.controller.registerEvents()
        });
        a.on("activate", function () {
            Scdp.ObjUtil.isNotEmpty(a.oldWidth) &&
            a.oldWidth != a.width && Scdp.autoResizeView(a)
        })
    },
    setURL: function (a) {
        document.getElementById(this.frameId).src = a
    }
});
Ext.define("Scdp.mvc.AbstractReportController", {
    extend: "Scdp.mvc.AbstractController",
    events: [{cid: "queryPanel-\x3equeryBtn", name: "click", fn: "doQuery"}, {
        cid: "queryPanel-\x3eresetBtn",
        name: "click",
        fn: "doReset"
    }],
    extraEvents: [],
    afterLoadItem: null,
    printMethod: Scdp.Const.REPORT_DEFAULT_PRINT_METHOD,
    emailDocType: Scdp.Const.REPORT_DEFAULT_EMAIL_FORMAT,
    registerReportEvents: function () {
        var a = this;
        Ext.Array.each([{cid: "queryPanel-\x3eemailReportBtn", name: "click", fn: "doEmail"}, {
            cid: "queryPanel-\x3eprintReportBtn",
            name: "click", fn: "doPrint"
        }], function (b) {
            var d = b.name, c = a[b.fn];
            b = a.view.getCmp(b.cid);
            if (Scdp.ObjUtil.isNotEmpty(b))b.on(d, c, a)
        })
    },
    doPrint: function () {
        this.doOperate("print")
    },
    doEmail: function () {
        this.doOperate("email")
    },
    doOperate: function (a) {
        var b = this, d = b.getCondition(b.view.getConditionPanel().gotValue(), b.view.queryLayout).paramObj, c = b.view.getConditionPanel();
        if (!c.validate())return Scdp.MsgUtil.warn(Scdp.I18N.COMMIT_VALIDATE_ERROR), !1;
        Scdp.doCommonReport(b.queryAction, c.gotValue(), b.view.modulePath,
            b.view.queryLayoutFile, b.view.menuCode, function (c, f) {
                d.queryKey = f.key;
                switch (a) {
                    case "print":
                        Scdp.printReport(b.view.queryLayout.REPORT_TEMPLATE, [d], !1, b.printMethod);
                        break;
                    case "email":
                        Ext.create("Scdp.window.ReportSendWindow", {
                            postData: {
                                templatePath: b.view.queryLayout.REPORT_TEMPLATE,
                                formDesc: "REPORT",
                                formCode: "REPORT",
                                attachKey: "",
                                attach: [],
                                emailForm: {format: b.emailDocType, attachNameMap: {}},
                                emailData: d
                            }
                        }).show()
                }
            })
    },
    doQuery: function () {
        var a = this;
        if ("function" != typeof a.beforeQuery || a.beforeQuery()) {
            var b =
                a.view.getConditionPanel();
            if (!b.validate())return Scdp.MsgUtil.warn(Scdp.I18N.COMMIT_VALIDATE_ERROR), !1;
            var d = b.gotValue(!1, !0), c = a.view.queryLayout, e = a.getCondition(d, c), f = e.paramStr, g = e.paramObj;
            if (!1 === a.view.allowNullConditions && !b.hasConditions())Scdp.MsgUtil.info(Scdp.I18N.PLEASE_INPUT_QUERY_CONDITIONS, function () {
                var a = b.getFirstEditableField();
                Scdp.ObjUtil.isNotEmpty(a) && a.focus()
            }); else {
                var h = "";
                switch (c.REPORT_TYPE) {
                    case "R":
                        h = Scdp.getSysConfig("report_server_addr");
                        break;
                    case "L":
                        h = Scdp.getSysConfig("base_path") +
                            Scdp.getSysConfig("report_servlet")
                }
                if (Scdp.StrUtil.replaceNull(c.REPORT_TEMPLATE).startsWith("http"))h = c.REPORT_TEMPLATE; else {
                    if ("" == h || h == Scdp.getSysConfig("base_path")) {
                        Scdp.MsgUtil.warn(Scdp.I18N.REPORT_NO_SERVER);
                        return
                    }
                    h += "?reportlet\x3d" + c.REPORT_TEMPLATE
                }
                h += f;
                h += "\x26fr_locale\x3d" + Scdp.getSysConfig("LOCALE_ID");
                h = Scdp.StrUtil.cjkEncode(h);
                "L" == c.REPORT_TYPE ? Scdp.doCommonReport(this.queryAction, d, a.view.modulePath, a.view.queryLayoutFile, a.view.menuCode, function (b, c) {
                    h += "\x26queryKey\x3d" +
                        c.key;
                    b.view.setURL(h);
                    "function" == typeof a.afterQuery && (g.queryKey = c.key, a.afterQuery(g))
                }, !1, a) : (a.view.setURL(h), Scdp.doAction("sys-time-expend", {}, null, null, !1));
                Scdp.DebugUtil.logInfo(h)
            }
        }
    },
    doReset: function () {
        this.view.getConditionPanel().getForm().reset();
        var a = this.view.getCmp("queryPanel-\x3equickQueryTxt");
        a && a.reset()
    },
    getCondition: function (a, b) {
        var d = "", c = {}, e = this;
        Ext.Object.each(a, function (a, g) {
            var h = e.view.getCmp(a);
            void 0 !== h && Scdp.ObjUtil.isNotEmpty(g) && Ext.each(b.conditions, function (b) {
                if (b.cid ==
                    Scdp.StrUtil.replaceAll(Scdp.StrUtil.replaceAll(a, "fieldFrom", ""), "fieldTo", "")) {
                    var e = "JFromTo" == b.xtype ? b.subXtype : b.xtype, e = "JDate" == e || "JDateTime" == e || "JTime" == e ? h.format : void 0, k = "";
                    g = e ? Ext.Date.format(g, e) : g;
                    k = "JFromTo" == b.xtype && 2 == b.field.split("|").length ? a.endsWith("fieldFrom") ? b.field.split("|")[0] : b.field.split("|")[1] : b.field;
                    c[a] = g;
                    d += "\x26" + k + "\x3d" + Scdp.StrUtil.replaceAll(encodeURIComponent(g), "%2B", "%252B")
                }
            })
        });
        b.REPORT_CACHE && (d += "\x26__cache__\x3dtrue");
        d += "\x26" + Scdp.getSysConfig("REPORT_SYSUSER_PARAM") +
            "\x3d" + Scdp.CacheUtil.get(Scdp.Const.USER_ID);
        c[Scdp.getSysConfig("REPORT_SYSUSER_PARAM")] = Scdp.CacheUtil.get(Scdp.Const.USER_ID);
        return {paramStr: d, paramObj: c}
    }
});
Ext.define("Scdp.mvc.AbstractReportFormView", {
    extend: "Scdp.mvc.AbstractCrudView_1",
    enableColumnMove: !1,
    epHeight: 0,
    prWinWidth: 800,
    prWinHeight: 600,
    titleCol: "",
    subjectCol: "",
    msgCol: "",
    toAddressesCol: "",
    ccAddressesCol: "",
    bccAddressesCol: "",
    replyToAddressesCol: "",
    canEdit: !1,
    initComponent: function () {
        var a = this;
        a.callParent(arguments);
        var b = a.getCmp("conditionToolbar");
        b.add({text: Scdp.I18N.PREVIEW, cid: "previewReportBtn", iconCls: "preview_icon_16"});
        b.add({
            text: Scdp.I18N.BATCH_PRINT, cid: "batchPrintReportBtn",
            iconCls: "printer_icon_16"
        });
        a.on("afterrender", function () {
            a.controller && a.controller.registerReportEvents && a.controller.registerReportEvents()
        })
    }
});
Ext.define("Scdp.mvc.AbstractReportFormController", {
    extend: "Scdp.mvc.AbstractCrudController",
    beforePrint: null,
    beforeEmail: null,
    beforePreview: null,
    maxPrintCount: Scdp.Const.REPORT_MAX_PREVIEW_CONCURRENT,
    prWindow: null,
    emWindow: null,
    printMethod: Scdp.Const.REPORT_DEFAULT_PRINT_METHOD,
    emailDocType: Scdp.Const.REPORT_DEFAULT_EMAIL_FORMAT,
    registerReportEvents: function () {
        var a = this;
        Ext.Array.each([{cid: "queryPanel-\x3epreviewReportBtn", name: "click", fn: "doPreview"}, {
            cid: "queryPanel-\x3ebatchPrintReportBtn",
            name: "click", fn: "doBatchPrint"
        }], function (b) {
            var d = b.name, c = a[b.fn];
            b = a.view.getCmp(b.cid);
            if (Scdp.ObjUtil.isNotEmpty(b))b.on(d, c, a)
        })
    },
    doPreLoad: function () {
    },
    doLoad: function () {
    },
    getExtraReportParams: function () {
        return {}
    },
    getExportFileName: function (a, b) {
        return b
    },
    doPreview: function () {
        if (!this.beforePreview || !("function" == typeof this.beforePreview && !1 === this.beforePreview())) {
            var a = this.getSelection();
            !1 !== a && (Scdp.getEmailAttachmentName(a, this.getExportFileName), Scdp.doPrintPreview(a, this.view.prWinWidth,
                this.view.prWinHeight, this.prWindow))
        }
    },
    doBatchPrint: function () {
        var a = 0;
        if (!this.beforePrint || !("function" == typeof this.beforePrint && !1 === this.beforePrint())) {
            var b = this.getSelection();
            !1 !== b && (Ext.Array.each(b.records, function (d) {
                var c = a;
                setTimeout(function () {
                    Scdp.doSplitPrint(d.queryKey, b, c)
                }, Scdp.Const.REPORT_DEFAULT_PRINT_INTERVAL * a * b.records.length);
                a += 1
            }), Scdp.MsgUtil.info(Scdp.I18N.REPORT_BATCH_CMD_SEND))
        }
    },
    doBatchEmail: function () {
        if (!this.beforeEmail || !("function" == typeof this.beforeEmail &&
            !1 === this.beforeEmail())) {
            var a = this.getSelection();
            !1 !== a && (console.log("Email:"), console.dir(a))
        }
    },
    getSelection: function () {
        var a = this, b = [], d = a.view.getResultPanel().getSelectionModel().getSelection(), c = a.view.getCmp(Scdp.Const.REPORT_FORM_ID_CTL_CID), e = a.view.getCmp(Scdp.Const.REPORT_FORM_ATTACH_CTL_CID), f = [], g = "toAddresses ccAddresses bccAddresses replyToAddresses msg subject".split(" ");
        if (Scdp.ObjUtil.isEmpty(c) || Scdp.ObjUtil.isEmpty(c.gotValue()))return Scdp.MsgUtil.warn(Scdp.I18N.REPORT_FORM_NO_TEMPLATE),
            !1;
        e && e.gotValue() && Ext.Array.each(e.gotValue().split(e.delimiter), function (a) {
            f.push({printer: null, templatePath: null, formDesc: null, formCode: a})
        });
        if (0 >= d.length)return Scdp.MsgUtil.info(Scdp.I18N.NO_RECORDS_SELECT), !1;
        if (d.length <= a.maxPrintCount)return Ext.Array.each(d, function (c) {
            var d = {};
            Ext.Array.each(g, function (b) {
                d[b] = Scdp.StrUtil.replaceNull(c.get(a.view[b + "Col"]))
            });
            b.push(Ext.merge(a.getExtraReportParams(c), {
                uuid: c.get("uuid"), RP_Identify: c.get("uuid"), RP_Title: c.get(Scdp.ObjUtil.isEmpty(a.view.titleCol) ?
                    "uuid" : a.view.titleCol), RP_EmailForm: d, RP_Record: c.data, RP_TitleMap: {}
            }))
        }), d = {
            records: Scdp.saveReportsParams(b),
            formCode: c.gotValue(),
            formDesc: null,
            formType: c.formType,
            schemeCode: c.schemeCode,
            attach: f,
            attachKey: e.gotValue(),
            printMethod: a.printMethod,
            emailDocType: a.emailDocType
        }, Scdp.getFormSetupInfo(d), d;
        Scdp.MsgUtil.warn(Scdp.I18N.REPORT_MAX_PRINT_COUNT + a.maxPrintCount);
        return !1
    }
});
IndexReady = function () {
    function a() {
        c(!1, "");
        var a = Scdp.StrUtil.replaceNull(g.gotValue()).trim(), p = Scdp.StrUtil.replaceNull(f.gotValue()).trim(), e = Scdp.StrUtil.replaceNull(d.getValue()).trim(), o = Scdp.StrUtil.replaceNull(Scdp.getSysConfig("build_id"));
        l.pressed ? Scdp.CacheUtil.set(Scdp.Const.LOGIN_COMPANY_CACHE, a) : Scdp.CacheUtil.remove(Scdp.Const.LOGIN_COMPANY_CACHE);
        n.pressed ? Scdp.CacheUtil.set(Scdp.Const.LOGIN_USER_CACHE, p) : Scdp.CacheUtil.remove(Scdp.Const.LOGIN_USER_CACHE);
        b && Scdp.ObjUtil.isEmpty(a) ?
            (c(!0, Scdp.I18N.WARN_INPUT_COMPANY_NAME), g.focus()) : Scdp.ObjUtil.isEmpty(p) ? (c(!0, Scdp.I18N.WARN_INPUT_USER_NAME), f.focus()) : Scdp.ObjUtil.isEmpty(e) ? (c(!0, Scdp.I18N.WARN_INPUT_PASSWORD), d.focus()) : (updateLoginBtnStatus(!0), Scdp.CryptUtil.encryptPass(e, function (a) {
            if (!1 === a)Scdp.CryptUtil.getServerPublicKey(), c(!0, Scdp.I18N.RSA_EXPIRE_LOGIN), h.focus(), updateLoginBtnStatus(!1); else {
                var b = {};
                b.userId = p;
                b.password = a;
                b.OTP = Scdp.CryptUtil.getTOTP(Scdp.Const.TOTP);
                b.userTzOffset = -1 * (new Date).getTimezoneOffset();
                b.timeZone = jstz.determine().name();
                b.userLocaleId = Scdp.getSysConfig("locale_id");
                window.SYSCONFIG_RSA_DISABLED || (b.publicKey = Scdp.CryptUtil.getClientPublicKey());
                Scdp.doAction("sys-user-login", b, function (a) {
                        0 != a.resultCode ? (c(!0, a.resultInfo), 2 == a.resultCode ? d.focus(!0) : f.focus(!0), updateLoginBtnStatus(!1)) : (doCacheClearAfterLogin(o), Scdp.CacheUtil.set(Scdp.Const.BUILD_ID_CACHE, o), Scdp.MainFrameEvents.fireEvent("afterLogin", a), afterLoginAction(a))
                    }, function () {
                        f.focus(!0);
                        updateLoginBtnStatus(!1)
                    },
                    !1)
            }
        }))
    }

    function c(a, b) {
        k.setVisible(a);
        j.setVisible(a);
        j.setValue(b)
    }

    var b = Scdp.getSysConfig("is_saas");
    Ext.create("Ext.container.Viewport", {
        layout: {type: "vbox", align: "stretch"},
        items: [{xtype: "JFieldSet", overflowY: "hidden", height: 39, layout: {type: "hbox"}, items: []}, {
            xtype: "JFieldSet", overflowY: "hidden", flex: 1, layout: {type: "hbox", align: "stretch"}, items: [{
                xtype: "JFieldSet",
                overflowY: "hidden",
                flex: 9,
                layout: {type: "vbox", align: "stretch"},
                items: [{xtype: "JFieldSet", overflowY: "hidden", flex: 5}, {
                    xtype: "JImg",
                    height: 375, imgCls: "login_logo_img"
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 8}]
            }, {
                xtype: "JFieldSet",
                overflowY: "hidden",
                layout: {type: "vbox", align: "stretch"},
                width: 320,
                items: [{xtype: "JFieldSet", overflowY: "hidden", flex: 5}, {
                    xtype: "JForm",
                    overflowY: "hidden",
                    layout: "absolute",
                    height: 375,
                    id: "loginForm",
                    headerPosition: "left",
                    title: Scdp.I18N.SYSTEM_LOGIN + (window.SYSCONFIG_DEMO_MODE ? " - " + Scdp.I18N.DEMO_MODE : ""),
                    iconCls: "login_title_icon",
                    header: {width: 33, padding: "5 5 5 10"},
                    padding: "28 3 8 3",
                    items: [{
                        xtype: "JFieldSet",
                        overflowY: "hidden",
                        x: 10,
                        y: 20,
                        hidden: !b,
                        width: 250,
                        height: 32,
                        layout: {type: "hbox", align: "stretch"},
                        items: [{
                            xtype: "JImg",
                            id: "loginCompanyIcon",
                            height: 32,
                            src: "framework/images/48x48/login_company48.png",
                            width: 32
                        }, {
                            xtype: "JText",
                            id: "loginCompany",
                            upperCase: !0,
                            height: 32,
                            emptyText: Scdp.I18N.ORGANIZATION_ACCOUNT,
                            value: "",
                            margin: "0 0 0 2",
                            flex: 1
                        }, {
                            xtype: "JButton",
                            id: "btnRmbCompany",
                            tooltip: Scdp.I18N.REMEBER_ORGANIZATION_ACCOUNT,
                            enableToggle: !0,
                            height: 32,
                            width: 32,
                            iconCls: "login_keep_off",
                            margin: "0 0 0 2",
                            listeners: {
                                toggle: function (a,
                                                  b) {
                                    Scdp.CacheUtil.set(Scdp.Const.LOGIN_COMPANY_CACHE_CHECK, b);
                                    b || Scdp.CacheUtil.remove(Scdp.Const.LOGIN_COMPANY_CACHE);
                                    a.setIconCls("login_keep_" + (b ? "on" : "off"))
                                }
                            }
                        }]
                    }, {
                        xtype: "JFieldSet",
                        overflowY: "hidden",
                        x: 10,
                        y: b ? 65 : 35,
                        width: 250,
                        height: 32,
                        border: 0,
                        layout: {type: "hbox", align: "stretch"},
                        items: [{
                            xtype: "JImg",
                            id: "loginUserIcon",
                            height: 32,
                            src: "framework/images/48x48/login_user48.png",
                            width: 32
                        }, {
                            xtype: "JText",
                            id: "loginUser",
                            upperCase: !1,
                            height: 32,
                            value: "",
                            margin: "0 0 0 2",
                            flex: 1,
                            listeners: {
                                specialkey: function (a,
                                                      b) {
                                    if (b.getKey() == b.ENTER || b.getKey() == b.TAB)b.preventDefault(), d.focus()
                                }
                            }
                        }, {
                            xtype: "JButton",
                            id: "btnRmbUser",
                            tooltip: Scdp.I18N.REMEBER_USER_ID,
                            enableToggle: !0,
                            height: 32,
                            width: 32,
                            iconCls: "login_keep_off",
                            margin: "0 0 0 2",
                            listeners: {
                                toggle: function (a, b) {
                                    Scdp.CacheUtil.set(Scdp.Const.LOGIN_USER_CACHE_CHECK, b);
                                    b || Scdp.CacheUtil.remove(Scdp.Const.LOGIN_USER_CACHE);
                                    a.setIconCls("login_keep_" + (b ? "on" : "off"))
                                }
                            }
                        }]
                    }, {
                        xtype: "JFieldSet",
                        overflowY: "hidden",
                        x: 10,
                        y: b ? 110 : 90,
                        width: 250,
                        height: 32,
                        border: 0,
                        layout: {
                            type: "hbox",
                            align: "stretch"
                        },
                        items: [{
                            xtype: "JImg",
                            height: 32,
                            id: "loginPasswdIcon",
                            src: "framework/images/48x48/login_passwd48.png",
                            width: 32
                        }, {
                            xtype: "textfield",
                            inputType: "password",
                            height: 32,
                            id: "loginPasswd",
                            value: "",
                            margin: "0 0 0 2",
                            flex: 1,
                            listeners: {
                                specialkey: function (b, e) {
                                    e.getKey() == Ext.EventObject.BACKSPACE && !0 === this.readOnly ? e.preventDefault() : e.getKey() == Ext.EventObject.ENTER && (Ext.getCmp("loginBtn").isDisabled() || a())
                                }
                            }
                        }]
                    }, {
                        xtype: "JFieldSet",
                        overflowY: "hidden",
                        x: 10,
                        y: 165,
                        width: 250,
                        height: 32,
                        border: 0,
                        layout: {type: "hbox", align: "stretch"},
                        items: [{
                            xtype: "JCheck",
                            id: "clearCache",
                            fieldLabel: Scdp.I18N.CLEAR_CACHE,
                            boxLabel: Scdp.I18N.CLEAR_CACHE,
                            hideLabel: !0,
                            labelWidth: 110,
                            height: 32,
                            flex: 1
                        }]
                    }, {
                        xtype: "JFieldSet",
                        overflowY: "hidden",
                        border: 0,
                        x: 10,
                        y: 210,
                        width: 250,
                        height: 50,
                        layout: {type: "hbox"},
                        items: [{
                            xtype: "JImg",
                            id: "loginErrorIcon",
                            margin: "5 5 5 0",
                            height: 20,
                            width: 20,
                            hidden: !0,
                            src: "framework/images/product/login_error_16.png"
                        }, {
                            xtype: "JDisplay",
                            id: "loginErrorMsg",
                            height: 50,
                            margin: "2 10 10 10",
                            hidden: !0,
                            value: "",
                            fieldStyle: {textAlign: "left", fontSize: "13px", fontWeight: "bold", color: "red"},
                            flex: 1
                        }]
                    }, {
                        xtype: "JButton",
                        x: 10,
                        y: 265,
                        text: Scdp.I18N.LOGIN_BTN_TEXT,
                        height: 38,
                        width: 250,
                        id: "loginBtn",
                        cls: "login_btn",
                        handler: function () {
                            a()
                        }
                    }, {
                        xtype: "JFieldSet",
                        overflowY: "hidden",
                        x: 10,
                        y: 305,
                        width: 250,
                        height: 20,
                        border: 0,
                        cls: "login_label",
                        margin: "5 0 0 0",
                        layout: {type: "hbox", align: "stretch"},
                        items: [{
                            xtype: "JDisplay",
                            id: "forgetPass",
                            flex: 1,
                            hidden: "function" != typeof resetPass,
                            value: '\x3ca href\x3d"javascript:resetPass();"\x3e' +
                            Scdp.I18N.FORGET_PASS + "\x3c/a\x3e"
                        }, {
                            xtype: "JDisplay",
                            id: "resetKey",
                            flex: 1,
                            hidden: window.SYSCONFIG_RSA_DISABLED,
                            cls: "login_label_right",
                            value: '\x3ca href\x3d"javascript:resetEncData();"\x3e' + Scdp.I18N.RESET_RSA + "\x3c/a\x3e"
                        }]
                    }]
                }, {xtype: "JFieldSet", overflowY: "hidden", flex: 8}]
            }, {xtype: "JFieldSet", overflowY: "hidden", flex: 1}]
        }, {
            xtype: "JDisplay",
            hideLabel: !0,
            height: 38,
            style: {
                "background-image": "url(framework/images/login/login_bg_bot.png) !important",
                "background-repeat": "no-repeat",
                "background-position": "center"
            },
            fieldStyle: {
                "font-family": "微软雅黑",
                textAlign: "center",
                position: "absolute",
                bottom: "3px",
                fontSize: "12px",
                color: "white"
            },
            value: Scdp.I18N.COPYRIGHT_TEXT
        }]
    });
    var e = '\x3cdiv class\x3d"login_chose" id\x3d"localeNav"\x3e\x3ca class\x3d"chose_color" href\x3d"javascript:void(0)"\x3e' + {
            zh_CN: " 简体中文(CN)",
            en_US: "English(US)"
        }[Scdp.getSysConfig("locale_id")] + '\x3c/a\x3e\x3cul\x3e\x3cli data-value\x3d"zh_CN"\x3e\x3ca href\x3d"#"\x3e简体中文(CN)\x3c/a\x3e\x3c/li\x3e\x3cli data-value\x3d"en_US"\x3e\x3ca href\x3d"#"\x3eEnglish(US)\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e';
    $(e).appendTo(document.body).on("click", "ul li", function () {
        Scdp.CookieUtil.setCookie(Scdp.Const.SYSTEM_LANGUAGE_ID, $(this).data("value"), -1);
        window.location.reload()
    });
    var g = Ext.getCmp("loginCompany"), f = Ext.getCmp("loginUser"), d = Ext.getCmp("loginPasswd"), h = Ext.getCmp("loginBtn"), l = Ext.getCmp("btnRmbCompany"), n = Ext.getCmp("btnRmbUser"), e = Scdp.CacheUtil.get(Scdp.Const.LOGIN_COMPANY_CACHE), o = Scdp.CacheUtil.get(Scdp.Const.LOGIN_USER_CACHE), q = Scdp.CacheUtil.get(Scdp.Const.LOGIN_COMPANY_CACHE_CHECK), m =
        Scdp.CacheUtil.get(Scdp.Const.LOGIN_USER_CACHE_CHECK), k = Ext.getCmp("loginErrorIcon"), j = Ext.getCmp("loginErrorMsg");
    l.toggle(q);
    n.toggle(m);
    q ? g.setValue(e) : g.setValue("");
    m ? f.setValue(o) : f.setValue("");
    b && Scdp.ObjUtil.isEmpty(g.gotValue()) ? g.focus(!0) : Scdp.ObjUtil.isEmpty(f.gotValue()) ? f.focus(!0) : Scdp.ObjUtil.isEmpty(d.getValue()) ? d.focus(!0) : h.focus(!0);
    if (!Scdp.getSysConfig("DEMO_MODE")) {
        var i = Date.now();
        Scdp.doAction("sys-time-checktime", {}, function (a) {
            Math.abs(a.currentTime - i) > 6E4 * a.timeThreshold &&
            (c(!0, Scdp.I18N.TIME_THRESHOLD_ERROR + (Math.abs(a.currentTime - i) / 1E3).toFixed(0)), Ext.getCmp("loginErrorMsg").setHeight(Ext.getCmp("loginErrorMsg").height + 100), Ext.getCmp("loginErrorMsg").up("JFieldSet").setHeight(Ext.getCmp("loginErrorMsg").up("JFieldSet").height + 100), h.setVisible(!1), d.setDisabled(!0))
        }, function () {
        }, !1);
        window.SYSCONFIG_RSA_DISABLED || (Scdp.CryptUtil.getServerPublicKey(), updateLoginBtnStatus(!0, Scdp.I18N.LOGIN_GENE_KEY), Scdp.CryptUtil.generateClientKeyPair(function () {
            updateLoginBtnStatus(!1)
        }))
    }
};
function doCacheClearAfterLogin(a) {
    Ext.getCmp("clearCache").gotValue() || Scdp.CacheUtil.get(Scdp.Const.BUILD_ID_CACHE) !== a ? (Scdp.CacheUtil.removeAllTemp(), Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_JQGRID_COLUMN_DEF)) : Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_SYS_MENU)
}
function afterLoginAction(a) {
    var c = Scdp.getSysConfig("BASE_PATH") + "framework/jsp/mainframe.jsp";
    if ("1" == a.userToken.substr(0, 1)) {
        var b = Scdp.StrUtil.decodeab(a.userToken.substr(2));
        Scdp.CryptUtil.decryptRSA(b, Scdp.RSA.ClientKey, function (b) {
            a.userToken = b;
            saveLoginData(a);
            window.top.location.replace(c)
        })
    } else a.userToken = a.userToken.substr(2), saveLoginData(a), window.top.location.replace(c)
}
function saveLoginData(a, c) {
    Ext.Array.each(Scdp.Const.USER_DATA_ARRAY, function (b) {
        Scdp.CacheUtil.set(b, a[b])
    });
    !0 !== c && Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_SYS_MENU)
}
function updateLoginBtnStatus(a, c) {
    var b = c || Scdp.I18N.LOGINING_BTN_TEXT, e = Ext.getCmp("loginBtn");
    e.setText(a ? b : Scdp.I18N.LOGIN_BTN_TEXT);
    e.setDisabled(a)
}
function resetEncData() {
    Scdp.MsgUtil.confirm(Scdp.I18N.RESET_RSA_CONFIRM, function (a) {
        "yes" == a && (updateLoginBtnStatus(!0, Scdp.I18N.LOGIN_GENE_KEY), Scdp.CryptUtil.generateClientKeyPair(function () {
            updateLoginBtnStatus(!1);
            Scdp.MsgUtil.info(Scdp.I18N.RESET_RSA_SUCCESS)
        }, !0))
    })
}
function doAutoLogin(a, c) {
    var b = {};
    b.userId = a;
    b.password = c;
    b.OTP = -1;
    b.userTzOffset = -1 * (new Date).getTimezoneOffset() / 60;
    b.userLocaleId = Scdp.getSysConfig("locale_id");
    Scdp.doAction("sys-user-login", b, function (a) {
        0 != a.resultCode ? Scdp.MsgUtil.error("Login Error! Code:" + a.resultCode) : afterLoginAction(a)
    }, function () {
    }, !1)
}
function resetPass() {
    Ext.create("Scdp.window.ResetPassWindow").show()
}
(function (a) {
    a.fn.menuAim = function (c) {
        var b = a(this), e = null, g = [], f = null, d = null, h = a.extend({
            rowSelector: "\x3e li",
            submenuSelector: "*",
            tolerance: 75,
            enter: a.noop,
            exit: a.noop,
            activate: a.noop,
            deactivate: a.noop
        }, c), l = function (a) {
            var b = n();
            b ? d = setTimeout(function () {
                l(a)
            }, b) : a != e && (e && h.deactivate(e), h.activate(a), e = a)
        }, n = function () {
            function c(a, b) {
                return (b.y - a.y) / (b.x - a.x)
            }

            if (!e || !a(e).is(h.submenuSelector))return 0;
            var d = b.offset(), m = {x: d.left + b.outerWidth(), y: d.top - h.tolerance}, k = {
                x: d.left + b.outerWidth(),
                y: d.top + b.outerHeight() + h.tolerance
            }, j = g[g.length - 1], i = g[0];
            if (!j)return 0;
            i || (i = j);
            if (i.x < d.left || (i.x > k.x || i.y < d.top || i.y > k.y) || f && j.x == f.x && j.y == f.y)return 0;
            var d = c(j, m), l = c(j, k), m = c(i, m), k = c(i, k);
            if (d < m && l > k)return f = j, 300;
            f = null;
            return 0
        };
        b.mouseleave(function () {
            d && clearTimeout(d)
        }).find(h.rowSelector).mouseenter(function (a) {
            d && clearTimeout(d);
            h.enter(this, a || window.event);
            l(this, a || window.event)
        }).mouseleave(function (a) {
            h.exit(this, a || window.event)
        });
        a(document).mousemove(function (a) {
            g.push({
                x: a.pageX,
                y: a.pageY
            });
            3 < g.length && g.shift()
        });
        return this
    }
})(jQuery);
MainframeReady = function () {
    var j = null, l = null, k = null, e = null, i = Scdp.getSysConfig("need_workflow"), h = Scdp.getSysConfig("need_msg"), j = Scdp.getSysConfig("hide_dashboard"), m = (h || i) && !j, j = "1" == Scdp.getSysConfig("mainframe_style_version") ? [{
        xtype: "JImg",
        id: "scrollUpBtn",
        margin: "0 0 0 0",
        overCls: "mainframe_header_btn_over_backgroud",
        height: 15,
        title: Scdp.I18N.SCROLL_UP_BTN,
        imgCls: Scdp.getSysConfig("tree_menu") ? "scroll_up_long_btn" : "scroll_up_btn"
    }, {
        xtype: "JPanel",
        layout: "auto",
        bodyStyle: "background-color:#5B8EC6",
        flex: 1,
        items: [{
            xtype: "JFieldSet",
            id: "shortcutPanel",
            border: 0,
            offset: 0,
            allowScroll: !0,
            frame: !1,
            overflowX: "hidden",
            overflowY: "hidden",
            margin: "1 2 2 2",
            layout: {type: "vbox", align: "stretch"},
            items: []
        }]
    }, {
        xtype: "JImg",
        id: "scrollDownBtn",
        margin: "0 0 0 0",
        overCls: "mainframe_header_btn_over_backgroud",
        height: 15,
        title: Scdp.I18N.SCROLL_DOWN_BTN,
        imgCls: Scdp.getSysConfig("tree_menu") ? "scroll_down_long_btn" : "scroll_down_btn"
    }] : [{
        xtype: "JImg",
        id: "scrollUpBtn",
        margin: "0 0 0 0",
        cls: "mainframe_shortcut_btn_up",
        overCls: "mainframe_shortcut_btn_up_hover",
        height: 16,
        title: Scdp.I18N.SCROLL_UP_BTN
    }, {
        xtype: "JPanel",
        layout: "auto",
        bodyStyle: "background-color:#57b2e1",
        flex: 1,
        items: [{
            xtype: "JFieldSet",
            id: "shortcutPanel",
            border: 0,
            offset: 0,
            allowScroll: !0,
            frame: !1,
            overflowX: "hidden",
            overflowY: "hidden",
            margin: "1 2 2 2",
            layout: {type: "vbox", align: "stretch"},
            items: []
        }]
    }, {
        xtype: "JImg",
        id: "scrollDownBtn",
        margin: "0 0 0 0",
        cls: "mainframe_shortcut_btn_down",
        overCls: "mainframe_shortcut_btn_down_hover",
        height: 16,
        title: Scdp.I18N.SCROLL_DOWN_BTN
    }];
    Scdp.getSysConfig("tree_menu") ?
        (k = {
            xtype: "JTree",
            id: "treeAccord",
            border: 1,
            iconCls: "menu_header",
            title: '\x3cspan class\x3d"mainframe_left_panel_header_title"\x3e' + Scdp.I18N.MENU_BAR_TITLE + "\x3c/span\x3e",
            padding: "0 1 0 0",
            width: 168,
            withSearchBar: !0,
            tools: [{
                type: "refresh", handler: function (a, c, f) {
                    f.up("JTree").refresh()
                }
            }],
            listeners: {
                expand: function () {
                    Scdp.CacheUtil.set(Scdp.Const.COMMON_MAINFRAME_ACCORDING_DEFAULT_CACHE, "tree")
                }, itemdblclick: function (a, c) {
                    if (c.raw.leaf) {
                        var f = c.raw.menuAction, b = c.raw.menuType, d = c.raw.menuCode, g =
                            c.raw.actionParams;
                        "MNU_LAYOUT_MODEL" == d ? Scdp.openNewPage(window.SYSCONFIG_BASE_PATH + "framework/jsp/layout_model.jsp") : "MENU_CLEAR_COMBO_CACHE" == d ? (Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_COMBO_STORE), Scdp.MsgUtil.info(Scdp.I18N.MSG_CLEAR_COMBO_CACHE)) : "MENU_CLEAR_SYSMENU_CACHE" == d ? (Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_SYS_MENU), Scdp.MsgUtil.info(Scdp.I18N.MSG_CLEAR_SYSMENU_CACHE)) : "MENU_CLEAR_USER_DEF_SEARCH_RESULT_COLUMN_CACHE" == d ? (Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_JQGRID_COLUMN_DEF),
                            Scdp.MsgUtil.info(Scdp.I18N.MSG_CLEAR_USER_DEF_SEARCH_RESULT_COLUMN_CACHE)) : Scdp.ObjUtil.isNotEmpty(f) && "MENU_ITEM_SPLIT" != b && (d = Ext.clone(c.raw), Scdp.openNewModule(f.trim(), g, d, b))
                    }
                }
            },
            refresh: function () {
            }
        }, e = {
            xtype: "JPanel",
            overflowY: "hidden",
            frame: !1,
            border: 0,
            id: "favoriteAccord",
            iconCls: "my_favorite_on_img",
            title: '\x3cspan class\x3d"mainframe_left_panel_header_title"\x3e' + Scdp.I18N.MY_FAVORITE + "\x3c/span\x3e",
            width: 168,
            margin: "0 1 0 0",
            layout: {type: "vbox", align: "stretch"},
            items: j,
            listeners: {
                expand: function () {
                    Scdp.CacheUtil.set(Scdp.Const.COMMON_MAINFRAME_ACCORDING_DEFAULT_CACHE,
                        "favorite")
                }
            }
        }, "1" != Scdp.getSysConfig("mainframe_style_version") && (e.cls = "mainframe_left_panel_header", k.cls = "mainframe_left_panel_header", k.iconCls = "menu_header2"), l = [e, k], Scdp.getSysConfig("tree_menu_always_on") && (l = [k, e]), e = Scdp.CacheUtil.get(Scdp.Const.NAVIGATION_BAR_DEFAULT_WIDTH_CACHE), Scdp.ObjUtil.isEmpty(e) && (e = 168), k = {
            xtype: "JTab",
            id: "contentPnl",
            border: 1,
            frame: !1,
            region: "center",
            flex: 1,
            margin: "0 0 0 1",
            bodyCls: "mainframe_content_panel",
            tabBar: {
                frame: !0, cls: "header", border: 0, height: 26, style: {
                    backgroundColor: "#f8f8f8",
                    backgroundImage: "none"
                }
            },
            plugins: Ext.create("Ext.ux.TabCloseMenu", {
                closeTabText: Scdp.I18N.CLOSE_CURRENT_TAB,
                closeOthersTabsText: Scdp.I18N.CLOSE_OTHER_TAB,
                closeAllTabsText: Scdp.I18N.CLOSE_ALL_TAB
            }),
            items: [],
            listeners: {
                resize: function (a, c, f, b, d) {
                    a = Scdp.getAllModules();
                    Ext.Array.each(a, function (a) {
                        a.oldWidth = b;
                        a.oldHeight = d;
                        a.setWidth(c)
                    });
                    a = Scdp.getActiveModule();
                    Scdp.autoResizeView(a)
                }
            }
        }, e = {
            xtype: "JFieldSet", overflowY: "hidden", flex: 1, layout: {type: "border"}, items: [{
                xtype: "JPanel",
                overflowY: "hidden",
                frame: !1,
                border: 1,
                bodyStyle: "border:1px solid #70c8e5",
                region: "west",
                id: "naviBar",
                collapsible: !0,
                hideCollapseTool: !0,
                title: '\x3cspan style\x3d"color:#0961b3"\x3e' + Scdp.I18N.NAVIGATION_BAR_SIDE_BAR_TITLE + "\x3c/span\x3e",
                iconCls: Scdp.I18N.NAVIGATION_BAR_SIDE_BAR_CLS,
                split: !0,
                width: e,
                minWidth: 168,
                maxWidth: 268,
                layout: {
                    type: "accordion",
                    titleCollapse: !0,
                    animate: !0,
                    activeOnTop: !1,
                    hideCollapseTool: !0,
                    defaultMargins: {bottom: 1, left: 2, right: 1}
                },
                items: l,
                listeners: {
                    render: function (a) {
                        a.getHeader().setVisible(!1)
                    },
                    resize: function (a, c, f, b) {
                        var d = c - b;
                        window.isNaN(d) || (Scdp.CacheUtil.set(Scdp.Const.NAVIGATION_BAR_DEFAULT_WIDTH_CACHE, c), a = a.query("[xtype\x3d'JShortcutMenu']"), Scdp.ObjUtil.isNotEmpty(a) && Ext.Array.each(a, function (a) {
                            a = a.down("JDisplay");
                            a.setWidth(a.getWidth() + d)
                        }))
                    }, collapse: function () {
                        Scdp.CacheUtil.set(Scdp.Const.NAVIGATION_BAR_DEFAULT_COLLAPSE, !0)
                    }, expand: function (a) {
                        a.getHeader().setVisible(!1);
                        Scdp.CacheUtil.set(Scdp.Const.NAVIGATION_BAR_DEFAULT_COLLAPSE, !1)
                    }
                }
            }, k, {
                xtype: "JFieldSet", overflowY: "hidden",
                region: "east", width: 1
            }]
        }) : k = {
        xtype: "JPanel",
        id: "contentPnl",
        layout: "card",
        border: 0,
        frame: !1,
        region: "center",
        flex: 1,
        bodyCls: "mainframe_content_panel",
        margin: "0 0 0 0",
        items: [],
        listeners: {
            resize: function (a, c, f, b, d) {
                a = Scdp.getAllModules();
                Ext.Array.each(a, function (a) {
                    a.oldWidth = b;
                    a.oldHeight = d;
                    a.setWidth(c)
                });
                a = Scdp.getActiveModule();
                Scdp.autoResizeView(a)
            }
        }
    };
    if ("1" == Scdp.getSysConfig("mainframe_style_version"))l = {
        xtype: "JToolBar",
        cls: "logo_toolbar",
        overflowY: "hidden",
        frame: !1,
        height: 30,
        padding: "0 0 0 0",
        margin: "1 1 1 1",
        layout: {type: "hbox", align: "stretch"},
        items: [{
            xtype: "JImg",
            src: Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_SYSTEM_LOGO), Scdp.Const.LOGO_URL),
            width: 42,
            style: {marginLeft: "5px"}
        }, {
            xtype: "JDisplay",
            value: Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_SYSTEM_TITLE), Scdp.I18N.SYSTEM_NAME),
            fieldCls: "logo_title"
        }, {
            xtype: "JDisplay",
            value: Scdp.I18N.DEMO_MODE,
            hidden: !window.SYSCONFIG_DEMO_MODE,
            fieldCls: "logo_title",
            margin: "0 0 0 5px"
        }, "-\x3e", Scdp.getSysConfig("tree_menu") ?
        {
            xtype: "JDisplay",
            id: "loginTimeoutInfo",
            margin: "3 10 0 0",
            height: 18,
            cls: "login_timeout_warning_title",
            value: ""
        } : null, {
            xtype: "JImg",
            margin: "5 10 5 0",
            overCls: "mainframe_header_btn_over_backgroud",
            width: 18,
            height: 18,
            src: "framework/images/24x24/user24.png"
        }, {
            xtype: "JDisplay",
            margin: "5 10 5 0",
            hideLabel: !0,
            fieldStyle: {fontSize: "13px", fontWeight: "bold", color: "white"},
            value: Scdp.I18N.WELCOME_PREFIX + decodeURIComponent(Scdp.CacheUtil.get(Scdp.Const.USER_NAME)) + Scdp.I18N.WELCOME_SUFFIX
        }, {
            xtype: "JImg", margin: "8 10 8 0",
            width: 1, height: 8, src: "framework/images/16x16/line16.gif"
        }, {
            xtype: "JImg",
            id: "myFavoriteOn",
            margin: "5 10 5 0",
            overCls: "mainframe_header_btn_over_backgroud",
            width: 18,
            height: 18,
            title: Scdp.I18N.ADD_FAVORITE,
            src: "framework/images/24x24/favorite_on24.png"
        }, {
            xtype: "JImg",
            id: "goHome",
            margin: "5 10 5 0",
            overCls: "mainframe_header_btn_over_backgroud",
            width: 18,
            height: 18,
            title: Scdp.I18N.GO_HOME,
            src: "framework/images/24x24/home.png"
        }, {
            xtype: "JImg",
            id: "modifyPassBtn",
            margin: "5 10 5 0",
            overCls: "mainframe_header_btn_over_backgroud",
            width: 18,
            height: 18,
            hidden: -1 == Scdp.CacheUtil.get(Scdp.Const.USER_NEED_MODIFY_PASS),
            title: Scdp.I18N.CHANGE_PERSONAL_INFO,
            src: "framework/images/24x24/setting24.png"
        }, {
            xtype: "JImg",
            id: "logoutBtn",
            margin: "5 10 5 0",
            overCls: "mainframe_header_btn_over_backgroud",
            width: 18,
            height: 18,
            title: Scdp.I18N.QUIT_SYSTEM,
            src: "framework/images/24x24/logout24.png"
        }]
    }, i = {
        xtype: "JToolBar",
        overflowY: "hidden",
        frame: !0,
        height: 24,
        padding: "0 0 0 0",
        margin: "1 1 1 1",
        layout: {type: "hbox", align: "stretch"},
        items: [{
            xtype: "JDisplay",
            value: Scdp.I18N.EDIT_STATUS,
            margin: "1 1 1 1",
            width: 50,
            fieldStyle: {textAlign: "center", fontWeight: "bold"}
        }, "-", {
            xtype: "JDisplay",
            id: "editStatus",
            value: "",
            margin: "1 1 1 1",
            readOnly: !0,
            width: 60
        }, "-", {
            xtype: "JDisplay",
            value: Scdp.I18N.CREATE_BY,
            margin: "1 1 1 1",
            width: 60,
            fieldStyle: {textAlign: "center", fontWeight: "bold"}
        }, "-", {
            xtype: "JDisplay",
            id: "createBy",
            value: "",
            margin: "1 1 1 1",
            readOnly: !0,
            width: 230,
            fieldStyle: {"text-overflow": "ellipsis", "white-space": "nowrap", overflow: "hidden"}
        }, "-", {
            xtype: "JDisplay",
            value: Scdp.I18N.MODIFY_BY,
            margin: "1 1 1 1",
            width: 60,
            fieldStyle: {textAlign: "center", fontWeight: "bold"}
        }, "-", {
            xtype: "JDisplay",
            id: "updateBy",
            value: "",
            margin: "1 1 1 1",
            readOnly: !0,
            width: 230,
            fieldStyle: {"text-overflow": "ellipsis", "white-space": "nowrap", overflow: "hidden"}
        }, "-", "-\x3e", "-", {
            xtype: "JDisplay",
            value: Scdp.I18N.COMPANY_NAME,
            margin: "1 1 1 1",
            width: 70,
            fieldStyle: {textAlign: "center", fontWeight: "bold"}
        }, "-", {
            xtype: "JDisplay", id: "companyName", value: "id:companyName", margin: "1 1 1 1", readOnly: !0, width: m ?
                130 : 180, fieldStyle: {"text-overflow": "ellipsis", "white-space": "nowrap", overflow: "hidden"}
        }, "-", {
            xtype: "JDisplay",
            value: Scdp.I18N.DEPARTMENT_NAME,
            margin: "1 1 1 1",
            width: 70,
            fieldStyle: {textAlign: "center", fontWeight: "bold"}
        }, "-", {
            xtype: "JDisplay",
            id: "departmentName",
            value: "id:departmentName",
            margin: "1 1 1 1",
            readOnly: !0,
            width: m ? 100 : 150,
            fieldStyle: {"text-overflow": "ellipsis", "white-space": "nowrap", overflow: "hidden"}
        }, {xtype: "JTbSeparator", hidden: !m}, {
            xtype: "JDisplay", id: "taskAmount", value: "id:taskAmount",
            margin: "1 1 1 1", width: 90, hidden: !i
        }, {xtype: "JTbSeparator", hidden: !i}, {
            xtype: "JDisplay",
            id: "msgAmount",
            value: "id:msgAmount",
            margin: "1 1 1 1",
            width: 90,
            hidden: !h
        }, "-", {
            xtype: "JPanel",
            layout: "card",
            id: "networkStatus",
            bodyStyle: "background:transparent;",
            width: 26,
            items: [{
                xtype: "JImg",
                overCls: "mainframe_header_btn_over_backgroud",
                title: Scdp.I18N.NETWORK_STATUS_GOOD,
                width: 20,
                imgCls: "green_light_img"
            }, {
                xtype: "JImg",
                overCls: "mainframe_header_btn_over_backgroud",
                title: Scdp.I18N.NETWORK_STATUS_NORMAL,
                width: 20,
                imgCls: "yellow_light_img"
            }, {
                xtype: "JImg",
                overCls: "mainframe_header_btn_over_backgroud",
                title: Scdp.I18N.NETWORK_STATUS_BAD,
                width: 20,
                imgCls: "red_light_img"
            }]
        }]
    }, Scdp.getSysConfig("tree_menu") ? Ext.create("Ext.container.Viewport", {
        id: "viewPort",
        layout: {type: "vbox", align: "stretch"},
        items: [l, e, i]
    }) : (h = [], h.push("-\x3e"), h.push({
        xtype: "JDisplay",
        id: "loginTimeoutInfo",
        margin: "3 10 0 0",
        height: 18,
        cls: "login_timeout_warning",
        value: ""
    }), h.push("-"), h.push({
        xtype: "JDisplay", value: Scdp.I18N.CURRENT_MODULE_LOCATION,
        margin: "3 5 5 5"
    }), h.push({
        id: "curModuleName",
        text: "",
        menu: {
            items: ["-", {
                xtype: "JSysMenuItem",
                text: Scdp.I18N.CLOSE_OTHER_TAB,
                iconCls: "close_others_16",
                handler: function () {
                    Scdp.closeAllOtherModule()
                }
            }, {
                xtype: "JSysMenuItem", text: Scdp.I18N.CLOSE_ALL_TAB, iconCls: "close_all_16", handler: function () {
                    Scdp.closeAllModule()
                }
            }]
        }
    }), h.push("-"), h.push({
        text: "",
        iconCls: "close_current_16",
        tooltip: Scdp.I18N.CLOSE_CURRENT_TAB,
        margin: "3 0 0 0",
        handler: function () {
            Scdp.closeActiveModule()
        }
    }), Ext.create("Ext.container.Viewport",
        {
            id: "viewPort",
            layout: {type: "vbox", align: "stretch"},
            items: [l, {
                xtype: "JToolBar",
                overflowY: "hidden",
                id: "mainframeMenuBar",
                frame: !0,
                height: 28,
                padding: "0 0 0 0",
                margin: "1 1 1 1",
                layout: {type: "hbox", align: "stretch"},
                items: h
            }, {
                xtype: "JFieldSet",
                overflowY: "hidden",
                flex: 1,
                layout: {type: "hbox", align: "stretch"},
                items: [{xtype: "JFieldSet", overflowY: "hidden", width: 1}, {
                    xtype: "JPanel",
                    overflowY: "hidden",
                    frame: !1,
                    border: 1,
                    width: 123,
                    margin: "0 1 0 0",
                    layout: {type: "vbox", align: "stretch"},
                    items: j
                }, k, {
                    xtype: "JFieldSet",
                    overflowY: "hidden", width: 1
                }]
            }, i]
        })); else {
        $("#main_body").css("background-color", "#025dcf");
        var l = {
            xtype: "JToolBar",
            baseCls: "mainframe_header_background",
            overflowY: "hidden",
            frame: !1,
            height: 33,
            padding: Scdp.getSysConfig("tree_menu") ? "0 0 0 2" : "0 0 0 34",
            margin: "0 0 0 0",
            layout: {type: "hbox", align: "stretch"},
            items: [{
                xtype: "JImg",
                width: 42,
                margin: "3 0 2 0px",
                src: Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_SYSTEM_LOGO), Scdp.Const.LOGO_URL)
            }, {
                xtype: "JDisplay", value: Scdp.StrUtil.replaceNull(Scdp.CacheUtil.get(Scdp.Const.USER_SYSTEM_TITLE),
                    Scdp.I18N.SYSTEM_NAME), fieldCls: "logo_title", margin: "2 0 0 0px"
            }, {
                xtype: "JDisplay",
                value: Scdp.I18N.DEMO_MODE,
                hidden: !window.SYSCONFIG_DEMO_MODE,
                fieldCls: "logo_title",
                margin: "2 0 0 5px"
            }, "-\x3e", {
                xtype: "JImg",
                id: "helpBtn",
                margin: "4 10 4 0",
                cls: "mainframe_header_icon mainframe_header_btn_help_background",
                overCls: "mainframe_header_btn_help_over_background",
                width: 25,
                height: 25,
                title: Scdp.I18N.HELP
            }, {
                xtype: "JImg",
                id: "goHome",
                margin: "5 10 4 0",
                cls: "mainframe_header_btn_home_background",
                overCls: "mainframe_header_btn_home_over_background",
                width: 25,
                height: 25,
                hidden: !m,
                title: Scdp.I18N.GO_HOME
            }, {
                xtype: "JImg",
                id: "modifyPassBtn",
                margin: "4 10 4 0",
                cls: "mainframe_header_icon mainframe_header_btn_setting_background",
                overCls: "mainframe_header_btn_setting_over_background",
                width: 25,
                height: 25,
                hidden: -1 == Scdp.CacheUtil.get(Scdp.Const.USER_NEED_MODIFY_PASS),
                title: Scdp.I18N.CHANGE_PERSONAL_INFO
            }, {
                xtype: "JImg",
                id: "logoutBtn",
                margin: "4 10 4 0",
                cls: "mainframe_header_icon mainframe_header_btn_off_background",
                overCls: "mainframe_header_btn_off_over_background",
                width: 25,
                height: 25,
                title: Scdp.I18N.QUIT_SYSTEM
            }]
        }, u = {
            xtype: "JToolBar",
            id: "menuToolbar",
            baseCls: "mainframe_header_background",
            overflowY: "hidden",
            frame: !1,
            height: 27,
            padding: "0 0 0 0",
            margin: "0 0 0 0px",
            layout: {type: "hbox", align: "stretch"},
            items: [{xtype: "JImg", width: "154px", imgCls: "mainframe_header_menue_left"}, {
                xtype: "JImg",
                flex: 1,
                imgCls: "mainframe_header_menue_center"
            }, {xtype: "JImg", width: "154px", imgCls: "mainframe_header_menue_right"}]
        }, p = {
            xtype: "JToolBar",
            baseCls: "mainframe_header_white",
            overflowY: "hidden",
            frame: !1,
            height: 24,
            padding: "0 0 0 0",
            margin: "0 0 1 0",
            layout: {type: "hbox", align: "stretch"},
            items: [{
                xtype: "JImg",
                margin: "4 10 4 10px",
                width: 16,
                height: 16,
                cls: "mainframe_header_icon mainframe_header_user_background"
            }, {
                xtype: "JDisplay",
                margin: "2 0 0 0px",
                hideLabel: !0,
                fieldStyle: {display: "block", color: "#0961b3", "font-family": "微软雅黑", "font-size": "14px"},
                value: Scdp.I18N.WELCOME_PREFIX + decodeURIComponent(Scdp.CacheUtil.get(Scdp.Const.USER_NAME)) + Scdp.I18N.WELCOME_SUFFIX
            }, {
                xtype: "JDisplay", id: "headerToolbarCustomInfo",
                margin: "2 0 0 10px", hideLabel: !0, value: ""
            }, "-\x3e", {
                xtype: "JDisplay",
                id: "loginTimeoutInfo",
                margin: "2 10 0 0",
                height: 18,
                cls: "login_timeout_warning",
                value: ""
            }, {
                xtype: "JImg",
                id: "goBackPreviousModuleBtn",
                width: 22,
                height: 22,
                title: Scdp.I18N.GO_BACK_PREVIOUS_MODULE,
                overCls: "mainframe_header_btn_over_backgroud",
                margin: "1 5 1 5px",
                hidden: Scdp.getSysConfig("tree_menu"),
                src: "framework/images/mainframe/sy_go_back.png"
            }, {xtype: "JTbSeparator", hidden: Scdp.getSysConfig("tree_menu")}, {
                xtype: "JDisplay", value: Scdp.I18N.CURRENT_MODULE_LOCATION,
                margin: "2 5 5 5px", hidden: Scdp.getSysConfig("tree_menu"), fieldStyle: {"font-family": "微软雅黑"}
            }, {
                id: "curModuleName",
                text: "",
                hidden: Scdp.getSysConfig("tree_menu"),
                menu: {
                    items: ["-", {
                        xtype: "JSysMenuItem",
                        text: Scdp.I18N.CLOSE_OTHER_TAB,
                        iconCls: "close_others_16",
                        handler: function () {
                            Scdp.closeAllOtherModule()
                        }
                    }, {
                        xtype: "JSysMenuItem",
                        text: Scdp.I18N.CLOSE_ALL_TAB,
                        iconCls: "close_all_16",
                        handler: function () {
                            Scdp.closeAllModule()
                        }
                    }]
                }
            }, {
                xtype: "JImg",
                id: "myFavoriteOn",
                width: 14,
                height: 14,
                overCls: "mainframe_header_btn_over_backgroud",
                title: Scdp.I18N.ADD_FAVORITE,
                margin: "5 4 5 4px",
                src: "framework/images/16x16/my_favorite_on.png"
            }, {
                xtype: "JImg",
                id: "closeCurrentBtn",
                width: 12,
                height: 12,
                title: Scdp.I18N.CLOSE_CURRENT_TAB,
                overCls: "mainframe_header_btn_over_backgroud",
                margin: "6 10 6 5px",
                hidden: Scdp.getSysConfig("tree_menu"),
                src: "framework/images/mainframe/sy_close.png"
            }]
        }, i = {
            xtype: "JToolBar",
            overflowY: "hidden",
            baseCls: "mainframe_bottom_toolbar",
            frame: !0,
            height: 26,
            padding: "0 0 0 0",
            margin: "1 0 0 0",
            layout: {type: "hbox", align: "stretch"},
            items: [{
                xtype: "JDisplay",
                value: Scdp.I18N.EDIT_STATUS,
                margin: "1 1 1 1",
                width: 50,
                fieldStyle: {color: "#ffffff", "font-family": "微软雅黑", textAlign: "center"}
            }, {
                xtype: "JDisplay",
                id: "editStatus",
                value: "",
                margin: "1 1 1 1",
                readOnly: !0,
                width: 60,
                fieldStyle: {color: "#9ccbf5", "font-family": "微软雅黑"}
            }, {
                xtype: "JImg",
                width: 2,
                height: 19,
                margin: "3 0 4 0",
                src: "framework/images/mainframe/sy_lineb.png"
            }, {
                xtype: "JDisplay",
                value: Scdp.I18N.CREATE_BY,
                margin: "1 1 1 1",
                width: 60,
                fieldStyle: {color: "#ffffff", "font-family": "微软雅黑", textAlign: "center"}
            },
                {
                    xtype: "JDisplay",
                    id: "createBy",
                    value: "",
                    margin: "1 1 1 1",
                    readOnly: !0,
                    width: 230,
                    fieldStyle: {
                        color: "#9ccbf5",
                        "font-family": "微软雅黑",
                        "text-overflow": "ellipsis",
                        "white-space": "nowrap",
                        overflow: "hidden"
                    }
                }, {
                    xtype: "JImg",
                    width: 2,
                    height: 19,
                    margin: "3 0 4 0",
                    src: "framework/images/mainframe/sy_lineb.png"
                }, {
                    xtype: "JDisplay",
                    value: Scdp.I18N.MODIFY_BY,
                    margin: "1 1 1 1",
                    width: 60,
                    fieldStyle: {color: "#ffffff", "font-family": "微软雅黑", textAlign: "center"}
                }, {
                    xtype: "JDisplay",
                    id: "updateBy",
                    value: "",
                    margin: "1 1 1 1",
                    readOnly: !0,
                    width: 230,
                    fieldStyle: {
                        color: "#9ccbf5",
                        "font-family": "微软雅黑",
                        "text-overflow": "ellipsis",
                        "white-space": "nowrap",
                        overflow: "hidden"
                    }
                }, {
                    xtype: "JImg",
                    width: 2,
                    height: 19,
                    margin: "3 0 4 0",
                    src: "framework/images/mainframe/sy_lineb.png"
                }, "-\x3e", {
                    xtype: "JImg",
                    width: 2,
                    height: 19,
                    margin: "3 0 4 0",
                    src: "framework/images/mainframe/sy_lineb.png"
                }, {
                    xtype: "JDisplay",
                    value: Scdp.I18N.COMPANY_NAME,
                    margin: "1 1 1 1",
                    width: 70,
                    fieldStyle: {color: "#ffffff", "font-family": "微软雅黑", textAlign: "center"}
                }, {
                    xtype: "JDisplay",
                    id: "companyName",
                    value: "id:companyName",
                    margin: "1 1 1 1",
                    readOnly: !0,
                    width: m ? 130 : 180,
                    fieldStyle: {
                        color: "#9ccbf5",
                        "font-family": "微软雅黑",
                        "text-overflow": "ellipsis",
                        "white-space": "nowrap",
                        overflow: "hidden"
                    }
                }, {
                    xtype: "JImg",
                    width: 2,
                    height: 19,
                    margin: "3 0 4 0",
                    src: "framework/images/mainframe/sy_lineb.png"
                }, {
                    xtype: "JDisplay",
                    value: Scdp.I18N.DEPARTMENT_NAME,
                    margin: "1 1 1 1",
                    width: 70,
                    fieldStyle: {color: "#ffffff", "font-family": "微软雅黑", textAlign: "center"}
                }, {
                    xtype: "JDisplay",
                    id: "departmentName",
                    value: "id:departmentName",
                    margin: "1 1 1 5",
                    readOnly: !0,
                    width: m ? 100 : 150,
                    fieldStyle: {
                        color: "#9ccbf5",
                        "font-family": "微软雅黑",
                        "text-overflow": "ellipsis",
                        "white-space": "nowrap",
                        overflow: "hidden"
                    }
                }, {
                    xtype: "JImg",
                    width: 2,
                    height: 19,
                    margin: "3 0 4 0",
                    hidden: !m,
                    src: "framework/images/mainframe/sy_lineb.png"
                }, {
                    xtype: "JDisplay",
                    id: "taskAmount",
                    value: "id:taskAmount",
                    margin: "1 1 1 1",
                    width: 90,
                    hidden: !i,
                    fieldStyle: {color: "#9ccbf5", "font-family": "微软雅黑"}
                }, {
                    xtype: "JImg",
                    width: 2,
                    height: 19,
                    margin: "3 0 4 0",
                    hidden: !i,
                    src: "framework/images/mainframe/sy_lineb.png"
                },
                {
                    xtype: "JDisplay",
                    id: "msgAmount",
                    value: "id:msgAmount",
                    margin: "1 1 1 1",
                    width: 90,
                    hidden: !h,
                    fieldStyle: {color: "#9ccbf5", "font-family": "微软雅黑"}
                }, {
                    xtype: "JImg",
                    width: 2,
                    height: 19,
                    margin: "3 0 4 0",
                    src: "framework/images/mainframe/sy_lineb.png"
                }, {
                    xtype: "JPanel",
                    layout: "card",
                    id: "networkStatus",
                    bodyStyle: "background:transparent;",
                    margin: "1 3 1 3",
                    width: 24,
                    height: 24,
                    items: [{
                        xtype: "JImg",
                        title: Scdp.I18N.NETWORK_STATUS_GOOD,
                        cls: "mainframe_header_icon mainframe_light_green"
                    }, {
                        xtype: "JImg", title: Scdp.I18N.NETWORK_STATUS_NORMAL,
                        cls: "mainframe_header_icon mainframe_light_yellow"
                    }, {
                        xtype: "JImg",
                        title: Scdp.I18N.NETWORK_STATUS_BAD,
                        cls: "mainframe_header_icon mainframe_light_red"
                    }]
                }]
        };
        Scdp.getSysConfig("tree_menu") ? Ext.create("Ext.container.Viewport", {
            id: "viewPort",
            layout: {type: "vbox", align: "stretch"},
            items: [l, p, e, i]
        }) : (e = Scdp.CacheUtil.get(Scdp.Const.NAVIGATION_BAR_DEFAULT_WIDTH_CACHE), Scdp.ObjUtil.isEmpty(e) && (e = 118), Ext.create("Ext.container.Viewport", {
            id: "viewPort", layout: {type: "vbox", align: "stretch"}, items: [l, u, p, {
                xtype: "JFieldSet",
                overflowY: "hidden", flex: 1, margin: "0 0 0 0px", layout: {type: "border"}, items: [{
                    xtype: "JPanel",
                    overflowY: "hidden",
                    id: "naviBar",
                    frame: !1,
                    border: 1,
                    region: "west",
                    collapsible: !0,
                    hideCollapseTool: !0,
                    split: !0,
                    bodyStyle: "border:1px solid #70c8e5",
                    width: e,
                    minWidth: 118,
                    maxWidth: 268,
                    margin: "0 2 0 2px",
                    title: '\x3cspan style\x3d"color:#0961b3"\x3e' + Scdp.I18N.NAVIGATION_BAR_SIDE_BAR_TITLE + "\x3c/span\x3e",
                    iconCls: Scdp.I18N.NAVIGATION_BAR_SIDE_BAR_CLS,
                    layout: {type: "vbox", align: "stretch"},
                    items: j,
                    listeners: {
                        render: function (a) {
                            a.getHeader().setVisible(!1)
                        },
                        resize: function (a, c, f, b) {
                            var d = c - b;
                            window.isNaN(d) || (Scdp.CacheUtil.set(Scdp.Const.NAVIGATION_BAR_DEFAULT_WIDTH_CACHE, c), a = a.query("[xtype\x3d'JShortcutMenu']"), Scdp.ObjUtil.isNotEmpty(a) && Ext.Array.each(a, function (a) {
                                a = a.down("JDisplay");
                                a.setWidth(a.getWidth() + d)
                            }))
                        }, collapse: function () {
                            Scdp.CacheUtil.set(Scdp.Const.NAVIGATION_BAR_DEFAULT_COLLAPSE, !0)
                        }, expand: function (a) {
                            a.getHeader().setVisible(!1);
                            Scdp.CacheUtil.set(Scdp.Const.NAVIGATION_BAR_DEFAULT_COLLAPSE, !1)
                        }
                    }
                }, k, {
                    xtype: "JFieldSet", overflowY: "hidden",
                    region: "east", width: 1
                }]
            }, i]
        }));
        Ext.get("closeCurrentBtn").on("click", function () {
            Scdp.closeActiveModule()
        });
        Ext.get("goBackPreviousModuleBtn").on("click", function () {
            Scdp.goBackPreviousModule()
        });
        Ext.get("helpBtn").on("click", function () {
            var a = Scdp.getSysConfig("help_document_url"), c = Scdp.getSysConfig("PRODUCT_MODE") + "_Help";
            Scdp.ObjUtil.isNotEmpty(a) && (0 < a.indexOf("://") ? window.open(a, c) : window.open(Scdp.getSysConfig("base_path") + a, c))
        })
    }
    var q = [{
        xtype: "JSysMenuItem",
        text: "实体建模",
        menuType: "MENU_ITEM_CTL",
        menuCode: "MNU_ENTITY_MODEL",
        menuAction: "EntityModel.controller.EntityModelController",
        iconCls: "entity_model_icon"
    }, {
        xtype: "JSysMenuItem",
        text: "代码生成",
        menuType: "MENU_ITEM_CTL",
        menuCode: "MNU_CODE_GENERATOR",
        menuAction: "Codegenerator.controller.CodegeneratorController",
        iconCls: "code_gen_icon"
    }, {
        xtype: "JSysMenuItem",
        text: "界面建模",
        menuType: "MENU_ITEM_CTL",
        menuCode: "MNU_LAYOUT_MODEL",
        menuAction: "",
        iconCls: "page_layout_icon",
        handler: function () {
            Scdp.openNewPage(window.SYSCONFIG_BASE_PATH + "framework/jsp/layout_model.jsp")
        }
    },
        {
            text: "示例程序", iconCls: "sample_prog_icon", menu: {
            items: [{
                xtype: "JSysMenuItem",
                text: "任意样式",
                menuType: "MENU_ITEM_CTL",
                menuCode: "sample01",
                menuAction: "SampleBase.controller.SampleBaseController"
            }, {
                xtype: "JSysMenuItem",
                text: "单表样例",
                menuType: "MENU_ITEM_CTL",
                menuCode: "sample02",
                menuAction: "SampleSingle.controller.SampleSingleCrudController"
            }, {
                xtype: "JSysMenuItem",
                text: "二层表样例1",
                menuType: "MENU_ITEM_CTL",
                menuCode: "sample03",
                menuAction: "SampleDouble.controller.SampleDoubleCrudController"
            }, {
                xtype: "JSysMenuItem",
                text: "二层表样例2",
                menuType: "MENU_ITEM_CTL",
                menuCode: "sample04",
                menuAction: "SampleDouble.controller.SampleDoubleCrudController1"
            }, {
                xtype: "JSysMenuItem",
                text: "三层以上表样例",
                menuType: "MENU_ITEM_CTL",
                menuCode: "sample05",
                menuAction: "SampleTrible.controller.SampleTribleCrudController"
            }, {
                xtype: "JSysMenuItem",
                text: "报表样例",
                menuType: "MENU_ITEM_CTL",
                menuCode: "sample06",
                menuAction: "SampleReport.controller.SampleReportController"
            }, {
                xtype: "JSysMenuItem",
                text: "表单报表样例",
                menuType: "MENU_ITEM_CTL",
                menuCode: "sample07",
                menuAction: "SampleFormReport.controller.SampleFormReportController"
            }]
        }
        },
        {
            text: Scdp.I18N.MENU_SYS_TOOLS, iconCls: "setting_btn", menu: {
            items: [{
                text: Scdp.I18N.MENU_CACHE_MANAGEMENT, iconCls: "cache_management_icon", menu: {
                    items: [{
                        xtype: "JSysMenuItem",
                        menuCode: "MENU_CLEAR_COMBO_CACHE",
                        text: Scdp.I18N.MENU_CLEAR_COMBO_CACHE,
                        iconCls: "combox_icon",
                        handler: function () {
                            Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_COMBO_STORE);
                            Scdp.MsgUtil.info(Scdp.I18N.MSG_CLEAR_COMBO_CACHE)
                        }
                    }, {
                        xtype: "JSysMenuItem",
                        menuCode: "MENU_CLEAR_SYSMENU_CACHE",
                        text: Scdp.I18N.MENU_CLEAR_SYSMENU_CACHE,
                        iconCls: "sys_menu_icon",
                        handler: function () {
                            Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_SYS_MENU);
                            Scdp.MsgUtil.info(Scdp.I18N.MSG_CLEAR_SYSMENU_CACHE)
                        }
                    }, {
                        xtype: "JSysMenuItem",
                        menuCode: "MENU_CLEAR_USER_DEF_SEARCH_RESULT_COLUMN_CACHE",
                        text: Scdp.I18N.MENU_CLEAR_USER_DEF_SEARCH_RESULT_COLUMN_CACHE,
                        iconCls: "search_result_column_16",
                        handler: function () {
                            Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_JQGRID_COLUMN_DEF);
                            Scdp.MsgUtil.info(Scdp.I18N.MSG_CLEAR_USER_DEF_SEARCH_RESULT_COLUMN_CACHE)
                        }
                    }]
                }
            },
                {
                    xtype: "JSysMenuItem",
                    menuCode: "MENU_SHOW_CONTROLLER",
                    text: Scdp.I18N.MENU_SHOW_CONTROLLER,
                    iconCls: "",
                    handler: function () {
                        var a = Scdp.getActiveModule();
                        a && Scdp.MsgUtil.info(a.controller.$className)
                    }
                }, {
                    xtype: "JSysMenuItem",
                    menuCode: "MENU_STRING_ENCRYPTION",
                    text: Scdp.I18N.GET_ENCRYPT_TITLE,
                    iconCls: "pass_icon_16",
                    handler: function () {
                        Ext.create("Scdp.window.getEncryptWindow").show()
                    }
                }, {
                    text: Scdp.I18N.MENU_SHOW_VIEW_DATA, iconCls: "", menu: {
                        items: [{
                            xtype: "JSysMenuItem",
                            menuCode: "MENU_SHOW_VIEW_DATA_ORIGIN",
                            text: Scdp.I18N.MENU_SHOW_VIEW_DATA_ORIGIN,
                            iconCls: "",
                            handler: function () {
                                var a = Scdp.getActiveModule();
                                a && (a = a.gotValue(!1), console.dir(a))
                            }
                        }, {
                            xtype: "JSysMenuItem",
                            menuCode: "MENU_SHOW_VIEW_DATA_MERGED",
                            text: Scdp.I18N.MENU_SHOW_VIEW_DATA_MERGED,
                            iconCls: "",
                            handler: function () {
                                var a = Scdp.getActiveModule();
                                a && (a = a.gotValue(!1), Scdp.wrapDataForMerge(a), console.dir(a))
                            }
                        }, {
                            xtype: "JSysMenuItem",
                            menuCode: "MENU_SHOW_VIEW_DATA_CHANGED",
                            text: Scdp.I18N.MENU_SHOW_VIEW_DATA_CHANGED,
                            iconCls: "",
                            handler: function () {
                                var a = Scdp.getActiveModule();
                                a && (a = a.gotValue(!0),
                                    console.dir(a))
                            }
                        }]
                    }
                }]
        }
        }], r = function (a) {
        var c = a.userFavorites, f = Ext.getCmp("shortcutPanel");
        Ext.getCmp("myFavorite");
        if (Scdp.ObjUtil.isNotEmpty(c)) {
            f.userFavorites = c;
            for (var b = 0; b < c.length; b++) {
                var d = c[b];
                Scdp.ObjUtil.isEmpty(d.imgCls) && (d.imgCls = "temp_icon_32");
                d = Ext.widget("JShortcutMenu", {menuObj: d});
                f.add(d)
            }
        }
        Scdp.CacheUtil.get(Scdp.Const.NAVIGATION_BAR_DEFAULT_COLLAPSE) && Ext.getCmp("naviBar").collapse();
        a = a.treeData;
        b = [];
        !Scdp.getSysConfig("tree_menu") && a.menu && (b = a.menu.items);
        Scdp.DebugUtil.isProdMode() ||
        (c = {
            text: "开发工具",
            menu: {items: q}
        }, Scdp.getSysConfig("tree_menu") ? a.menu.items.push(c) : "2" != Scdp.getSysConfig("mainframe_style_version") && (b.push("-"), b.push(c)));
        if (Scdp.getSysConfig("tree_menu")) {
            var g = Ext.clone(a), b = Ext.getCmp("treeAccord");
            b.refresh = function (a) {
                g = a || g;
                Scdp.changeMenu2TreeMenu(g);
                this.store.setRootNode(g)
            };
            b.refresh()
        } else if ("1" == Scdp.getSysConfig("mainframe_style_version"))Ext.getCmp("mainframeMenuBar").insert(0, b); else {
            var c = '\x3cdiv id\x3d"navigation"\x3e\x3cul\x3e', o = [], f = function (a,
                                                                                      b) {
                var c = a.getPosition(), g = o.indexOf(a), g = $("a[menuIndex\x3d'" + g + "']"), d = g.offset(), e = b.browserEvent;
                (d.left > e.clientX || d.left + g.width() < e.clientX || d.top > e.clientY || c[1] + a.getHeight() < e.clientY) && a.hide()
            }, d = 0;
            if (a.menu && a.menu.items) {
                d = a.menu.items.length;
                for (b = 0; b < d; b++) {
                    var e = a.menu.items[b];
                    "-" == e || "-\x3e" == e || (c = Scdp.DebugUtil.isProdMode() ? b == a.menu.items.length - 1 ? c + ('\x3cli\x3e\x3ca href\x3d"javascript:void(0)" class\x3d"arroww" menuIndex\x3d"' + b + '"\x3e' + e.text + "\x3c/a\x3e\x3c/li\x3e") : c + ('\x3cli\x3e\x3ca href\x3d"javascript:void(0)" class\x3d"arroww" menuIndex\x3d"' +
                    b + '"\x3e' + e.text + "\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ci\x3e\x3c/i\x3e\x3c/li\x3e") : c + ('\x3cli\x3e\x3ca href\x3d"javascript:void(0)" class\x3d"arroww" menuIndex\x3d"' + b + '"\x3e' + e.text + "\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ci\x3e\x3c/i\x3e\x3c/li\x3e"), e = Ext.create("Ext.menu.Menu", {items: Scdp.ObjUtil.isNotEmpty(e.menu) ? e.menu.items : null}), e.on("mouseleave", f), o.push(e))
                }
            }
            Scdp.DebugUtil.isProdMode() || (c += '\x3cli\x3e\x3ca href\x3d"javascript:void(0)" class\x3d"arroww" menuIndex\x3d"' + d + '"\x3e开发工具\x3c/a\x3e\x3c/li\x3e',
                b = Ext.create("Ext.menu.Menu", {items: q}), b.on("mouseleave", f), o.push(b));
            $(c + "\x3c/ul\x3e\x3c/div\x3e").appendTo(document.body);
            $("a[menuIndex]").mouseenter(function () {
                var a = $(this)[0].offsetParent.offsetLeft - 13, b = $(this)[0].offsetParent.offsetTop + $(this)[0].offsetHeight + 15;
                o[$(this).attr("menuIndex")].showAt(a, b)
            });
            "pc" != Scdp.getDeviceType() && Ext.Array.each(o, function (a) {
                Scdp.initMenuForApp(a)
            });
            $("a[menuIndex]").mouseleave(function (a) {
                var b = o[$(this).attr("menuIndex")], c = b.getPosition(), g = b.getHeight(),
                    d = b.getWidth();
                c && (c[0] > a.clientX || c[0] + d < a.clientX || c[1] > a.clientY || c[1] + g < a.clientY) && b.hide()
            })
        }
    }, j = {}, s = Ext.encode(j), n = Scdp.CacheUtil.getTemp(Scdp.Const.CACHE_TYPE_SYS_MENU, s, !0, !0), t = function () {
        Ext.get("logoutBtn").on({
            click: function () {
                Scdp.MsgUtil.confirm(Scdp.I18N.QUIT_SYSTEM_CONFIRM, function (a) {
                    "yes" == a && Scdp.doAction("sys-user-logout", {}, function () {
                        Scdp.DebugUtil.isProdMode() && Scdp.CacheUtil.removeAllTemp();
                        window.sessionStorage.clear();
                        window.top.location.replace(Scdp.getSysConfig("base_path"))
                    })
                })
            }
        });
        Ext.get("modifyPassBtn").on({
            click: function () {
                Scdp.CryptUtil.getServerPublicKey();
                Ext.create("Scdp.window.PassWindow").show()
            }
        });
        Ext.get("scrollUpBtn").on({
            click: function () {
                var a = Ext.getCmp("shortcutPanel"), b = a.offset;
                0 > b && (b += 1, a.setMargin(62 * b + " 0 0 0"), a.offset = b)
            }
        });
        Ext.get("scrollDownBtn").on({
            click: function () {
                var a = Ext.getCmp("shortcutPanel");
                if (Scdp.ObjUtil.isNotEmpty(d.userFavorites)) {
                    var b = a.offset;
                    1 < b + d.userFavorites.length && (b -= 1, a.setMargin(62 * b + " 0 0 0"), a.offset = b)
                }
            }
        });
        var a = Ext.getCmp("networkStatus"),
            c = Scdp.getSysConfig("base_path");
        window.NETWORK_DELAY_LIST = [];
        Scdp.DebugUtil.isProdMode() && Ext.TaskManager.start({
            run: function () {
                Scdp.DebugUtil.ping(c, function (b) {
                    12 == window.NETWORK_DELAY_LIST.length && (window.NETWORK_DELAY_LIST.reverse(), window.NETWORK_DELAY_LIST.pop(), window.NETWORK_DELAY_LIST.reverse());
                    window.NETWORK_DELAY_LIST.push(b);
                    var c = 0;
                    Ext.each(window.NETWORK_DELAY_LIST, function (a) {
                        c += a
                    });
                    c /= window.NETWORK_DELAY_LIST.length;
                    window.NETWORK_DELAY = c.toFixed(0);
                    c < Scdp.Const.NETWORK_DELAY_THRESHOLD_GOOD ?
                        a.getLayout().setActiveItem(0) : c < Scdp.Const.NETWORK_DELAY_THRESHOLD_NORMAL ? a.getLayout().setActiveItem(1) : a.getLayout().setActiveItem(2)
                })
            }, interval: 5E3
        });
        var e = function (a) {
            a = (a / 1E3).toFixed(0);
            var b = a % 60;
            return parseInt(a / 60) + Scdp.I18N.MINUTE + (1 == b.toString().length ? "0" + b : b) + Scdp.I18N.SECOND
        };
        !0 === window.enableSessionTimer && Ext.TaskManager.start({
            run: function () {
                if (!(0 == window.LOGIN_TIMEOUT || window.reloginwin && window.reloginwin.isVisible())) {
                    var a = window.LOGIN_TIMEOUT - Date.now();
                    a >= 6E4 * Scdp.Const.LOGIN_TIMEOUT_NOTIFY_TIME ?
                        Ext.getCmp("loginTimeoutInfo").setValue("") : 0 >= a ? (Ext.getCmp("loginTimeoutInfo").setValue(""), window.reloginwin = Ext.create("Scdp.window.LoginWindow", {relogin: !0}), window.reloginwin.show()) : Ext.getCmp("loginTimeoutInfo").setValue(Scdp.StrUtil.replaceFirst(Scdp.I18N.LOGIN_TIMEOUT, "%timeleft%", e(a)))
                }
            }, interval: 1E3
        });
        1 == Scdp.CacheUtil.get(Scdp.Const.USER_NEED_MODIFY_PASS) && Ext.create("Scdp.window.PassWindow", {needModifyPass: !0}).show();
        var b = function (a) {
            return "ADMIN" == a ? Scdp.I18N.USER_ADMIN : a
        };
        Ext.getCmp("companyName").setValue(b(Scdp.CacheUtil.get(Scdp.Const.USER_COMPANY_NAME)));
        Ext.getCmp("departmentName").setValue(b(Scdp.CacheUtil.get(Scdp.Const.USER_DEPARTMENT_NAME)));
        var d = Ext.getCmp("shortcutPanel");
        Ext.get("myFavoriteOn").on({
            click: function () {
                var a = Scdp.getActiveModule();
                Scdp.ObjUtil.isNotEmpty(a) && Scdp.MsgUtil.confirm(Scdp.I18N.ADD_TO_MY_FAVORITE, function (b) {
                    if ("yes" == b) {
                        var c = !1;
                        Ext.each(d.items.items, function (b) {
                            if (a.menuCode == b.menuObj.menuCode)return c = !0, !1
                        });
                        c || Scdp.doAction("sys-menu-add-favorite", {menuCode: a.menuCode}, function (a) {
                            d.removeAll(!0);
                            Scdp.CacheUtil.removeAllTempByType(Scdp.Const.CACHE_TYPE_SYS_MENU);
                            a = a.userFavorites;
                            if (Scdp.ObjUtil.isNotEmpty(a)) {
                                d.userFavorites = a;
                                for (var b = 0; b < a.length; b++) {
                                    var c = a[b];
                                    Scdp.ObjUtil.isEmpty(c.imgCls) && (c.imgCls = "temp_icon_32");
                                    c = Ext.widget("JShortcutMenu", {menuObj: c});
                                    d.add(c)
                                }
                            }
                            Scdp.CacheUtil.get(Scdp.Const.NAVIGATION_BAR_DEFAULT_COLLAPSE) && Ext.getCmp("naviBar").collapse()
                        })
                    }
                })
            }
        });
        Ext.get("goHome").on({
            click: function () {
                Scdp.setActiveModule()
            }
        });
        Scdp.getSysConfig("tree_menu") && (b = Scdp.CacheUtil.get(Scdp.Const.COMMON_MAINFRAME_ACCORDING_DEFAULT_CACHE), "tree" ==
        b ? Ext.getCmp("treeAccord").expand() : "favorite" == b && Ext.getCmp("favoriteAccord").expand());
        Scdp.MainFrameEvents.fireEvent("ready");
        Scdp.DebugUtil.isProdMode() ? m && loadTaskList() : (b = Scdp.CacheUtil.get("CURRENT_MODULE_PARAMS"), m && loadTaskList(), Scdp.ObjUtil.isNotEmpty(b) && Scdp.openNewModule(b[0], b[1], b[2], b[3]))
    };
    Scdp.ObjUtil.isEmpty(n) || Scdp.ObjUtil.isEmpty(n.treeData) || Scdp.ObjUtil.isEmpty(n.treeData.menu) || Scdp.ObjUtil.isEmpty(n.treeData.menu.items) ? Scdp.doAction("sys-user-mainframeinit", j, function (a) {
        a.success &&
        (n = a, Scdp.CacheUtil.setTemp(Scdp.Const.CACHE_TYPE_SYS_MENU, s, n, !0, !0), r(n), t())
    }, null, !0) : (Scdp.doAction("common-null", j, null, null, !1, !0), r(n), t())
};
function loadTaskList() {
    Scdp.openNewModule("WorkFlow.controller.WorkFlowController", {}, {
        menuCode: Scdp.Const.MAINPAGE_MENU_CODE,
        menuAction: "WorkFlow.controller.WorkFlowController",
        menuType: "MENU_ITEM_CTL",
        text: Scdp.I18N.DASHBOARD_MENU,
        xtype: "JSysMenuItem"
    }, "MENU_ITEM_CTL", !0)
}
function expendLogin() {
    Scdp.doAction("sys-time-expend", {}, function () {
        Ext.getCmp("loginTimeoutInfo").setValue("")
    }, function () {
    }, !1)
};